{"title":"Combined feed","url":"https://akkuman.github.io/feed-me-up/all.xml","elements":[{"title":"Write, debug and execute BOFs using bof-launcher (part 1) (Z - Labs Blog)","contents":"<span class=\"post-date\">Dec 2, 2024</span> <a class=\"post-link\" href=\"/2024/12/02/write-debug-and-execute-bofs-part1.html\">Write, debug and execute BOFs using bof-launcher (part 1)</a><p>Our <a href=\"https://github.com/The-Z-Labs/bof-launcher\">bof-launcher project</a> allows you to write, build, debug and execute BOFs using\nZig, C and/or assembly language on Windows (x86/x64) and Linux (x86/x64/ARM/AARCH64).</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/toolbox.html\">toolbox</a>,&nbsp;<a href=\"/tags/adversarial-attack-simulation.html\">adversarial-attack-simulation</a>,&nbsp;<a href=\"/tags/bof-launcher.html\">bof-launcher</a>,&nbsp;<a href=\"/tags/BOF.html\">BOF</a></span>","link":"https://blog.z-labs.eu/2024/12/02/write-debug-and-execute-bofs-part1.html","retrieved":1734673199226},{"title":"[PL] TIBER-EU i DORA szansą na budowanie realnej cyberodporności w sektorze finansowym (Z - Labs Blog)","contents":"<span class=\"post-date\">Jul 8, 2024</span> <a class=\"post-link\" href=\"/2024/07/08/tiber-eu-dora-cyberodpornosc.html\">[PL] TIBER-EU i DORA szansą na budowanie realnej cyberodporności w sektorze finansowym</a><p>Prawodawstwo unijne w ostatnich latach jest coraz bardziej aktywne w kwestiach związanych z szeroko pojętym cyberbezpieczeństwem. Komisja Europejska bez wątpienia dostrzega problematykę braku odpowiedniego ogólnego poziomu cyberbezpieczeństwa w państwach członkowskich i aktywnie działa na rzecz poprawy sytuacji. Wystarczy wspomnieć tu o <a href=\"https://digital-strategy.ec.europa.eu/en/policies/cybersecurity-act\">The EU Cybersecurity Act</a>, czy od dawna już obowiązującą dyrektywę NIS (ang. Directive on Security of Network and Information Systems), która weszła w życie w 2016 roku, a na grunt krajowego porządku prawnego została wprowadzona jako <a href=\"https://www.gov.pl/web/cyfryzacja/krajowy-system-cyberbezpieczenstwa-\">Krajowy System Cyberbezpieczeństwa (KSC)</a> w 2018 roku. W tym roku czeka nas również aktualizacja KSC o unijną dyrektywę NIS 2. Odpowiedni projekt ustawy <a href=\"https://www.gov.pl/web/cyfryzacja/walka-z-cyberzagrozeniami-wchodzi-w-nowy-wymiar\">trafił ostatnio do konsultacji publicznych</a>.</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/TIBER-EU.html\">TIBER-EU</a>,&nbsp;<a href=\"/tags/DORA.html\">DORA</a>,&nbsp;<a href=\"/tags/adversarial-attack-simulation.html\">adversarial-attack-simulation</a></span>","link":"https://blog.z-labs.eu/2024/07/08/tiber-eu-dora-cyberodpornosc.html","retrieved":1734673199228},{"title":"[PL] TIBER-EU i DORA szansą na budowanie realnej cyberodporności w sektorze finansowym (Z - Labs Blog)","contents":"<span class=\"post-date\">May 13, 2024</span> <a class=\"post-link\" href=\"/2024/05/13/tiber-eu-dora-cyberodpornosc.html\">[PL] TIBER-EU i DORA szansą na budowanie realnej cyberodporności w sektorze finansowym</a><p>Prawodawstwo unijne w ostatnich latach jest coraz bardziej aktywne w kwestiach związanych z szeroko pojętym cyberbezpieczeństwem. Komisja Europejska bez wątpienia dostrzega problematykę braku odpowiedniego ogólnego poziomu cyberbezpieczeństwa w państwach członkowskich i aktywnie działa na rzecz poprawy sytuacji. Wystarczy wspomnieć tu o <a href=\"https://digital-strategy.ec.europa.eu/en/policies/cybersecurity-act\">The EU Cybersecurity Act</a>, czy od dawna już obowiązującą dyrektywę NIS (ang. Directive on Security of Network and Information Systems), która weszła w życie w 2016 roku, a na grunt krajowego porządku prawnego została wprowadzona jako <a href=\"https://www.gov.pl/web/cyfryzacja/krajowy-system-cyberbezpieczenstwa-\">Krajowy System Cyberbezpieczeństwa (KSC)</a> w 2018 roku. W tym roku czeka nas również aktualizacja KSC o unijną dyrektywę NIS 2. Odpowiedni projekt ustawy <a href=\"https://www.gov.pl/web/cyfryzacja/walka-z-cyberzagrozeniami-wchodzi-w-nowy-wymiar\">trafił ostatnio do konsultacji publicznych</a>.</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/TIBER-EU.html\">TIBER-EU</a>,&nbsp;<a href=\"/tags/adversarial-attack-simulation.html\">adversarial-attack-simulation</a></span>","link":"https://blog.z-labs.eu/2024/05/13/tiber-eu-dora-cyberodpornosc.html","retrieved":1734673199233},{"title":"Executing Cobalt Strike's BOFs on ARM-based Linux devices (Z - Labs Blog)","contents":"<span class=\"post-date\">May 10, 2024</span> <a class=\"post-link\" href=\"/2024/05/10/bofs-on-arm-based-devices.html\">Executing Cobalt Strike's BOFs on ARM-based Linux devices</a><p>We designed and implemented <a href=\"https://github.com/The-Z-Labs/bof-launcher\">bof-launcher</a> with a portability in mind so running BOFs on Linux ARM-based devices is a snap. Below, we’re running our <code class=\"language-plaintext highlighter-rouge\">uname</code> BOF on Raspberry Pi device. For convenience we use our <a href=\"https://github.com/The-Z-Labs/cli4bofs\">cli4bofs</a> tool to execute BOF directly from command line. So let’s jump to our device:</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/toolbox.html\">toolbox</a>,&nbsp;<a href=\"/tags/adversarial-attack-simulation.html\">adversarial-attack-simulation</a>,&nbsp;<a href=\"/tags/bof-launcher.html\">bof-launcher</a>,&nbsp;<a href=\"/tags/BOF.html\">BOF</a></span>","link":"https://blog.z-labs.eu/2024/05/10/bofs-on-arm-based-devices.html","retrieved":1734673199238},{"title":"Running BOFs with our 'bof-launcher' library (Z - Labs Blog)","contents":"<span class=\"post-date\">Feb 8, 2024</span> <a class=\"post-link\" href=\"/2024/02/08/bof-launcher.html\">Running BOFs with our 'bof-launcher' library</a><p>During last months we were busy working on our <a href=\"https://github.com/The-Z-Labs/bof-launcher\">bof-launcher project</a>. In essence it is an open-source library for loading, relocating and launching <a href=\"https://hstechdocs.helpsystems.com/manuals/cobaltstrike/current/userguide/content/topics/beacon-object-files_main.htm\">Cobalt Strike’s BOFs</a> on Windows and UNIX/Linux systems. But it also contains other very interesting features and capabilities that are worth discussing.</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/toolbox.html\">toolbox</a>,&nbsp;<a href=\"/tags/adversarial-attack-simulation.html\">adversarial-attack-simulation</a>,&nbsp;<a href=\"/tags/bof-launcher.html\">bof-launcher</a>,&nbsp;<a href=\"/tags/BOF.html\">BOF</a></span>","link":"https://blog.z-labs.eu/2024/02/08/bof-launcher.html","retrieved":1734673199238},{"title":"Burp Suite Pro real-life tips & tricks: Other useful resources (Z - Labs Blog)","contents":"<span class=\"post-date\">Sep 8, 2023</span> <a class=\"post-link\" href=\"/2023/09/08/burp-tipsTricks2023.html\">Burp Suite Pro real-life tips &amp; tricks: Other useful resources</a><p>Additional references to materials about the Burp Suite Pro tool and its usage:</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/toolbox.html\">toolbox</a>,&nbsp;<a href=\"/tags/web-security-testing.html\">web-security-testing</a></span>","link":"https://blog.z-labs.eu/2023/09/08/burp-tipsTricks2023.html","retrieved":1734673199238},{"title":"Endpoint defense evasion with custom built binaries (Z - Labs Blog)","contents":"<span class=\"post-date\">Aug 25, 2022</span> <a class=\"post-link\" href=\"/2022/08/25/endpoint-security-evasion-with-custom-built-binaries.html\">Endpoint defense evasion with custom built binaries</a><p>It’s already a <a href=\"https://www.ired.team/offensive-security/defense-evasion/av-bypass-with-metasploit-templates\">common knowledge</a> that merely rebuilding binaries could be a good way to attempt to bypass many AV solutions. Here’s a good illustration of exactly that case from our recent penetration testing engagement. Here’s the scenario:</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/toolbox.html\">toolbox</a>,&nbsp;<a href=\"/tags/adversarial-attack-simulation.html\">adversarial-attack-simulation</a></span>","link":"https://blog.z-labs.eu/2022/08/25/endpoint-security-evasion-with-custom-built-binaries.html","retrieved":1734673199239},{"title":"Burp Suite Pro real-life tips & tricks: Authentication engine for command-line tools (Z - Labs Blog)","contents":"<span class=\"post-date\">Jan 12, 2022</span> <a class=\"post-link\" href=\"/2022/01/12/burp-suite-pro-authn-for-cli-tools.html\">Burp Suite Pro real-life tips &amp; tricks: Authentication engine for command-line tools</a><p>Below is a nice Burp trickery I’ve learnt from <a href=\"https://www.ryanwendel.com/2019/09/27/application-enumeration-tips-using-aquatone-and-burp-suite/\">Ryan</a> and extended it also for apps that are using token-based session handling.</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/toolbox.html\">toolbox</a>,&nbsp;<a href=\"/tags/burp.html\">burp</a>,&nbsp;<a href=\"/tags/web-security-testing.html\">web-security-testing</a></span>","link":"https://blog.z-labs.eu/2022/01/12/burp-suite-pro-authn-for-cli-tools.html","retrieved":1734673199241},{"title":"Broken UDP scanning in Nmap v7.91 (Z - Labs Blog)","contents":"<span class=\"post-date\">Oct 8, 2021</span> <a class=\"post-link\" href=\"/2021/10/08/broken-udp-scanning-in-nmap-7-91.html\">Broken UDP scanning in Nmap v7.91</a><p>As in most penetration testing/red teaming companies we at Z-Labs use Nmap security scanner tool quite extensively. During one of our network penetration testing engagements we have noticed that UDP scanning (<code class=\"language-plaintext highlighter-rouge\">-sU</code>) functionality misbehaves and does not correctly detect opened UDP ports. Soon after that we identified in Nmap (versions: <code class=\"language-plaintext highlighter-rouge\">7.91</code> and <code class=\"language-plaintext highlighter-rouge\">7.90</code>) subtle implementation issue that resulted in corrupted UDP packets sent during a scan.</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/toolbox.html\">toolbox</a>,&nbsp;<a href=\"/tags/network-security.html\">network-security</a></span>","link":"https://blog.z-labs.eu/2021/10/08/broken-udp-scanning-in-nmap-7-91.html","retrieved":1734673199244},{"title":"Mobile apps penetration testing 2020 (Z - Labs Blog)","contents":"<span class=\"post-date\">Mar 29, 2020</span> <a class=\"post-link\" href=\"/2020/03/29/mobile-security-testing-ref.html\">Mobile apps penetration testing 2020</a><p>There are already great resources about mobile app security testing out there. So here I’m mostly just keep track of resources/approaches that worked for me (with additional comments), to have it in one place for the sake of future reference.</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/notes.html\">notes</a>,&nbsp;<a href=\"/tags/mobile-security.html\">mobile-security</a></span>","link":"https://blog.z-labs.eu/2020/03/29/mobile-security-testing-ref.html","retrieved":1734673199245},{"title":"Burp Suite Pro real-life tips & tricks: Looking for hidden attack surface and leaked secrets (Z - Labs Blog)","contents":"<span class=\"post-date\">Sep 12, 2019</span> <a class=\"post-link\" href=\"/2019/09/12/burp-suite-pro-API-endpoints-discovery.html\">Burp Suite Pro real-life tips &amp; tricks: Looking for hidden attack surface and leaked secrets</a><p>Burp has some nice export features which (combined with some 3rd party tools) can greatly aid in the process of looking for additional/hidden endpoints and/or hardcoded secrets.</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/toolbox.html\">toolbox</a>,&nbsp;<a href=\"/tags/web-security.html\">web-security</a></span>","link":"https://blog.z-labs.eu/2019/09/12/burp-suite-pro-API-endpoints-discovery.html","retrieved":1734673199247},{"title":"Burp Suite Pro real-life tips & tricks: Persistent Access to Collaborator (Z - Labs Blog)","contents":"<span class=\"post-date\">Sep 9, 2019</span> <a class=\"post-link\" href=\"/2019/09/09/burp-suite-pro-rltandt-collaborator-presistence.html\">Burp Suite Pro real-life tips &amp; tricks: Persistent Access to Collaborator</a><p>It was already discussed <a href=\"https://0x00sec.org/t/achieving-persistent-access-to-burp-collaborator-sessions/14311\">here</a>. Putting here for quick reference.</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/toolbox.html\">toolbox</a>,&nbsp;<a href=\"/tags/web-security.html\">web-security</a></span>","link":"https://blog.z-labs.eu/2019/09/09/burp-suite-pro-rltandt-collaborator-presistence.html","retrieved":1734673199249},{"title":"Burp Suite Pro real-life tips & tricks: Authorization testing (Z - Labs Blog)","contents":"<span class=\"post-date\">Jul 21, 2019</span> <a class=\"post-link\" href=\"/2019/07/21/burp-suite-pro-rltandt-authorization-testing.html\">Burp Suite Pro real-life tips &amp; tricks: Authorization testing</a><p>In the past, I found (already quite old - presented in 2013) slide deck <a href=\"https://www.agarri.fr/docs/HiP2k13-Burp_Pro_Tips_and_Tricks.pdf\">Burp Suite Pro real-life tips &amp; tricks</a> authored by <a href=\"https://www.agarri.fr/en/index.html\">Nicolas Grégoire</a> very useful which gave me motivation to constantly look for effciencies in my day to day Burp Suite Pro usage. Since that time Burp has significantly evolved (major milestone - version 2.x was released) and lots of interesting 3rd party extensions were developed.</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/toolbox.html\">toolbox</a>,&nbsp;<a href=\"/tags/web-security.html\">web-security</a></span>","link":"https://blog.z-labs.eu/2019/07/21/burp-suite-pro-rltandt-authorization-testing.html","retrieved":1734673199251},{"title":"LES: Linux privilege escalation auditing tool (Z - Labs Blog)","contents":"<span class=\"post-date\">May 10, 2019</span> <a class=\"post-link\" href=\"/2019/05/10/les-paper.html\">LES: Linux privilege escalation auditing tool</a><p><a href=\"https://github.com/mzet-/linux-exploit-suggester\">LES</a> security tool, developed and maintained by <a href=\"https://z-labs.eu\">Z-Labs</a> is the next generation version of the tool designed to <em>assist</em> the security tester/analyst in looking for critically vulnerable (i.e. locally exploitable) Linux machines during manual red tem/pentest engagement. In this post I will describe how the tool works and how to use it effectively.</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/privilege-escalation.html\">privilege-escalation</a></span>","link":"https://blog.z-labs.eu/2019/05/10/les-paper.html","retrieved":1734673199253},{"title":"Autumn hiking in Owl Mountains (Z - Labs Blog)","contents":"<span class=\"post-date\">Nov 18, 2013</span> <a class=\"post-link\" href=\"/2013/11/18/owl-mountains-hiking.html\">Autumn hiking in Owl Mountains</a><p>We climbed three additional peaks from <a href=\"https://en.wikipedia.org/wiki/Crown_of_Polish_Mountains\">Crown of Polish Mountains</a> during recent hiking in <a href=\"https://en.wikipedia.org/wiki/Owl_Mountains\">Owl Mountains</a> and near areas.</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/off-topic.html\">off-topic</a></span>","link":"https://blog.z-labs.eu/2013/11/18/owl-mountains-hiking.html","retrieved":1734673199256},{"title":"Hiking in Dolomites (Z - Labs Blog)","contents":"<span class=\"post-date\">Sep 12, 2013</span> <a class=\"post-link\" href=\"/2013/09/12/hiking-in-dolomites.html\">Hiking in Dolomites</a><p>Some photos from this year’s hiking in <a href=\"https://en.wikipedia.org/wiki/Dolomites\">Dolomites</a>:</p>\n<span class=\"post-tags\">Tags: <a href=\"/tags/off-topic.html\">off-topic</a></span>","link":"https://blog.z-labs.eu/2013/09/12/hiking-in-dolomites.html","retrieved":1734673199260},{"title":"On the Applicability of the Timeroasting Attack (snovvcrash)","contents":"<span class=\"post-meta\">Dec 8, 2024</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">38 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2024/12/08/applicability-of-the-timeroasting-attack.html\">\n            On the Applicability of the Timeroasting Attack\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#active-directory\" class=\"post-tag\">active-directory</a> <a href=\"/tags.html#timeroasting\" class=\"post-tag\">timeroasting</a> </span><br><br>\n\n<p>Lately I’ve had an opportunity to experiment with the Timeroasting on an engagement, so here are my thoughts on the applicability of the attack in real life conditions with some examples along the way.</p>","link":"https://snovvcrash.rocks/2024/12/08/applicability-of-the-timeroasting-attack.html","retrieved":1734673202060},{"title":"Abuse VS Code Installation for LPE on macOS [Pentest Awards 2023] (snovvcrash)","contents":"<span class=\"post-meta\">May 19, 2024</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">5 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2024/05/19/vs-code-lpe-macos.html\">\n            Abuse VS Code Installation for LPE on macOS [Pentest Awards 2023]\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#pentest-awards\" class=\"post-tag\">pentest-awards</a> <a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#macos\" class=\"post-tag\">macos</a> <a href=\"/tags.html#phishing\" class=\"post-tag\">phishing</a> <a href=\"/tags.html#vs-code\" class=\"post-tag\">vs-code</a> </span><br><br>\n\n\n<p>Когда тебе нужно заскамить сотрудников техподдержки на угон их кред и привилегий в macOS (естественно, действуя в рамках контракта о пентесте), можно смело предлагать завершить установку легитимного ПО, которое ты предварительно кастомизировал. Для примера разберем, как это сделать с любимым всеми Visual Studio Code.</p>","link":"https://snovvcrash.rocks/2024/05/19/vs-code-lpe-macos.html","retrieved":1734673202061},{"title":"From DLL Side Load to Malicious SSP [Pentest Awards 2023] (snovvcrash)","contents":"<span class=\"post-meta\">May 19, 2024</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">8 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2024/05/19/from-dll-side-load-to-malicious-ssp.html\">\n            From DLL Side Load to Malicious SSP [Pentest Awards 2023]\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#pentest-awards\" class=\"post-tag\">pentest-awards</a> <a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#purple-teaming\" class=\"post-tag\">purple-teaming</a> <a href=\"/tags.html#dll-hijacking\" class=\"post-tag\">dll-hijacking</a> <a href=\"/tags.html#dll-side-loading\" class=\"post-tag\">dll-side-loading</a> <a href=\"/tags.html#ssp\" class=\"post-tag\">ssp</a> <a href=\"/tags.html#mimilib\" class=\"post-tag\">mimilib</a> </span><br><br>\n\n\n<p>Нескучный байпас средств защиты подразумевает разглашение приватного кода, который от этого, скорее всего, обесценится. Поэтому я решил рассказать интересный кейс из опыта участия в Purple Team. Нам удалось надурить кастомное правило СЗИ, нацеленное на мониторинг зловредных SSP-модулей.</p>","link":"https://snovvcrash.rocks/2024/05/19/from-dll-side-load-to-malicious-ssp.html","retrieved":1734673202061},{"title":"Newbie's Game Hacking Notes (ft. Turbo Overkill) (snovvcrash)","contents":"<span class=\"post-meta\">May 10, 2024</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">21 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2024/05/10/newbies-game-hacking-notes.html\">\n            Newbie's Game Hacking Notes (ft. Turbo Overkill)\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#game-hacking\" class=\"post-tag\">game-hacking</a> <a href=\"/tags.html#cheat-engine\" class=\"post-tag\">cheat-engine</a> <a href=\"/tags.html#cheat-developement\" class=\"post-tag\">cheat-developement</a> <a href=\"/tags.html#trainer-developement\" class=\"post-tag\">trainer-developement</a> <a href=\"/tags.html#dll-injection\" class=\"post-tag\">dll-injection</a> </span><br><br>\n\n<p>A terse-comments blog of making myself more comfortable with Cheat Engine and the basics of cheats/trainers developement. Practice is based on the awesome Turbo Overkill FPS (v1.35).</p>","link":"https://snovvcrash.rocks/2024/05/10/newbies-game-hacking-notes.html","retrieved":1734673202062},{"title":"HTB{ Ascension } (snovvcrash)","contents":"<span class=\"post-meta\">Apr 30, 2024</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">26 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2024/04/30/htb-ascension.html\">\n            HTB{ Ascension }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#endgame\" class=\"post-tag\">endgame</a> <a href=\"/tags.html#active-directory\" class=\"post-tag\">active-directory</a> <a href=\"/tags.html#blind-sqli\" class=\"post-tag\">blind-sqli</a> <a href=\"/tags.html#sqlmap\" class=\"post-tag\">sqlmap</a> <a href=\"/tags.html#mssql\" class=\"post-tag\">mssql</a> <a href=\"/tags.html#mssql-agent-job\" class=\"post-tag\">mssql-agent-job</a> <a href=\"/tags.html#mssql-proxy\" class=\"post-tag\">mssql-proxy</a> <a href=\"/tags.html#inveigh\" class=\"post-tag\">inveigh</a> <a href=\"/tags.html#seatbelt\" class=\"post-tag\">seatbelt</a> <a href=\"/tags.html#sharpdpapi\" class=\"post-tag\">sharpdpapi</a> <a href=\"/tags.html#dsrm\" class=\"post-tag\">dsrm</a> <a href=\"/tags.html#portscan-ps1\" class=\"post-tag\">portscan-ps1</a> <a href=\"/tags.html#pivoting\" class=\"post-tag\">pivoting</a> <a href=\"/tags.html#double-hop\" class=\"post-tag\">double-hop</a> <a href=\"/tags.html#thycotic\" class=\"post-tag\">thycotic</a> <a href=\"/tags.html#secret-server\" class=\"post-tag\">secret-server</a> <a href=\"/tags.html#disable-firewall\" class=\"post-tag\">disable-firewall</a> <a href=\"/tags.html#aspx-webshell\" class=\"post-tag\">aspx-webshell</a> <a href=\"/tags.html#regeorg\" class=\"post-tag\">regeorg</a> <a href=\"/tags.html#neo-regeorg\" class=\"post-tag\">neo-regeorg</a> <a href=\"/tags.html#openssh-windows\" class=\"post-tag\">openssh-windows</a> <a href=\"/tags.html#slack\" class=\"post-tag\">slack</a> <a href=\"/tags.html#rubeus\" class=\"post-tag\">rubeus</a> <a href=\"/tags.html#asktgt\" class=\"post-tag\">asktgt</a> <a href=\"/tags.html#rbcd\" class=\"post-tag\">rbcd</a> <a href=\"/tags.html#powerview4\" class=\"post-tag\">powerview4</a> </span><br><br>\n\n<p>This write-up is all about pwning the Ascension Endgame from Hack The Box (written in August 2021).</p>","link":"https://snovvcrash.rocks/2024/04/30/htb-ascension.html","retrieved":1734673202074},{"title":"Python ❤️ SSPI: Teaching Impacket to Respect Windows SSO (snovvcrash)","contents":"<span class=\"post-meta\">Apr 30, 2024</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">10 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2024/04/30/impacket-sspi.html\">\n            Python ❤️ SSPI: Teaching Impacket to Respect Windows SSO\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#pt-swarm\" class=\"post-tag\">pt-swarm</a> <a href=\"/tags.html#active-directory\" class=\"post-tag\">active-directory</a> <a href=\"/tags.html#kerberos\" class=\"post-tag\">kerberos</a> <a href=\"/tags.html#tgt-delegation\" class=\"post-tag\">tgt-delegation</a> <a href=\"/tags.html#impacket\" class=\"post-tag\">impacket</a> <a href=\"/tags.html#sspi\" class=\"post-tag\">sspi</a> </span><br><br>\n\n\n<p>Given the Bring Your Own Interpreter (BYOI) concept, the combination of Impacket usage and SSPI capabilities can allow attackers to fly under the radar of endpoint security mechanisms as well as custom network detection rules more efficiently. We will discuss it in more detail further in the article.</p>","link":"https://snovvcrash.rocks/2024/04/30/impacket-sspi.html","retrieved":1734673202074},{"title":"Змеиная пирамида. Запускаем малварь из слепой зоны EDR (snovvcrash)","contents":"<span class=\"post-meta\">Apr 5, 2023</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">31 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2023/04/05/python-pyramid.html\">\n            Змеиная пирамида. Запускаем малварь из слепой зоны EDR\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#red-teaming\" class=\"post-tag\">red-teaming</a> <a href=\"/tags.html#living-off-the-blindspot\" class=\"post-tag\">living-off-the-blindspot</a> <a href=\"/tags.html#maldev\" class=\"post-tag\">maldev</a> <a href=\"/tags.html#av-bypass\" class=\"post-tag\">av-bypass</a> <a href=\"/tags.html#edr-evasion\" class=\"post-tag\">edr-evasion</a> <a href=\"/tags.html#python\" class=\"post-tag\">python</a> <a href=\"/tags.html#iron-python\" class=\"post-tag\">iron-python</a> <a href=\"/tags.html#impacket\" class=\"post-tag\">impacket</a> </span><br><br>\n\n\n<p>В этой статье я покажу, как вооружить standalone-интерпретатор Python для загрузки “опасных” зависимостей прямо в память при помощи инструмента Pyramid (не путать с веб-фреймворком). Потенциально это позволяет обойти антивирусную защиту при пентесте и скрыть источник подозрительной телеметрии от EDR при операциях Red Team.</p>","link":"https://snovvcrash.rocks/2023/04/05/python-pyramid.html","retrieved":1734673202074},{"title":"Adopting Position Independent Shellcodes from Object Files in Memory for Threadless Injection (snovvcrash)","contents":"<span class=\"post-meta\">Feb 14, 2023</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">9 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2023/02/14/pic-generation-for-threadless-injection.html\">\n            Adopting Position Independent Shellcodes from Object Files in Memory for Threadless Injection\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#maldev\" class=\"post-tag\">maldev</a> <a href=\"/tags.html#threadless-injection\" class=\"post-tag\">threadless-injection</a> <a href=\"/tags.html#function-stomping\" class=\"post-tag\">function-stomping</a> <a href=\"/tags.html#shellcode-injection\" class=\"post-tag\">shellcode-injection</a> <a href=\"/tags.html#shellcode-generation\" class=\"post-tag\">shellcode-generation</a> <a href=\"/tags.html#pic\" class=\"post-tag\">pic</a> <a href=\"/tags.html#winexec\" class=\"post-tag\">winexec</a> <a href=\"/tags.html#msfvenom\" class=\"post-tag\">msfvenom</a> </span><br><br>\n\n<p>In this blog I will describe a way to automate generation of Position Independent Shellcodes from object files in memory (by @NinjaParanoid) to be used in Threadless Process Injection (by @_EthicalChaos_).</p>","link":"https://snovvcrash.rocks/2023/02/14/pic-generation-for-threadless-injection.html","retrieved":1734673202074},{"title":"УдаленнаяКартошка0. Повышаем привилегии в AD через кросс-протокольную атаку NTLM Relay (snovvcrash)","contents":"<span class=\"post-meta\">Dec 30, 2022</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">22 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2022/12/30/remote-potato-0.html\">\n            УдаленнаяКартошка0. Повышаем привилегии в AD через кросс-протокольную атаку NTLM Relay\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xss-is\" class=\"post-tag\">xss-is</a> <a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#internal-pentest\" class=\"post-tag\">internal-pentest</a> <a href=\"/tags.html#active-directory\" class=\"post-tag\">active-directory</a> <a href=\"/tags.html#eop\" class=\"post-tag\">eop</a> <a href=\"/tags.html#pivoting\" class=\"post-tag\">pivoting</a> <a href=\"/tags.html#tunneling\" class=\"post-tag\">tunneling</a> <a href=\"/tags.html#ntlm-relay\" class=\"post-tag\">ntlm-relay</a> <a href=\"/tags.html#dcom-rpc\" class=\"post-tag\">dcom-rpc</a> <a href=\"/tags.html#potatoes\" class=\"post-tag\">potatoes</a> <a href=\"/tags.html#remotepotato0\" class=\"post-tag\">remotepotato0</a> <a href=\"/tags.html#cobalt-strike\" class=\"post-tag\">cobalt-strike</a> <a href=\"/tags.html#impacket\" class=\"post-tag\">impacket</a> <a href=\"/tags.html#ntlmrelayx\" class=\"post-tag\">ntlmrelayx</a> </span><br><br>\n\n\n<p>Эта история относится к категории «байки с внутренних пентестов», когда мы попали в среду Active Directory, где члены группы безопасности Domain Users (все пользователи домена) обладали привилегией для удаленного подключения к контроллерам домена по протоколу RDP. Хоть это уже само по себе ужасная «мисконфига», потенциальный злоумышленник все еще должен найти способ для локального повышения привилегий на DC, что проблематично, если на системе стоят все хотфиксы. Здесь и приходит на помощью <strike>баг</strike> фича из серии Microsoft Won’t Fix List – кросс-сессионное провоцирование вынужденной аутентификации по протоколу RPC – которая при отсуствии защиты службы LDAP от атак NTLM Relay мгновенно подарит тебе «ключи от Королевства». В этой статье мы поговорим о различных вариациях проведения данной атаки с использованием эксплоита RemotePotato0, а также на этом примере обсудим, как можно спрятать сигнатуру исполняемого файла от статического анализа.</p>","link":"https://snovvcrash.rocks/2022/12/30/remote-potato-0.html","retrieved":1734673202074},{"title":"Флуктуация шелл-кода. Пишем инжектор для динамического шифрования полезной нагрузки в памяти (snovvcrash)","contents":"<span class=\"post-meta\">Aug 7, 2022</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">31 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2022/08/07/shellcode-fluctuation.html\">\n            Флуктуация шелл-кода. Пишем инжектор для динамического шифрования полезной нагрузки в памяти\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#maldev\" class=\"post-tag\">maldev</a> <a href=\"/tags.html#c2\" class=\"post-tag\">c2</a> <a href=\"/tags.html#covenant\" class=\"post-tag\">covenant</a> <a href=\"/tags.html#memory-evasion\" class=\"post-tag\">memory-evasion</a> <a href=\"/tags.html#shellcode-injection\" class=\"post-tag\">shellcode-injection</a> <a href=\"/tags.html#shellcode-fluctuation\" class=\"post-tag\">shellcode-fluctuation</a> <a href=\"/tags.html#api-hooking\" class=\"post-tag\">api-hooking</a> <a href=\"/tags.html#dotnet\" class=\"post-tag\">dotnet</a> <a href=\"/tags.html#csharp\" class=\"post-tag\">csharp</a> </span><br><br>\n\n\n<p>Сегодня поговорим об одной из продвинутых техник уклонения от средств защиты при использовании фреймворков Command &amp; Control – динамическом сокрытии шеллкода в памяти ожидающего процесса. Я соберу PoC из доступного на гитхабе кода и применю его к опенсорсным фреймворкам. Если взглянуть на список фич, которыми хвастаются все коммерческие фреймворки C2 стоимостью 100500 долларов в час (Cobalt Strike, Nighthawk, Brute Ratel C4), первой в этих списках значится, как правило, возможность уклонения от сканирования памяти запущенных процессов на предмет наличия сигнатур агентов этих самых C2. Что если попробовать воссоздать эту функцию самостоятельно? В статье я покажу, как я это сделал. Итак что же это за зверь такой, этот флуктуирующий шеллкод?</p>","link":"https://snovvcrash.rocks/2022/08/07/shellcode-fluctuation.html","retrieved":1734673202074},{"title":"Вызов мастеру ключей. Инжектим шеллкод в память KeePass, обойдя антивирус (snovvcrash)","contents":"<span class=\"post-meta\">Jun 1, 2022</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">41 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2022/06/01/keethief-syscalls.html\">\n            Вызов мастеру ключей. Инжектим шеллкод в память KeePass, обойдя антивирус\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#hackmag-com\" class=\"post-tag\">hackmag-com</a> <a href=\"/tags.html#maldev\" class=\"post-tag\">maldev</a> <a href=\"/tags.html#shellcode-injection\" class=\"post-tag\">shellcode-injection</a> <a href=\"/tags.html#dotnet\" class=\"post-tag\">dotnet</a> <a href=\"/tags.html#csharp\" class=\"post-tag\">csharp</a> <a href=\"/tags.html#dynamic-invocation\" class=\"post-tag\">dynamic-invocation</a> <a href=\"/tags.html#dinovke\" class=\"post-tag\">dinovke</a> <a href=\"/tags.html#keethief\" class=\"post-tag\">keethief</a> <a href=\"/tags.html#keetheft\" class=\"post-tag\">keetheft</a> <a href=\"/tags.html#keepass\" class=\"post-tag\">keepass</a> </span><br><br>\n\n\n<p>Недавно я столкнулся с ситуацией на пентесте, когда мне было необходимо вытащить мастер-пароль открытой базы данных KeePass из памяти процесса с помощью утилиты <strong>KeeThief</strong> из арсенала GhostPack. Все бы ничего, да вот EDR, следящий за системой, категорически не давал мне этого сделать – ведь под капотом KeeThief живет классическая процедура инъекции шеллкода в удаленный процесс, что не может остаться незамеченным в 2022 году. В этой статье мы рассмотрим замечательный сторонний механизм D/Invoke для C#, позволяющий эффективно дергать Windows API в обход средств защиты и перепишем KeeThief, чтобы его не ловил великий и ужасный «Касперский».</p>","link":"https://snovvcrash.rocks/2022/06/01/keethief-syscalls.html","retrieved":1734673202074},{"title":"Abusing Kerberos Constrained Delegation without Protocol Transition (snovvcrash)","contents":"<span class=\"post-meta\">Mar 6, 2022</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">3 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2022/03/06/abusing-kcd-without-protocol-transition.html\">\n            Abusing Kerberos Constrained Delegation without Protocol Transition\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#internal-pentest\" class=\"post-tag\">internal-pentest</a> <a href=\"/tags.html#active-directory\" class=\"post-tag\">active-directory</a> <a href=\"/tags.html#kerberos\" class=\"post-tag\">kerberos</a> <a href=\"/tags.html#constrained-delegation\" class=\"post-tag\">constrained-delegation</a> <a href=\"/tags.html#s4u2self\" class=\"post-tag\">s4u2self</a> <a href=\"/tags.html#s4u2proxy\" class=\"post-tag\">s4u2proxy</a> <a href=\"/tags.html#rubeus\" class=\"post-tag\">rubeus</a> </span><br><br>\n\n<p>In this blog post I will go through a study case in abusing Kerberos constrained delegation without protocol transition (Kerberos only authentication).</p>","link":"https://snovvcrash.rocks/2022/03/06/abusing-kcd-without-protocol-transition.html","retrieved":1734673202074},{"title":"HTB{ RPG } (snovvcrash)","contents":"<span class=\"post-meta\">Aug 7, 2021</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">23 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2021/08/07/htb-rpg.html\">\n            HTB{ RPG }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#endgame\" class=\"post-tag\">endgame</a> <a href=\"/tags.html#active-directory\" class=\"post-tag\">active-directory</a> <a href=\"/tags.html#jfrog\" class=\"post-tag\">jfrog</a> <a href=\"/tags.html#artifactory\" class=\"post-tag\">artifactory</a> <a href=\"/tags.html#ssrf\" class=\"post-tag\">ssrf</a> <a href=\"/tags.html#cve-2019-19937\" class=\"post-tag\">cve-2019-19937</a> <a href=\"/tags.html#dnspy\" class=\"post-tag\">dnspy</a> <a href=\"/tags.html#rocket-chat\" class=\"post-tag\">rocket-chat</a> <a href=\"/tags.html#rest-api\" class=\"post-tag\">rest-api</a> <a href=\"/tags.html#mongodb\" class=\"post-tag\">mongodb</a> <a href=\"/tags.html#pivoting\" class=\"post-tag\">pivoting</a> <a href=\"/tags.html#chisel\" class=\"post-tag\">chisel</a> <a href=\"/tags.html#lpe\" class=\"post-tag\">lpe</a> <a href=\"/tags.html#winpeas\" class=\"post-tag\">winpeas</a> <a href=\"/tags.html#av-bypass\" class=\"post-tag\">av-bypass</a> <a href=\"/tags.html#ebowla\" class=\"post-tag\">ebowla</a> <a href=\"/tags.html#putty\" class=\"post-tag\">putty</a> <a href=\"/tags.html#puttyrider\" class=\"post-tag\">puttyrider</a> <a href=\"/tags.html#keyscan\" class=\"post-tag\">keyscan</a> <a href=\"/tags.html#cve-2020-1313\" class=\"post-tag\">cve-2020-1313</a> <a href=\"/tags.html#restricted-admin\" class=\"post-tag\">restricted-admin</a> <a href=\"/tags.html#procmon\" class=\"post-tag\">procmon</a> <a href=\"/tags.html#gnome-keyring\" class=\"post-tag\">gnome-keyring</a> <a href=\"/tags.html#mimipenguin\" class=\"post-tag\">mimipenguin</a> <a href=\"/tags.html#wmi\" class=\"post-tag\">wmi</a> <a href=\"/tags.html#invoke-wmimethod\" class=\"post-tag\">invoke-wmimethod</a> <a href=\"/tags.html#lastpass\" class=\"post-tag\">lastpass</a> <a href=\"/tags.html#lastpass-vault-parser\" class=\"post-tag\">lastpass-vault-parser</a> <a href=\"/tags.html#rpcclient\" class=\"post-tag\">rpcclient</a> <a href=\"/tags.html#ntuser-dat\" class=\"post-tag\">ntuser-dat</a> <a href=\"/tags.html#forensics\" class=\"post-tag\">forensics</a> <a href=\"/tags.html#winscp\" class=\"post-tag\">winscp</a> <a href=\"/tags.html#winscppasswd\" class=\"post-tag\">winscppasswd</a> <a href=\"/tags.html#runascs\" class=\"post-tag\">runascs</a> <a href=\"/tags.html#responder\" class=\"post-tag\">responder</a> <a href=\"/tags.html#proxy-pac\" class=\"post-tag\">proxy-pac</a> <a href=\"/tags.html#rubeus\" class=\"post-tag\">rubeus</a> <a href=\"/tags.html#rubeus-asktgt\" class=\"post-tag\">rubeus-asktgt</a> <a href=\"/tags.html#rbcd\" class=\"post-tag\">rbcd</a> <a href=\"/tags.html#rbcd-permissions\" class=\"post-tag\">rbcd-permissions</a> <a href=\"/tags.html#powerview4\" class=\"post-tag\">powerview4</a> <a href=\"/tags.html#impacket\" class=\"post-tag\">impacket</a> <a href=\"/tags.html#bronze-bit\" class=\"post-tag\">bronze-bit</a> <a href=\"/tags.html#efs\" class=\"post-tag\">efs</a> </span><br><br>\n\n<p>This write-up is all about pwning the RPG Endgame from Hack The Box.</p>","link":"https://snovvcrash.rocks/2021/08/07/htb-rpg.html","retrieved":1734673202075},{"title":"Leveraging PrintNightmare to Abuse RBCD and DCSync the Domain (snovvcrash)","contents":"<span class=\"post-meta\">Jun 30, 2021</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">7 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2021/06/30/leveraging-printnightmare-to-abuse-rbcd.html\">\n            Leveraging PrintNightmare to Abuse RBCD and DCSync the Domain\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#internal-pentest\" class=\"post-tag\">internal-pentest</a> <a href=\"/tags.html#active-directory\" class=\"post-tag\">active-directory</a> <a href=\"/tags.html#print-spooler\" class=\"post-tag\">print-spooler</a> <a href=\"/tags.html#printer-bug\" class=\"post-tag\">printer-bug</a> <a href=\"/tags.html#cve-2021-16751\" class=\"post-tag\">cve-2021-16751</a> <a href=\"/tags.html#cve-2021-34527\" class=\"post-tag\">cve-2021-34527</a> <a href=\"/tags.html#arbitary-file-write\" class=\"post-tag\">arbitary-file-write</a> <a href=\"/tags.html#impacket\" class=\"post-tag\">impacket</a> <a href=\"/tags.html#rbcd\" class=\"post-tag\">rbcd</a> </span><br><br>\n\n<p>A relatively stealthy way to exploit PrintNightmare (CVE-2021-1675 / CVE-2021-34527) by configuring and abusing RBCD on a domain controller.</p>","link":"https://snovvcrash.rocks/2021/06/30/leveraging-printnightmare-to-abuse-rbcd.html","retrieved":1734673202076},{"title":"A Note on Calculating Kerberos Keys for AD Accounts (snovvcrash)","contents":"<span class=\"post-meta\">May 21, 2021</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">4 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2021/05/21/calculating-kerberos-keys.html\">\n            A Note on Calculating Kerberos Keys for AD Accounts\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#internal-pentest\" class=\"post-tag\">internal-pentest</a> <a href=\"/tags.html#active-directory\" class=\"post-tag\">active-directory</a> <a href=\"/tags.html#kerberos\" class=\"post-tag\">kerberos</a> <a href=\"/tags.html#unconstrained-delegation\" class=\"post-tag\">unconstrained-delegation</a> <a href=\"/tags.html#rbcd\" class=\"post-tag\">rbcd</a> <a href=\"/tags.html#bronze-bit\" class=\"post-tag\">bronze-bit</a> <a href=\"/tags.html#python\" class=\"post-tag\">python</a> <a href=\"/tags.html#krbrelayx\" class=\"post-tag\">krbrelayx</a> <a href=\"/tags.html#impacket\" class=\"post-tag\">impacket</a> </span><br><br>\n\n<p>A short memo on how to properly calculate Kerberos keys for different types of Active Directory accounts in context of decrypting TGS tickets during delegation attacks.</p>","link":"https://snovvcrash.rocks/2021/05/21/calculating-kerberos-keys.html","retrieved":1734673202078},{"title":"Exploiting CVE-2020-10977 on Old Versions of GitLab CE/EE (snovvcrash)","contents":"<span class=\"post-meta\">Feb 21, 2021</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">14 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2021/02/21/exploiting-cve-2020-10977-on-old-gitlab.html\">\n            Exploiting CVE-2020-10977 on Old Versions of GitLab CE/EE\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#internal-pentest\" class=\"post-tag\">internal-pentest</a> <a href=\"/tags.html#gitlab\" class=\"post-tag\">gitlab</a> <a href=\"/tags.html#cve-2020-10977\" class=\"post-tag\">cve-2020-10977</a> <a href=\"/tags.html#docker\" class=\"post-tag\">docker</a> <a href=\"/tags.html#path-traversal\" class=\"post-tag\">path-traversal</a> <a href=\"/tags.html#lfi\" class=\"post-tag\">lfi</a> <a href=\"/tags.html#reset-password\" class=\"post-tag\">reset-password</a> </span><br><br>\n\n<p>In this post I will demonstrate how CVE-2020-10977 path traversal vulnerability can be exploited on old versions of GitLab to drop a registered user’s password.</p>","link":"https://snovvcrash.rocks/2021/02/21/exploiting-cve-2020-10977-on-old-gitlab.html","retrieved":1734673202080},{"title":"HTB{ Hades } (snovvcrash)","contents":"<span class=\"post-meta\">Dec 28, 2020</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">52 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2020/12/28/htb-hades.html\">\n            HTB{ Hades }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#endgame\" class=\"post-tag\">endgame</a> <a href=\"/tags.html#active-directory\" class=\"post-tag\">active-directory</a> <a href=\"/tags.html#cmdi\" class=\"post-tag\">cmdi</a> <a href=\"/tags.html#msf\" class=\"post-tag\">msf</a> <a href=\"/tags.html#msfvenom\" class=\"post-tag\">msfvenom</a> <a href=\"/tags.html#revsocks\" class=\"post-tag\">revsocks</a> <a href=\"/tags.html#proxychains-ng\" class=\"post-tag\">proxychains-ng</a> <a href=\"/tags.html#pivoting\" class=\"post-tag\">pivoting</a> <a href=\"/tags.html#aspreproast\" class=\"post-tag\">aspreproast</a> <a href=\"/tags.html#ms-rprn\" class=\"post-tag\">ms-rprn</a> <a href=\"/tags.html#printer-bug\" class=\"post-tag\">printer-bug</a> <a href=\"/tags.html#rpcdump-py\" class=\"post-tag\">rpcdump-py</a> <a href=\"/tags.html#dementor-py\" class=\"post-tag\">dementor-py</a> <a href=\"/tags.html#silver-ticket\" class=\"post-tag\">silver-ticket</a> <a href=\"/tags.html#dnsmasq\" class=\"post-tag\">dnsmasq</a> <a href=\"/tags.html#services-py\" class=\"post-tag\">services-py</a> <a href=\"/tags.html#post-server-py\" class=\"post-tag\">post-server-py</a> <a href=\"/tags.html#net-share\" class=\"post-tag\">net-share</a> <a href=\"/tags.html#sam\" class=\"post-tag\">sam</a> <a href=\"/tags.html#secretsdump-py\" class=\"post-tag\">secretsdump-py</a> <a href=\"/tags.html#vss\" class=\"post-tag\">vss</a> <a href=\"/tags.html#mimikatz\" class=\"post-tag\">mimikatz</a> <a href=\"/tags.html#kiwi\" class=\"post-tag\">kiwi</a> <a href=\"/tags.html#dpapi\" class=\"post-tag\">dpapi</a> <a href=\"/tags.html#bloodhound\" class=\"post-tag\">bloodhound</a> <a href=\"/tags.html#rbcd\" class=\"post-tag\">rbcd</a> <a href=\"/tags.html#powermad\" class=\"post-tag\">powermad</a> <a href=\"/tags.html#powerview\" class=\"post-tag\">powerview</a> <a href=\"/tags.html#rubeus\" class=\"post-tag\">rubeus</a> <a href=\"/tags.html#protocol-transition\" class=\"post-tag\">protocol-transition</a> <a href=\"/tags.html#s4u2self\" class=\"post-tag\">s4u2self</a> <a href=\"/tags.html#s4u2proxy\" class=\"post-tag\">s4u2proxy</a> <a href=\"/tags.html#http-spnego\" class=\"post-tag\">http-spnego</a> <a href=\"/tags.html#addcomputer-py\" class=\"post-tag\">addcomputer-py</a> <a href=\"/tags.html#inveigh\" class=\"post-tag\">inveigh</a> <a href=\"/tags.html#adidns\" class=\"post-tag\">adidns</a> <a href=\"/tags.html#hashcat\" class=\"post-tag\">hashcat</a> <a href=\"/tags.html#hashcat-rules\" class=\"post-tag\">hashcat-rules</a> <a href=\"/tags.html#password-reuse\" class=\"post-tag\">password-reuse</a> <a href=\"/tags.html#protected-users\" class=\"post-tag\">protected-users</a> <a href=\"/tags.html#rdp\" class=\"post-tag\">rdp</a> <a href=\"/tags.html#docker-machine\" class=\"post-tag\">docker-machine</a> <a href=\"/tags.html#ldapsearch\" class=\"post-tag\">ldapsearch</a> <a href=\"/tags.html#windapsearch-py\" class=\"post-tag\">windapsearch-py</a> </span><br><br>\n\n<p>In this walkthrough I will show how to own the Hades Endgame from Hack The Box. For me it was the most mesmerizing experience I have got at HTB so far. Hades simulates a small Active Directory environment full of vulnerabilities &amp; misconfigurations which can be exploited to compromise the whole domain. This lab offers you an opportunity to play around with AS-REP Roasting, exploiting Printer Bug from Linux, decrypting DPAPI secrets, abusing Kerberos resource-based constrained delegation and spoofing Active Directory-integrated DNS alongside with some other challenges of dealing with enterprise infrastructure. Let the madness begin!</p>","link":"https://snovvcrash.rocks/2020/12/28/htb-hades.html","retrieved":1734673202084},{"title":"Pretending to Be smbpasswd with impacket (snovvcrash)","contents":"<span class=\"post-meta\">Oct 31, 2020</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">5 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2020/10/31/pretending-to-be-smbpasswd-with-impacket.html\">\n            Pretending to Be smbpasswd with impacket\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#notes\" class=\"post-tag\">notes</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#windows\" class=\"post-tag\">windows</a> <a href=\"/tags.html#null-session\" class=\"post-tag\">null-session</a> <a href=\"/tags.html#smb\" class=\"post-tag\">smb</a> <a href=\"/tags.html#dcerpc\" class=\"post-tag\">dcerpc</a> <a href=\"/tags.html#ms-samr\" class=\"post-tag\">ms-samr</a> <a href=\"/tags.html#wireshark\" class=\"post-tag\">wireshark</a> <a href=\"/tags.html#smbpasswd\" class=\"post-tag\">smbpasswd</a> <a href=\"/tags.html#smbclient-py\" class=\"post-tag\">smbclient-py</a> <a href=\"/tags.html#rpcclient\" class=\"post-tag\">rpcclient</a> <a href=\"/tags.html#chgpassworduser2\" class=\"post-tag\">chgpassworduser2</a> <a href=\"/tags.html#python\" class=\"post-tag\">python</a> <a href=\"/tags.html#impacket\" class=\"post-tag\">impacket</a> <a href=\"/tags.html#password-policies\" class=\"post-tag\">password-policies</a> </span><br><br>\n\n<p>For me the most interesting aspect of pwning the Fuse machine from HTB was dealing with an expired domain user password. I found no other tools except smbpasswd to invoke such a password change remotely from Linux which seemed odd to me. So I decided to create a simple Python script with impacket which binds to the \\samr pipe over SMB (MSRPC-SAMR) with a null session and calls SamrUnicodeChangePasswordUser2 to trigger the password change.</p>","link":"https://snovvcrash.rocks/2020/10/31/pretending-to-be-smbpasswd-with-impacket.html","retrieved":1734673202084},{"title":"Blind SSRF with Oracle WebLogic Deserialization (snovvcrash)","contents":"<span class=\"post-meta\">Sep 26, 2020</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">6 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2020/09/26/blind-ssrf-with-oracle-weblogic-deserialization.html\">\n            Blind SSRF with Oracle WebLogic Deserialization\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#external-pentest\" class=\"post-tag\">external-pentest</a> <a href=\"/tags.html#oracle\" class=\"post-tag\">oracle</a> <a href=\"/tags.html#weblogic\" class=\"post-tag\">weblogic</a> <a href=\"/tags.html#java-deserialization\" class=\"post-tag\">java-deserialization</a> <a href=\"/tags.html#bind-ssrf\" class=\"post-tag\">bind-ssrf</a> <a href=\"/tags.html#dns-rebinding\" class=\"post-tag\">dns-rebinding</a> <a href=\"/tags.html#python\" class=\"post-tag\">python</a> </span><br><br>\n\n<p>A way to get an impact from exploiting Oracle WebLogic Server Java deserialization vulnerabilities (CVE-2017-3506, CVE-2017-10271, CVE-2019-2725, CVE-2019-2729, etc.) without triggering RCE through an SSRF attack.</p>","link":"https://snovvcrash.rocks/2020/09/26/blind-ssrf-with-oracle-weblogic-deserialization.html","retrieved":1734673202086},{"title":"Playing with HTB{ Multimaster } (snovvcrash)","contents":"<span class=\"post-meta\">Sep 19, 2020</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">6 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2020/09/19/htb-multimaster-notes.html\">\n            Playing with HTB{ Multimaster }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#notes\" class=\"post-tag\">notes</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#windows\" class=\"post-tag\">windows</a> <a href=\"/tags.html#mssql\" class=\"post-tag\">mssql</a> <a href=\"/tags.html#sql-injection\" class=\"post-tag\">sql-injection</a> <a href=\"/tags.html#sqlmap\" class=\"post-tag\">sqlmap</a> <a href=\"/tags.html#sqlmap-tamper\" class=\"post-tag\">sqlmap-tamper</a> <a href=\"/tags.html#rid-cycling\" class=\"post-tag\">rid-cycling</a> </span><br><br>\n\n<p>Automate MS SQL injection with a custom sqlmap tamper script to bypass WAF through a UTF-16BE encoded JSON payload. Enumerate AD domain users via RID cycling from within the MS SQL DBMS.</p>","link":"https://snovvcrash.rocks/2020/09/19/htb-multimaster-notes.html","retrieved":1734673202087},{"title":"Tuning PEAS for Fun and Profit (snovvcrash)","contents":"<span class=\"post-meta\">Aug 22, 2020</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">8 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2020/08/22/tuning-peas-for-fun-and-profit.html\">\n            Tuning PEAS for Fun and Profit\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#external-pentest\" class=\"post-tag\">external-pentest</a> <a href=\"/tags.html#exchange\" class=\"post-tag\">exchange</a> <a href=\"/tags.html#activesync\" class=\"post-tag\">activesync</a> <a href=\"/tags.html#peas\" class=\"post-tag\">peas</a> <a href=\"/tags.html#python\" class=\"post-tag\">python</a> </span><br><br>\n\n<p>At the recent external pentest engagement I had a feeling that PEAS (Python Exchange ActiveSync client) is missing some handy features. For example, crawling shared folders and auto downloading discovered files would be a nice function to have as well as brute forcing potential shares by a wordlist. To save time I wrote a draft script at the time of the pentest, but then I decided to fork PEAS project and tune the source code.</p>","link":"https://snovvcrash.rocks/2020/08/22/tuning-peas-for-fun-and-profit.html","retrieved":1734673202089},{"title":"Playing with HTB{ Patents } (snovvcrash)","contents":"<span class=\"post-meta\">May 16, 2020</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">6 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2020/05/16/htb-patents-notes.html\">\n            Playing with HTB{ Patents }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#notes\" class=\"post-tag\">notes</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#docx\" class=\"post-tag\">docx</a> <a href=\"/tags.html#xxe\" class=\"post-tag\">xxe</a> <a href=\"/tags.html#python\" class=\"post-tag\">python</a> <a href=\"/tags.html#scapy\" class=\"post-tag\">scapy</a> </span><br><br>\n\n<p>Automate crafting malicious DOCX for blind XXE-OOB with external DTD using Python and Scapy.</p>","link":"https://snovvcrash.rocks/2020/05/16/htb-patents-notes.html","retrieved":1734673202091},{"title":"О дотфайлах, персонализации и Kali (snovvcrash)","contents":"<span class=\"post-meta\">May 13, 2020</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">10 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2020/05/13/dotfiles-and-personalization.html\">\n            О дотфайлах, персонализации и Kali\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#notes\" class=\"post-tag\">notes</a> <a href=\"/tags.html#personalization\" class=\"post-tag\">personalization</a> <a href=\"/tags.html#dotfiles\" class=\"post-tag\">dotfiles</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#windows\" class=\"post-tag\">windows</a> <a href=\"/tags.html#wsl\" class=\"post-tag\">wsl</a> <a href=\"/tags.html#zsh\" class=\"post-tag\">zsh</a> <a href=\"/tags.html#tmux\" class=\"post-tag\">tmux</a> <a href=\"/tags.html#tilix\" class=\"post-tag\">tilix</a> <a href=\"/tags.html#wsltty\" class=\"post-tag\">wsltty</a> <a href=\"/tags.html#kali-setup\" class=\"post-tag\">kali-setup</a> </span><br><br>\n\n\n<p>В недавнем времени мне приходилось часто разворачивать свою рабочую среду (в частности, Kali Linux) на новых машинах: то на железе, то на виртуалках, то снова на железе… В общем, ты понял. В какой-то момент мне надоели рутинные действия, и я решил извлечь из этой ситуации максимальную пользу для себя и окружающих. В этой статье поговорим о том, как можно организовать хранение своих дотфайлов, чтобы более-менее автоматизировать процесс настройки и персонализации различных ОС для дома и работы.</p>","link":"https://snovvcrash.rocks/2020/05/13/dotfiles-and-personalization.html","retrieved":1734673202092},{"title":"Об обнаружении субдоменов (snovvcrash)","contents":"<span class=\"post-meta\">May 10, 2020</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">8 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2020/05/10/subdomain-discovery.html\">\n            Об обнаружении субдоменов\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#notes\" class=\"post-tag\">notes</a> <a href=\"/tags.html#external-pentest\" class=\"post-tag\">external-pentest</a> <a href=\"/tags.html#osint\" class=\"post-tag\">osint</a> <a href=\"/tags.html#dns-enumeration\" class=\"post-tag\">dns-enumeration</a> <a href=\"/tags.html#subdomain-discovery\" class=\"post-tag\">subdomain-discovery</a> <a href=\"/tags.html#amass\" class=\"post-tag\">amass</a> <a href=\"/tags.html#knockpy\" class=\"post-tag\">knockpy</a> <a href=\"/tags.html#altdns\" class=\"post-tag\">altdns</a> <a href=\"/tags.html#massdns\" class=\"post-tag\">massdns</a> <a href=\"/tags.html#methodology\" class=\"post-tag\">methodology</a> </span><br><br>\n\n<p>Инструментарий и краткая методика для обнаружения субдоменов при проведении внешнего пентеста / анализа веб-приложений / конкурентной разведки.</p>","link":"https://snovvcrash.rocks/2020/05/10/subdomain-discovery.html","retrieved":1734673202099},{"title":"HTB{ Reddish } (snovvcrash)","contents":"<span class=\"post-meta\">Mar 17, 2020</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">31 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2020/03/17/htb-reddish.html\">\n            HTB{ Reddish }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#hackmag-com\" class=\"post-tag\">hackmag-com</a> <a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#node-red\" class=\"post-tag\">node-red</a> <a href=\"/tags.html#lse-sh\" class=\"post-tag\">lse-sh</a> <a href=\"/tags.html#networking\" class=\"post-tag\">networking</a> <a href=\"/tags.html#host-discovery\" class=\"post-tag\">host-discovery</a> <a href=\"/tags.html#ping-sweep\" class=\"post-tag\">ping-sweep</a> <a href=\"/tags.html#static-nmap\" class=\"post-tag\">static-nmap</a> <a href=\"/tags.html#pivoting\" class=\"post-tag\">pivoting</a> <a href=\"/tags.html#ssh-reverse-tcp\" class=\"post-tag\">ssh-reverse-tcp</a> <a href=\"/tags.html#dropbear\" class=\"post-tag\">dropbear</a> <a href=\"/tags.html#tunneling\" class=\"post-tag\">tunneling</a> <a href=\"/tags.html#port-forwarding\" class=\"post-tag\">port-forwarding</a> <a href=\"/tags.html#chisel\" class=\"post-tag\">chisel</a> <a href=\"/tags.html#upx\" class=\"post-tag\">upx</a> <a href=\"/tags.html#file-transfer\" class=\"post-tag\">file-transfer</a> <a href=\"/tags.html#redis\" class=\"post-tag\">redis</a> <a href=\"/tags.html#rsync\" class=\"post-tag\">rsync</a> <a href=\"/tags.html#docker\" class=\"post-tag\">docker</a> <a href=\"/tags.html#docker-compose\" class=\"post-tag\">docker-compose</a> </span><br><br>\n\n\n<p>Что делать в случае, когда тебе нужно захватить контроль над хостом, который находится в другой подсети? Верно — много запутанных туннелей! На примере виртуалки <strong>Reddish</strong> с Hack The Box мы встретимся со средой визуального программирования Node-RED, где в прямом смысле «построим» реверс-шелл, проэксплуатируем слабую конфигурацию СУБД Redis, воспользуемся инструментом зеркалирования файлов rsync для доступа к чужой файловой системе, а также создадим целое множество вредоносных задач cron всех сортов и расцветок. И что самое интересное — все управление хостом будет выполняться посредством маршрутизации трафика по докер-контейнерам через несколько TCP-туннелей. Погнали!</p>","link":"https://snovvcrash.rocks/2020/03/17/htb-reddish.html","retrieved":1734673202100},{"title":"HTB{ Granny💔Grandpa } (snovvcrash)","contents":"<span class=\"post-meta\">Jan 26, 2020</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">22 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2020/01/26/htb-grandparents.html\">\n            HTB{ Granny💔Grandpa }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#hackmag-com\" class=\"post-tag\">hackmag-com</a> <a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#windows\" class=\"post-tag\">windows</a> <a href=\"/tags.html#webdav\" class=\"post-tag\">webdav</a> <a href=\"/tags.html#davtest\" class=\"post-tag\">davtest</a> <a href=\"/tags.html#burp\" class=\"post-tag\">burp</a> <a href=\"/tags.html#msfvenom\" class=\"post-tag\">msfvenom</a> <a href=\"/tags.html#metasploit\" class=\"post-tag\">metasploit</a> <a href=\"/tags.html#upload-asp\" class=\"post-tag\">upload-asp</a> <a href=\"/tags.html#cve-2017-7269\" class=\"post-tag\">cve-2017-7269</a> <a href=\"/tags.html#scstoragepathfromurl\" class=\"post-tag\">scstoragepathfromurl</a> <a href=\"/tags.html#ms14-070\" class=\"post-tag\">ms14-070</a> <a href=\"/tags.html#tcpip-ioctl\" class=\"post-tag\">tcpip-ioctl</a> <a href=\"/tags.html#pivoting\" class=\"post-tag\">pivoting</a> <a href=\"/tags.html#port-forwarding\" class=\"post-tag\">port-forwarding</a> <a href=\"/tags.html#msf-route\" class=\"post-tag\">msf-route</a> <a href=\"/tags.html#msf-socks\" class=\"post-tag\">msf-socks</a> <a href=\"/tags.html#proxychains-ng\" class=\"post-tag\">proxychains-ng</a> <a href=\"/tags.html#ssh-reverse-tcp\" class=\"post-tag\">ssh-reverse-tcp</a> <a href=\"/tags.html#plink\" class=\"post-tag\">plink</a> <a href=\"/tags.html#msf-portfwd\" class=\"post-tag\">msf-portfwd</a> <a href=\"/tags.html#msf-hashdump\" class=\"post-tag\">msf-hashdump</a> <a href=\"/tags.html#lmhash-nthash\" class=\"post-tag\">lmhash-nthash</a> <a href=\"/tags.html#pass-the-hash\" class=\"post-tag\">pass-the-hash</a> <a href=\"/tags.html#impacket\" class=\"post-tag\">impacket</a> <a href=\"/tags.html#psexec-py\" class=\"post-tag\">psexec-py</a> </span><br><br>\n\n\n<p>На заре становления Hack The Box как онлайн-площадки для тренировки вайтхетов в списке машин ее лаборатории значились две виртуалки: <strong>Grandpa</strong> и <strong>Granny</strong>. Обе эти машины нацелены на эксплуатацию уязвимостей WebDAV (набора дополнений для HTTP), и стратегии захвата их root-флагов практически не отличаются друг от друга. Поэтому, чтобы разнообразить прохождения, мы сначала быстро рассмотрим, как можно взломать каждый из хостов по отдельности, а после этого превратим один из них в шлюз, через который атакуем второй хост. Умение пользоваться техникой Pivoting — проброса трафика к жертве (и обратно) через промежуточные хосты — жизненно важный скил для этичного хакера, который пригодится при тестировании на проникновение любой корпоративной сетки.</p>","link":"https://snovvcrash.rocks/2020/01/26/htb-grandparents.html","retrieved":1734673202102},{"title":"В королевстве PWN. Return-to-bss, криптооракулы и реверс-инжиниринг против Великого Сокрушителя (snovvcrash)","contents":"<span class=\"post-meta\">Dec 20, 2019</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">43 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2019/12/20/htb-smasher.html\">\n            В королевстве PWN. Return-to-bss, криптооракулы и реверс-инжиниринг против Великого Сокрушителя\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#pwn-64\" class=\"post-tag\">pwn-64</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#masscan\" class=\"post-tag\">masscan</a> <a href=\"/tags.html#tiny-web-server\" class=\"post-tag\">tiny-web-server</a> <a href=\"/tags.html#path-traversal\" class=\"post-tag\">path-traversal</a> <a href=\"/tags.html#wget-mirror\" class=\"post-tag\">wget-mirror</a> <a href=\"/tags.html#diff\" class=\"post-tag\">diff</a> <a href=\"/tags.html#code-analysis\" class=\"post-tag\">code-analysis</a> <a href=\"/tags.html#gdb-fork\" class=\"post-tag\">gdb-fork</a> <a href=\"/tags.html#python3-pwntools\" class=\"post-tag\">python3-pwntools</a> <a href=\"/tags.html#ret2shellcode\" class=\"post-tag\">ret2shellcode</a> <a href=\"/tags.html#ret2bss\" class=\"post-tag\">ret2bss</a> <a href=\"/tags.html#ssh-key-injection\" class=\"post-tag\">ssh-key-injection</a> <a href=\"/tags.html#linenum-sh\" class=\"post-tag\">linenum-sh</a> <a href=\"/tags.html#padding-oracle\" class=\"post-tag\">padding-oracle</a> <a href=\"/tags.html#aes-cbc\" class=\"post-tag\">aes-cbc</a> <a href=\"/tags.html#pkcs7\" class=\"post-tag\">pkcs7</a> <a href=\"/tags.html#binary-analysis\" class=\"post-tag\">binary-analysis</a> <a href=\"/tags.html#reverse\" class=\"post-tag\">reverse</a> <a href=\"/tags.html#race-condition\" class=\"post-tag\">race-condition</a> <a href=\"/tags.html#ghidra\" class=\"post-tag\">ghidra</a> <a href=\"/tags.html#cutter\" class=\"post-tag\">cutter</a> <a href=\"/tags.html#strace\" class=\"post-tag\">strace</a> <a href=\"/tags.html#binary-patching\" class=\"post-tag\">binary-patching</a> <a href=\"/tags.html#pvs-studio\" class=\"post-tag\">pvs-studio</a> </span><br><br>\n\n\n<p>Год близится к своему логическому завершению и подчищает свои хвосты, поэтому и я, последовав его примеру, закончу цикл «В королевстве PWN» разбором хардкорной тачки <strong>Smasher</strong> с Hack The Box. На этом пути нас ожидает: низкоуровневый сплоитинг веб-сервера со срывом стека (куда же без него?) и генерацией шелл-кода «на лету» с помощью древней магии pwntools; проведение атаки Padding Oracle на Python-приложение для вскрытия шифртекста AES-CBC (абьюзим логику логирования приложения и реализации добивания блоков PKCS#7); реверс-инжиниринг исполняемого файла с атрибутом SUID для повышения привилегий в системе до локального суперпользователя.</p>","link":"https://snovvcrash.rocks/2019/12/20/htb-smasher.html","retrieved":1734673202104},{"title":"В королевстве PWN. ROP-цепочки и атака Return-to-PLT в CTF Bitterman (snovvcrash)","contents":"<span class=\"post-meta\">Nov 23, 2019</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">38 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2019/11/23/bitterman.html\">\n            В королевстве PWN. ROP-цепочки и атака Return-to-PLT в CTF Bitterman\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#ctf\" class=\"post-tag\">ctf</a> <a href=\"/tags.html#pwn-64\" class=\"post-tag\">pwn-64</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#gdb-weaponize\" class=\"post-tag\">gdb-weaponize</a> <a href=\"/tags.html#buffer-overflow\" class=\"post-tag\">buffer-overflow</a> <a href=\"/tags.html#stack-smashing\" class=\"post-tag\">stack-smashing</a> <a href=\"/tags.html#getenvaddr\" class=\"post-tag\">getenvaddr</a> <a href=\"/tags.html#dep-bypass\" class=\"post-tag\">dep-bypass</a> <a href=\"/tags.html#ret2libc\" class=\"post-tag\">ret2libc</a> <a href=\"/tags.html#rop\" class=\"post-tag\">rop</a> <a href=\"/tags.html#rop-chain\" class=\"post-tag\">rop-chain</a> <a href=\"/tags.html#r2\" class=\"post-tag\">r2</a> <a href=\"/tags.html#ropgadget\" class=\"post-tag\">ROPgadget</a> <a href=\"/tags.html#ropper\" class=\"post-tag\">ropper</a> <a href=\"/tags.html#pwntools\" class=\"post-tag\">pwntools</a> <a href=\"/tags.html#aslr-bypass\" class=\"post-tag\">aslr-bypass</a> <a href=\"/tags.html#address-leak\" class=\"post-tag\">address-leak</a> <a href=\"/tags.html#got\" class=\"post-tag\">got</a> <a href=\"/tags.html#plt\" class=\"post-tag\">plt</a> <a href=\"/tags.html#ret2plt\" class=\"post-tag\">ret2plt</a> <a href=\"/tags.html#libc-database\" class=\"post-tag\">libc-database</a> <a href=\"/tags.html#ghidra\" class=\"post-tag\">ghidra</a> </span><br><br>\n\n\n<p>В этой статье мы поговорим об особенностях переполнения стека в 64-битном Linux. Начнем с прохождения трех обучающих кейсов для различных сценариев выполнения Stack Overflow в Ubuntu 19.10 x64. Далее на примере таска Bitterman, представленном на соревновании CAMP CTF 2015, используя возможности модуля pwntools, мы построим эксплоит, демонстрирующий техники Return-oriented programming для обмана запрета исполнения DEP/NX и Return-to-PLT для байпаса механизма рандомизации адресов ASLR без брутфорса.</p>","link":"https://snovvcrash.rocks/2019/11/23/bitterman.html","retrieved":1734673202106},{"title":"В королевстве PWN. Обходим DEP и брутфорсим ASLR в «Октябре» (snovvcrash)","contents":"<span class=\"post-meta\">Nov 8, 2019</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">20 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2019/11/08/htb-october.html\">\n            В королевстве PWN. Обходим DEP и брутфорсим ASLR в «Октябре»\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#pwn-32\" class=\"post-tag\">pwn-32</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#october-cms\" class=\"post-tag\">october-cms</a> <a href=\"/tags.html#default-credentials\" class=\"post-tag\">default-credentials</a> <a href=\"/tags.html#searchsploit\" class=\"post-tag\">searchsploit</a> <a href=\"/tags.html#php5-upload\" class=\"post-tag\">php5-upload</a> <a href=\"/tags.html#python-simple-http\" class=\"post-tag\">python-simple-http</a> <a href=\"/tags.html#suid-files\" class=\"post-tag\">suid-files</a> <a href=\"/tags.html#buffer-overflow\" class=\"post-tag\">buffer-overflow</a> <a href=\"/tags.html#stack-smashing\" class=\"post-tag\">stack-smashing</a> <a href=\"/tags.html#dep-bypass\" class=\"post-tag\">dep-bypass</a> <a href=\"/tags.html#ret2libc\" class=\"post-tag\">ret2libc</a> <a href=\"/tags.html#aslr-bypass\" class=\"post-tag\">aslr-bypass</a> <a href=\"/tags.html#aslr-bruteforce\" class=\"post-tag\">aslr-bruteforce</a> </span><br><br>\n\n\n<p><strong>October</strong> — относительно несложная виртуальная машина с Hack The Box, однако на ее примере удобнее всего разобрать, что, в сущности, из себя представляют: атака ret2libc, применяемая для обхода запрета выполнения данных (DEP/NX-Bit) в стеке; и подбор необходимого адреса той самой стандартной разделяемой библиотеки libc для нивелирования рандомизации размещения адресного пространства (ASLR). Ко всему прочему, на общий уровень сложности повлиял челлендж с захватом админки CMS, где случайно оставили дефолтную авторизацию, поэтому быстро пробежим вступление и более подробно остановимся на этапе privilege escalation.</p>","link":"https://snovvcrash.rocks/2019/11/08/htb-october.html","retrieved":1734673202107},{"title":"В королевстве PWN. Препарируем классику переполнения стека (snovvcrash)","contents":"<span class=\"post-meta\">Oct 20, 2019</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">35 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2019/10/20/classic-stack-overflow.html\">\n            В королевстве PWN. Препарируем классику переполнения стека\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#hackmag-com\" class=\"post-tag\">hackmag-com</a> <a href=\"/tags.html#tutorial\" class=\"post-tag\">tutorial</a> <a href=\"/tags.html#pwn-32\" class=\"post-tag\">pwn-32</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#buffer-overflow\" class=\"post-tag\">buffer-overflow</a> <a href=\"/tags.html#stack-smashing\" class=\"post-tag\">stack-smashing</a> <a href=\"/tags.html#gcc-flags\" class=\"post-tag\">gcc-flags</a> <a href=\"/tags.html#asm\" class=\"post-tag\">asm</a> <a href=\"/tags.html#objdump\" class=\"post-tag\">objdump</a> <a href=\"/tags.html#gdb\" class=\"post-tag\">gdb</a> <a href=\"/tags.html#peda\" class=\"post-tag\">peda</a> <a href=\"/tags.html#checksec\" class=\"post-tag\">checksec</a> <a href=\"/tags.html#eip-overwrite\" class=\"post-tag\">eip-overwrite</a> <a href=\"/tags.html#shellcode\" class=\"post-tag\">shellcode</a> <a href=\"/tags.html#msfvenom\" class=\"post-tag\">msfvenom</a> <a href=\"/tags.html#apport\" class=\"post-tag\">apport</a> <a href=\"/tags.html#core-dump\" class=\"post-tag\">core-dump</a> <a href=\"/tags.html#stack-boundary\" class=\"post-tag\">stack-boundary</a> </span><br><br>\n\n\n<p>Сколько раз и в каких только контекстах уже не писали об уязвимости переполнения стека. Однако в этой статье я постараюсь предоставить универсальное практическое вступление для энтузиастов, начинающих погружение в Low-Level эксплуатацию, и на примере того самого переполнения рассмотрю широкий спектр тем: от существующих на данный момент механизмов безопасности компилятора gcc до точеных особенностей разработки бинарных эксплоитов для срыва стека. Могу поспорить, что со школьной скамьи тебе твердили, что strcpy — это такая небезопасная функция, использование которой чревато попаданию в неблагоприятную ситуацию — выход за границы доступной памяти, и «вообще лучше используй MS Visual Studio…». Почему эта функция небезопасна? Что может произойти, если ее использовать? Как эксплуатировать уязвимости семейства Stacked Based Buffer Overflow? Ответы на эти вопросы я и дам далее.</p>","link":"https://snovvcrash.rocks/2019/10/20/classic-stack-overflow.html","retrieved":1734673202109},{"title":"HTB{ CTF } (snovvcrash)","contents":"<span class=\"post-meta\">Sep 20, 2019</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">33 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2019/09/20/htb-ctf.html\">\n            HTB{ CTF }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#hackmag-com\" class=\"post-tag\">hackmag-com</a> <a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#ldap\" class=\"post-tag\">ldap</a> <a href=\"/tags.html#ldap-injection\" class=\"post-tag\">ldap-injection</a> <a href=\"/tags.html#wfuzz\" class=\"post-tag\">wfuzz</a> <a href=\"/tags.html#double-encoding\" class=\"post-tag\">double-encoding</a> <a href=\"/tags.html#stoken\" class=\"post-tag\">stoken</a> <a href=\"/tags.html#otp\" class=\"post-tag\">otp</a> <a href=\"/tags.html#7z\" class=\"post-tag\">7z</a> <a href=\"/tags.html#fwdsh3ll\" class=\"post-tag\">FwdSh3ll</a> </span><br><br>\n\n\n<p><strong>CTF</strong> — просто идеальная машина для составления райтапа: она достаточна прямолинейна, здесь ты не встретишь множества развилок на пути, ведущих в никуда, от которых становится неинтересным следить за ходом повестования, а мне не придется лишний раз выкручиваться, чтобы придумать, какими словами лучше описать свой ход мыслей при ее прохождении для сохранения интриги. В то же время, эта виртуалка весьма сложна, что в совокупности со своей прямолинейностью делает ее максимально интересной для <strike>взлома</strike> тестирования на проникновение. По мере продвижения к победному флагу нам предстоит: поиграть с stoken — софтверным решением для Linux для генерации одноразовых паролей (RSA SecurID токенов); разобраться с множественными типами LDAP-инъекций (Blind, Second Order); написать несколько скриптов на Python для брута LDAP-каталога; злоупотребить функционалом архиватора 7z, в частности его опцией @listfiles, для чтения файлов с правами суперпользователя.</p>","link":"https://snovvcrash.rocks/2019/09/20/htb-ctf.html","retrieved":1734673202111},{"title":"HTB{ SecNotes } (snovvcrash)","contents":"<span class=\"post-meta\">Apr 5, 2019</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">21 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2019/04/05/htb-secnotes.html\">\n            HTB{ SecNotes }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#xsrf\" class=\"post-tag\">xsrf</a> <a href=\"/tags.html#second-order-sqli\" class=\"post-tag\">second-order-sqli</a> <a href=\"/tags.html#smb\" class=\"post-tag\">smb</a> <a href=\"/tags.html#web-shell\" class=\"post-tag\">web-shell</a> <a href=\"/tags.html#reverse-shell\" class=\"post-tag\">reverse-shell</a> <a href=\"/tags.html#wsl\" class=\"post-tag\">wsl</a> <a href=\"/tags.html#lxss\" class=\"post-tag\">lxss</a> <a href=\"/tags.html#bash-exe\" class=\"post-tag\">bash-exe</a> <a href=\"/tags.html#impacket\" class=\"post-tag\">impacket</a> </span><br><br>\n\n<p><strong>SecNotes</strong> — нетрудная машина под Windows с вариативным начальным этапом и оригинальным заключительным PrivEsc’ом. Для того, чтобы добраться до пользовательской SMB-шары (откуда ты сможешь использовать RCE через залитый веб-шелл), сперва предстоит получить доступ к аккаунту админа веб-приложения. Сделать это можно двумя способами: либо XSRF (путь, задуманный автором коробки), либо SQL-инъекция второго порядка (то, что автор не доглядел). Если же захочешь добраться до root’а, то тебе предложат взаимодействие с подсистемой Linux (WSL) с целью вытащить креды от админской SMB, а далее psexec/winexec для инициализации полноценной сессии суперпользователя. Удачи, мой друг!</p>","link":"https://snovvcrash.rocks/2019/04/05/htb-secnotes.html","retrieved":1734673202113},{"title":"HTB{ Mischief } (snovvcrash)","contents":"<span class=\"post-meta\">Apr 5, 2019</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">36 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2019/04/05/htb-mischief.html\">\n            HTB{ Mischief }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#hackmag-com\" class=\"post-tag\">hackmag-com</a> <a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#snmp\" class=\"post-tag\">snmp</a> <a href=\"/tags.html#snmpwalk\" class=\"post-tag\">snmpwalk</a> <a href=\"/tags.html#snmp-check\" class=\"post-tag\">snmp-check</a> <a href=\"/tags.html#onesixtyone\" class=\"post-tag\">onesixtyone</a> <a href=\"/tags.html#enyx-py\" class=\"post-tag\">enyx-py</a> <a href=\"/tags.html#python-server\" class=\"post-tag\">python-server</a> <a href=\"/tags.html#ipv6\" class=\"post-tag\">ipv6</a> <a href=\"/tags.html#iptables\" class=\"post-tag\">iptables</a> <a href=\"/tags.html#ip6tables\" class=\"post-tag\">ip6tables</a> <a href=\"/tags.html#eui-64\" class=\"post-tag\">eui-64</a> <a href=\"/tags.html#hydra\" class=\"post-tag\">hydra</a> <a href=\"/tags.html#command-injection\" class=\"post-tag\">command-injection</a> <a href=\"/tags.html#reverse-shell\" class=\"post-tag\">reverse-shell</a> <a href=\"/tags.html#acl\" class=\"post-tag\">acl</a> <a href=\"/tags.html#getfacl\" class=\"post-tag\">getfacl</a> <a href=\"/tags.html#bash-history\" class=\"post-tag\">bash_history</a> <a href=\"/tags.html#ping-pattern\" class=\"post-tag\">ping-pattern</a> <a href=\"/tags.html#icmp-shell\" class=\"post-tag\">icmp-shell</a> <a href=\"/tags.html#scapy\" class=\"post-tag\">scapy</a> <a href=\"/tags.html#systemd-run\" class=\"post-tag\">systemd-run</a> <a href=\"/tags.html#lxc\" class=\"post-tag\">lxc</a> </span><br><br>\n\n\n<p><strong>Mischief</strong> — на момент прохождения моя любимая Linux-тачка на HTB. Балансируя на уровне сложности где-то между “Medium” и “Hard” (хотя изначальный рейтинг был определен как “Insane”), эта виртуалка дает простор для творчества. Полагаю, если бы не некоторые ошибки автора (которые мы, конечно же, обсудим ниже), эта машина и правда была бы “безумной”. Итак, с чем предстоит повоевать: энумерация SNMP с последующим извлечением авторизационных данных из аргументов командной строки для простого Python-сервера (пробуем разные тулзы, в том числе snmpwalk, snmp-check, onesixtyone, enyx.py), получение IPv6-адреса машины из того же вывода SNMP (1-й способ), либо через pivoting другого хоста на HTB из MAC-адреса последнего (2-й способ, алгоритм EUI-64), обход фильтра для возможности инъекции команд (+ создание мини ICMP-шелла с помощью scapy на сладкое) и захват кредов пользователя; наконец, получение IPv6 реверс-шелла в обход iptables для запуска su от имени www-data (так как пользователя блокирует механизм распределения прав доступа ACL) и получения root-сессии с кредами из .bash_history.</p>","link":"https://snovvcrash.rocks/2019/04/05/htb-mischief.html","retrieved":1734673202115},{"title":"HTB{ Waldo } (snovvcrash)","contents":"<span class=\"post-meta\">Dec 29, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">20 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/12/29/htb-waldo.html\">\n            HTB{ Waldo }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#path-traversal\" class=\"post-tag\">path-traversal</a> <a href=\"/tags.html#lfi\" class=\"post-tag\">lfi</a> <a href=\"/tags.html#jq\" class=\"post-tag\">jq</a> <a href=\"/tags.html#docker\" class=\"post-tag\">docker</a> <a href=\"/tags.html#restricted-shell\" class=\"post-tag\">restricted-shell</a> <a href=\"/tags.html#rbash\" class=\"post-tag\">rbash</a> <a href=\"/tags.html#capabilities\" class=\"post-tag\">capabilities</a> <a href=\"/tags.html#bashrc\" class=\"post-tag\">bashrc</a> </span><br><br>\n\n<p><strong>Waldo</strong> — несложная Linux-коробка, внутри которой затерялся злосчастный Вальдо. Неотъемлемой частью процедуры поиска последнего станут такие развлечения, как эксплуатация уязвимого к атаке типа “Path Traversal + LFI” веб-приложения, таинственная маршрутизация в docker-контейнер при подключении к Waldo по SSH, обнаружение альтернативного SSH-ключа и подключение к реальной виртуальной машине с помощью оного, побег из restricted-shell’а (rbash) и, на сладкое, чтение файлов с правами root через абьюзинг утилиты с установленным мандатом CAP_DAC_READ_SEARCH из арсенала одного из механизмов управления доступом в Линукс — Linux Capabilities. Итак, где же Вальдо?</p>","link":"https://snovvcrash.rocks/2018/12/29/htb-waldo.html","retrieved":1734673202117},{"title":"HTB{ Active } (snovvcrash)","contents":"<span class=\"post-meta\">Dec 17, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">24 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/12/17/htb-active.html\">\n            HTB{ Active }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#hackmag-com\" class=\"post-tag\">hackmag-com</a> <a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#windows\" class=\"post-tag\">windows</a> <a href=\"/tags.html#directory\" class=\"post-tag\">directory</a> <a href=\"/tags.html#smb\" class=\"post-tag\">smb</a> <a href=\"/tags.html#smbclient\" class=\"post-tag\">smbclient</a> <a href=\"/tags.html#smbmap\" class=\"post-tag\">smbmap</a> <a href=\"/tags.html#enum4linux\" class=\"post-tag\">enum4linux</a> <a href=\"/tags.html#nullinux\" class=\"post-tag\">nullinux</a> <a href=\"/tags.html#gpp\" class=\"post-tag\">gpp</a> <a href=\"/tags.html#gpp-decrypt\" class=\"post-tag\">gpp-decrypt</a> <a href=\"/tags.html#kerberos\" class=\"post-tag\">kerberos</a> <a href=\"/tags.html#kerberoasting\" class=\"post-tag\">kerberoasting</a> <a href=\"/tags.html#impacket\" class=\"post-tag\">impacket</a> <a href=\"/tags.html#hashcat\" class=\"post-tag\">hashcat</a> </span><br><br>\n\n\n<p><strong>Active</strong> — максимально простая, однако, в то же время, одна из самых полезных для прохождения Windows-машин в своей “ценовой категории” на HTB. Почему? Так это же контроллер домена AD! Тезисный обзор предлагаемых развлечений: энумерация SMB-шар (используем tуеву hучу крутых утилит а-ля smbclient, smbmap, enum4linux, nullinux); разграбление SMB с анонимным доступом для захвата файла групповых политик Groups.xml; декрипт GPP-пароля из той самой xml’ки; получение доступа к внутридоменному аккаунту с последующей инициализацией атаки типа Kerberoasting (против протокола аутентификации Kerberos) для извлечения тикета администратора с помощью коллекции Python-скриптов impacket для работы с сетевыми протоколами; наконец, офлайн-восстановление пароля администратора из хеша (с помощью Hashcat) для окончательного pwn’а контроллера.</p>","link":"https://snovvcrash.rocks/2018/12/17/htb-active.html","retrieved":1734673202119},{"title":"HTB{ Hawk } (snovvcrash)","contents":"<span class=\"post-meta\">Dec 9, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">14 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/12/09/htb-hawk.html\">\n            HTB{ Hawk }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#ftp\" class=\"post-tag\">ftp</a> <a href=\"/tags.html#openssl\" class=\"post-tag\">openssl</a> <a href=\"/tags.html#drupal\" class=\"post-tag\">drupal</a> <a href=\"/tags.html#php\" class=\"post-tag\">php</a> <a href=\"/tags.html#php-filter\" class=\"post-tag\">php-filter</a> <a href=\"/tags.html#credentials-reuse\" class=\"post-tag\">credentials-reuse</a> <a href=\"/tags.html#ssh-tunneling\" class=\"post-tag\">ssh-tunneling</a> <a href=\"/tags.html#h2\" class=\"post-tag\">h2</a> </span><br><br>\n\n<p><strong>Hawk</strong> — “разнообразная” виртуалка на Linux, предлагающая целый спектр задач из самых разных областей: здесь тебе и подбор пароля для OpenSSL-шифрованного сообщения, и использование модуля “PHP Filter” в CMS Drupal для выполнения произвольного PHP-кода (и получения reverse-shell’а), и выявление проблемы повторного использования паролей. Последняя приведет к получению доступа к SSH и СУБД H2: будем пробрасывать SSH-туннель, чтобы подключиться к базе данных и выполнить системные команды через абьюзинг функционала CREATE ALIAS от имени суперпользователя. Вначале прочитаем флаг, а затем получим полноценный шелл, и таким образом повысим привилегия в системе.</p>","link":"https://snovvcrash.rocks/2018/12/09/htb-hawk.html","retrieved":1734673202121},{"title":"HTB{ Jerry } (snovvcrash)","contents":"<span class=\"post-meta\">Nov 20, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">14 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/11/20/htb-jerry.html\">\n            HTB{ Jerry }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#windows\" class=\"post-tag\">windows</a> <a href=\"/tags.html#apache\" class=\"post-tag\">apache</a> <a href=\"/tags.html#apache-tomcat\" class=\"post-tag\">apache-tomcat</a> <a href=\"/tags.html#default-password\" class=\"post-tag\">default-password</a> <a href=\"/tags.html#war\" class=\"post-tag\">war</a> <a href=\"/tags.html#java\" class=\"post-tag\">java</a> <a href=\"/tags.html#reverse-shell\" class=\"post-tag\">reverse-shell</a> </span><br><br>\n\n<p><strong>Jerry</strong> — самая простая коробка под управлением Windows, с которой мне довелось столкнуться на просторах HTB. Первая кровь была пролита всего через 6 минут после того, как машина вышла в онлайн. В рамках прохождения нам предстоит сразиться с веб-сервером Apache Tomcat, на котором оставили стандартный пароль для менеджера приложений, собрать вредоносный WAR-файл, содержащий полезную нагрузку в виде reverse-shell’а, развернуть его на жертве и, собственно, получить сессию администратора. В дополнение в конце поста мы расковыряем тот самый файл.war и посмотрим, что за магия творится внутри. Всегда было жалко Тома, ненавижу эту мышь…</p>","link":"https://snovvcrash.rocks/2018/11/20/htb-jerry.html","retrieved":1734673202123},{"title":"HTB{ Bounty } (snovvcrash)","contents":"<span class=\"post-meta\">Nov 10, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">16 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/11/10/htb-bounty.html\">\n            HTB{ Bounty }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#windows\" class=\"post-tag\">windows</a> <a href=\"/tags.html#iis\" class=\"post-tag\">iis</a> <a href=\"/tags.html#asp-net\" class=\"post-tag\">asp-net</a> <a href=\"/tags.html#web-config\" class=\"post-tag\">web-config</a> <a href=\"/tags.html#unicorn\" class=\"post-tag\">unicorn</a> <a href=\"/tags.html#metasploit\" class=\"post-tag\">metasploit</a> <a href=\"/tags.html#ms10-092\" class=\"post-tag\">ms10-092</a> <a href=\"/tags.html#stuxnet\" class=\"post-tag\">stuxnet</a> <a href=\"/tags.html#juicy-potato\" class=\"post-tag\">juicy-potato</a> </span><br><br>\n\n<p><strong>Bounty</strong> — очень простая Windows-машина с 1000 и одним способом PrivEsc’а до админа. Выполнив инъекцию ASP-кода в файл конфигурации web.config веб-сервера IIS, мы получим юзера, а дальше все зависит только от твоего воображения. В рамках этого райтапа будем использовать Metasploit в качестве основного инструмента сбора сведений о локальных уязвимостях и постэксплуатации оных, однако напоследок я приведу список альтернативного ПО, которое с таким же успехом позволит выпотрошить эту тачку.</p>","link":"https://snovvcrash.rocks/2018/11/10/htb-bounty.html","retrieved":1734673202124},{"title":"HTB{ TartarSauce } (snovvcrash)","contents":"<span class=\"post-meta\">Nov 2, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">26 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/11/02/htb-tartarsauce.html\">\n            HTB{ TartarSauce }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#monstra-cms\" class=\"post-tag\">monstra-cms</a> <a href=\"/tags.html#wordpress\" class=\"post-tag\">wordpress</a> <a href=\"/tags.html#wpscan\" class=\"post-tag\">wpscan</a> <a href=\"/tags.html#rfi\" class=\"post-tag\">rfi</a> <a href=\"/tags.html#tar\" class=\"post-tag\">tar</a> <a href=\"/tags.html#code-analysis\" class=\"post-tag\">code-analysis</a> <a href=\"/tags.html#bash\" class=\"post-tag\">bash</a> </span><br><br>\n\n<p><strong>TartarSauce</strong> — весьма нетривиальная Linux-тачка, которая не прочь тебя подурачить. Преодолев огромное количество rabbit-hole’ов, мы столкнемся с: RFI-уязвимостью в устаревшем плагине для WordPress (входная точка в систему) и эксплуатацией некоторых особенностей поведения утилиты tar для обоих PrivEsc’ов. Для повышения привилегий до пользователя будем абьюзить флаги –to-command / –use-compress-program / –checkpoint-action; для инициализации же сессии суперпользователя придется разреверсить bash-скрипт и, воспользовавшись тем фактом, что tar “помнит” владельцев упакованных файлов, скрафтить и запустить SUID-шелл. Также возможен более лайтовый вариант прочтения root-флага, не требующий получения полноценного шелла: здесь будут продемонстрированы некоторые фишки утилиты diff. Это будет длинный райтап…</p>","link":"https://snovvcrash.rocks/2018/11/02/htb-tartarsauce.html","retrieved":1734673202126},{"title":"HTB{ DevOops } (snovvcrash)","contents":"<span class=\"post-meta\">Oct 22, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">22 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/10/22/htb-devoops.html\">\n            HTB{ DevOops }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#xxe\" class=\"post-tag\">xxe</a> <a href=\"/tags.html#xml-entity-injection\" class=\"post-tag\">xml-entity-injection</a> <a href=\"/tags.html#code-analysis\" class=\"post-tag\">code-analysis</a> <a href=\"/tags.html#python\" class=\"post-tag\">python</a> <a href=\"/tags.html#deserialization\" class=\"post-tag\">deserialization</a> <a href=\"/tags.html#pickle\" class=\"post-tag\">pickle</a> <a href=\"/tags.html#reverse-shell\" class=\"post-tag\">reverse-shell</a> <a href=\"/tags.html#git\" class=\"post-tag\">git</a> </span><br><br>\n\n<p><strong>DevOops</strong> — ненапряжная виртуалка под Linux’ом, уязвимая для XML-инъекций (XXE). В данном случае эта атака открывает 2 основных вектора проникновения внутрь системы: тривиальный (просто забрать ssh-ключ из домашней директории; кстати, этот способ — невнимательность создателя машины) и более каноничный, который задумывался как основной (десериализация вредоносной python-нагрузки). Внутри машины все будет совсем просто: для PrivEsc’а достаточно заглянуть в историю git-коммитов репозитория с исходниками блога, который крутится на вебе. По традиции охватим оба способа и накодим немного скриптов для автоматизации pwn’а на питончике. Gonna be fun!</p>","link":"https://snovvcrash.rocks/2018/10/22/htb-devoops.html","retrieved":1734673202127},{"title":"Об HTTP-серверах для трансфера файлов в Linux (snovvcrash)","contents":"<span class=\"post-meta\">Oct 11, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">5 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/10/11/simple-http-servers.html\">\n            Об HTTP-серверах для трансфера файлов в Linux\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#notes\" class=\"post-tag\">notes</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#file-transfer\" class=\"post-tag\">file-transfer</a> <a href=\"/tags.html#http-server\" class=\"post-tag\">http-server</a> <a href=\"/tags.html#python-server\" class=\"post-tag\">python-server</a> <a href=\"/tags.html#php-server\" class=\"post-tag\">php-server</a> <a href=\"/tags.html#nginx\" class=\"post-tag\">nginx</a> </span><br><br>\n\n<p>Последнее время часто сталкивался с необходимостью обмена файлами между Linux-машинами. В этом посте опишу 3 удобных способа, как можно быстро и легко развернуть тривиальный HTTP-сервер для трансфера файлов.</p>","link":"https://snovvcrash.rocks/2018/10/11/simple-http-servers.html","retrieved":1734673202129},{"title":"HTB{ Sunday } (snovvcrash)","contents":"<span class=\"post-meta\">Oct 9, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">23 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/10/09/htb-sunday.html\">\n            HTB{ Sunday }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#solaris\" class=\"post-tag\">solaris</a> <a href=\"/tags.html#finger\" class=\"post-tag\">finger</a> <a href=\"/tags.html#brute-force\" class=\"post-tag\">brute-force</a> <a href=\"/tags.html#patator\" class=\"post-tag\">patator</a> <a href=\"/tags.html#shadow\" class=\"post-tag\">shadow</a> <a href=\"/tags.html#john\" class=\"post-tag\">john</a> <a href=\"/tags.html#wget\" class=\"post-tag\">wget</a> <a href=\"/tags.html#sudoers\" class=\"post-tag\">sudoers</a> </span><br><br>\n\n<p><strong>Sunday</strong> — простая машина на основе ОС Solaris. В ассортименте: древний net-протокол Finger для получения информации о залогиненных пользователях в качестве входной точки, брутфорс SSH-кредов, восстановление пароля соседнего пользователя по хешу (просим помощи у Джона) для первого PrivEsc’а и целая уйма способов получения рут-сессии через эксплуатацию wget для второго PrivEsc’а (попробуем все). Несмотря на то, что это правда одна из самых нетрудных тачек на HTB, большинство людей выбирали модификацию shadow/sudoers -файлов в качестве финального повышения привилегий, откуда непрекращающиеся сбои, ресеты и туча головной боли для вежливых хакеров. Рассмотрим же вместе этот временами бесящий, но от этого не менее веселый путь к победе над Sunday.</p>","link":"https://snovvcrash.rocks/2018/10/09/htb-sunday.html","retrieved":1734673202130},{"title":"HTB{ Olympus } (snovvcrash)","contents":"<span class=\"post-meta\">Oct 3, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">21 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/10/03/htb-olympus.html\">\n            HTB{ Olympus }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#nikto\" class=\"post-tag\">nikto</a> <a href=\"/tags.html#xdebug\" class=\"post-tag\">xdebug</a> <a href=\"/tags.html#reverse-shell\" class=\"post-tag\">reverse-shell</a> <a href=\"/tags.html#aircrack-ng\" class=\"post-tag\">aircrack-ng</a> <a href=\"/tags.html#airgeddon\" class=\"post-tag\">airgeddon</a> <a href=\"/tags.html#dns-zone-transfer\" class=\"post-tag\">dns-zone-transfer</a> <a href=\"/tags.html#dns-axfr\" class=\"post-tag\">dns-axfr</a> <a href=\"/tags.html#port-knocking\" class=\"post-tag\">port-knocking</a> <a href=\"/tags.html#docker\" class=\"post-tag\">docker</a> <a href=\"/tags.html#metasploit\" class=\"post-tag\">metasploit</a> </span><br><br>\n\n<p>Путешествие к вершинам <strong>Олимпа</strong>: 1. Остров Крит — веб-сервер Apache с RCE-уязвимостью в Xdebug; 2. Олимпия — докер-контейнер с таском на брут 802.11 WPA перехвата; 3. Остров Родос — DNS-сервер, хранящий последовательность портов к Port Knocking’у для открытия портала в царство Аида; 4. Царство Аида — последний этап, сама виртуальная машина Olympus, root-сессия будет получена через захват docker’а. А теперь подробнее…</p>","link":"https://snovvcrash.rocks/2018/10/03/htb-olympus.html","retrieved":1734673202132},{"title":"HTB{ Canape } (snovvcrash)","contents":"<span class=\"post-meta\">Sep 28, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">25 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/09/28/htb-canape.html\">\n            HTB{ Canape }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#git\" class=\"post-tag\">git</a> <a href=\"/tags.html#code-analysis\" class=\"post-tag\">code-analysis</a> <a href=\"/tags.html#flask\" class=\"post-tag\">flask</a> <a href=\"/tags.html#python\" class=\"post-tag\">python</a> <a href=\"/tags.html#deserialization\" class=\"post-tag\">deserialization</a> <a href=\"/tags.html#pickle\" class=\"post-tag\">pickle</a> <a href=\"/tags.html#reverse-shell\" class=\"post-tag\">reverse-shell</a> <a href=\"/tags.html#couchdb\" class=\"post-tag\">couchdb</a> <a href=\"/tags.html#fake-pip\" class=\"post-tag\">fake-pip</a> </span><br><br>\n\n<p><strong>Canape</strong> — Linux-тачка средней сложности. Для начала нам предстоит столкнуться с сервером на Flask’е, проанализировать исходники Python-кода, найдя в них мою любимую deserialization-уязвимость, далее нас поджидает повышение привилегий до пользователя через эксплуатацию уязвимости в СУБД CouchDB, и напоследок мы поиграем с методами обмана питоновского менеджера управления пакетами pip с целью выполнения произвольных команд. Последнее подарит root-сессию. Log on, hack in!</p>","link":"https://snovvcrash.rocks/2018/09/28/htb-canape.html","retrieved":1734673202135},{"title":"HTB{ Poison } (snovvcrash)","contents":"<span class=\"post-meta\">Sep 16, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">12 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/09/16/htb-poison.html\">\n            HTB{ Poison }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#freebsd\" class=\"post-tag\">freebsd</a> <a href=\"/tags.html#apache\" class=\"post-tag\">apache</a> <a href=\"/tags.html#apache-tomcat\" class=\"post-tag\">apache-tomcat</a> <a href=\"/tags.html#php\" class=\"post-tag\">php</a> <a href=\"/tags.html#log-poisoning\" class=\"post-tag\">log-poisoning</a> <a href=\"/tags.html#web-shell\" class=\"post-tag\">web-shell</a> <a href=\"/tags.html#reverse-shell\" class=\"post-tag\">reverse-shell</a> <a href=\"/tags.html#lfi\" class=\"post-tag\">lfi</a> <a href=\"/tags.html#phpinfo\" class=\"post-tag\">phpinfo</a> <a href=\"/tags.html#vnc\" class=\"post-tag\">vnc</a> <a href=\"/tags.html#ssh-tunneling\" class=\"post-tag\">ssh-tunneling</a> </span><br><br>\n\n<p><strong>Poison</strong> — одна из самых простых машин с Hack The Box на мой взгляд (если идти самым простым путем, хех), и, по совместительству, моя первая машина с этой платформы. FreeBSD внутри, эта виртуалка предоставляет целых 3 способа прохождения первого этапа: можно забрать авторизационные данные пользователя прямо с веба, если хорошо поискать (самый простой вариант); отравить логи веб-сервера и получить reverse-shell; или же получить RCE с помощью связки LFI + PHPInfo() (самый трудный способ, возможно, не задуманный создателем машины). Далее для повышения привилегий придется пробросить VNC-соединение через SSH-туннель.</p>","link":"https://snovvcrash.rocks/2018/09/16/htb-poison.html","retrieved":1734673202138},{"title":"HTB{ Stratosphere } (snovvcrash)","contents":"<span class=\"post-meta\">Sep 5, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">21 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/09/05/htb-stratoshpere.html\">\n            HTB{ Stratosphere }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#xakep-ru\" class=\"post-tag\">xakep-ru</a> <a href=\"/tags.html#hackmag-com\" class=\"post-tag\">hackmag-com</a> <a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#apache\" class=\"post-tag\">apache</a> <a href=\"/tags.html#apache-struts\" class=\"post-tag\">apache-struts</a> <a href=\"/tags.html#forward-shell\" class=\"post-tag\">forward-shell</a> <a href=\"/tags.html#fwdsh3ll\" class=\"post-tag\">FwdSh3ll</a> <a href=\"/tags.html#python\" class=\"post-tag\">python</a> <a href=\"/tags.html#eval\" class=\"post-tag\">eval</a> <a href=\"/tags.html#library-hijacking\" class=\"post-tag\">library-hijacking</a> <a href=\"/tags.html#john\" class=\"post-tag\">john</a> <a href=\"/tags.html#hashes\" class=\"post-tag\">hashes</a> </span><br><br>\n\n\n<p><strong>Stratosphere</strong> — уютная Linux-машина, которая встретит нас RCE-уязвимостью фреймворка Apache Struts, помучает невозможностью получения стандартного reverse-shell’а, заставив прибегнуть к концепции forward-shell’а, после чего посредством взаимодействия с СУБД MySQL предложит взглянуть на нарушение политики локального хранения паролей, подразнит реверсом дайджестов различных алгоритмов хеширования, а под зановес угостит практикой абьюзинга функции eval() из-под Python’а или же угоном Python-модулей (aka Python Library Hijacking) на выбор (мы угостимся и тем, и другим though). Несмотря на то, что этот бокс идеально вписывается в описанную ранее концепцию “типичной CTF-машины”, найти к ней подход было действительно весело.</p>","link":"https://snovvcrash.rocks/2018/09/05/htb-stratoshpere.html","retrieved":1734673202139},{"title":"HTB{ Celestial } (snovvcrash)","contents":"<span class=\"post-meta\">Aug 25, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">14 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/08/25/htb-celestial.html\">\n            HTB{ Celestial }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#express\" class=\"post-tag\">express</a> <a href=\"/tags.html#node-js\" class=\"post-tag\">node-js</a> <a href=\"/tags.html#deserialization\" class=\"post-tag\">deserialization</a> <a href=\"/tags.html#python\" class=\"post-tag\">python</a> <a href=\"/tags.html#cron\" class=\"post-tag\">cron</a> </span><br><br>\n\n<p><strong>Celestial</strong> — образцовый представитель типичной CTF-машины. Уязвимый web-сервис дает возможность удаленного выполнения кода (RCE), открывая путь к получению reverse-shell’а, откуда до повышения привилегий до суперпользователя (LPE) в силу небрежно выставленных настроек прав доступа рукой подать. Let’s dive into it!</p>","link":"https://snovvcrash.rocks/2018/08/25/htb-celestial.html","retrieved":1734673202140},{"title":"HTB{ Valentine } (snovvcrash)","contents":"<span class=\"post-meta\">Aug 14, 2018</span>\n        <span class=\"post-meta\">• </span>\n        <span class=\"post-meta time\">21 minutes to read </span>\n        <h3 class=\"post-list-h3\">\n          <a class=\"post-link\" href=\"/2018/08/14/htb-valentine.html\">\n            HTB{ Valentine }\n          </a>\n        </h3>\n\n  <span class=\"tag-list\"><a href=\"/tags.html#write-up\" class=\"post-tag\">write-up</a> <a href=\"/tags.html#hackthebox\" class=\"post-tag\">hackthebox</a> <a href=\"/tags.html#machine\" class=\"post-tag\">machine</a> <a href=\"/tags.html#linux\" class=\"post-tag\">linux</a> <a href=\"/tags.html#heartbleed\" class=\"post-tag\">heartbleed</a> <a href=\"/tags.html#tmux\" class=\"post-tag\">tmux</a> <a href=\"/tags.html#dirtycow\" class=\"post-tag\">dirtycow</a> </span><br><br>\n\n<p><strong>Valentine</strong> входит в тройку первых решенных мною машин на Hack The Box. Вскрытие будет включать в себя эксплуатацию Heartbleed, уязвимости протокола OpenSSL, наделавшей много шума в свое время, а также использование менеджера терминальных сессий tmux. Как и у большинства машин, у Valentine существует не единственный способ повышения привилегий до суперпользователя, второй, к слову, достаточно грязный, но мы разберем и его.</p>","link":"https://snovvcrash.rocks/2018/08/14/htb-valentine.html","retrieved":1734673202143},{"title":"浅谈 - 数据库开发规范 & 最佳实践 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2024/04/30/db-best-practices/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2024/04/30/db-best-practices/\" itemprop=\"url\">浅谈 - 数据库开发规范 &amp; 最佳实践</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2024-04-30T14:53:46+08:00\">\n                2024-04-30\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/服务浅谈系列/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">服务浅谈系列</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2024/04/30/db-best-practices/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2024/04/30/db-best-practices/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2024/04/30/db-best-practices/\" class=\"leancloud_visitors\" data-flag-title=\"浅谈 - 数据库开发规范 &amp; 最佳实践\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>说是最佳实践，其实这只是数据库开发的基础规范，事实上在很多团队的实践上，还是会根据具体的团队开发而有些调整或者优化。</p>\n<p>但是因为大部分都是比较基础的数据库开发规范，所以要先知其然，再知其所以然。因此这一份用来打基础还算可以。</p>\n<blockquote>\n<p>因为我们的项目实践大部分都是 Mysql， 因此里面有很多是 Mysql 相关的，不过都是大同小异</p>\n</blockquote>\n<h2 id=\"1-命名规范\"><a href=\"#1-命名规范\" class=\"headerlink\" title=\"1. 命名规范\"></a>1. 命名规范</h2><h3 id=\"1-1-命名总规则\"><a href=\"#1-1-命名总规则\" class=\"headerlink\" title=\"1.1. 命名总规则\"></a>1.1. 命名总规则</h3><ol>\n<li>所有名称的字符范围为：<code>A-Z,a-z,0-9和_(下划线)</code>。不允许使用其他字符作为名称。</li>\n<li>采用英文单词或英文短语（包括缩写）作为名称，不能使用无意义的字符或汉语拼音。</li>\n<li>名称应该清晰明了，能够准确表达事物的含义，最好可读，遵循“见名知义”的原则。</li>\n<li>命名不得超过30个字符的系统限制。</li>\n<li>所有数据库设计要写成文档</li>\n</ol>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2024/04/30/db-best-practices/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2024/04/30/db-best-practices/","retrieved":1734673204704},{"title":"prometheus + grafana 实战篇(4) - 使用计划任务主动抛送到 pushgateway (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2024/02/22/prometheus-best-practices-4-cron-pushgateway/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2024/02/22/prometheus-best-practices-4-cron-pushgateway/\" itemprop=\"url\">prometheus + grafana 实战篇(4) - 使用计划任务主动抛送到 pushgateway</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2024-02-22T17:31:08+08:00\">\n                2024-02-22\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/prometheus-相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">prometheus 相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2024/02/22/prometheus-best-practices-4-cron-pushgateway/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2024/02/22/prometheus-best-practices-4-cron-pushgateway/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2024/02/22/prometheus-best-practices-4-cron-pushgateway/\" class=\"leancloud_visitors\" data-flag-title=\"prometheus + grafana 实战篇(4) - 使用计划任务主动抛送到 pushgateway\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>之前讲过的两种方式:</p>\n<ul>\n<li><a href=\"/2022/12/30/prometheus-best-practices-2-nginx/\" title=\"prometheus + grafana 实战篇(2) - nginx\">prometheus + grafana 实战篇(2) - nginx</a></li>\n<li><a href=\"/2024/02/19/prometheus-best-practices-3-mtail/\" title=\"prometheus + grafana 实战篇(3) - 使用 mtail 采集程序日志\">prometheus + grafana 实战篇(3) - 使用 mtail 采集程序日志</a>\n</li>\n</ul>\n<p>其实已经可以很好的覆盖了生产环境中产生的临时故障情况，并有助于分析流量和错误情况。 但是仅仅这样子还不够。要做到更全面的预警可观测。除了要第一时间处理生产环境中当前产生的错误信息之外。</p>\n<p>还需要对业务数据的表现情况也要造成可观测，比如常见的:</p>\n<ol>\n<li>登录情况，10 分钟成功率预警， 一小时成功率预警，每天成功率预警</li>\n<li>支付情况，10 分钟支付成功率和数量，每天支付总数</li>\n<li>核心功能的使用情况监控，比如用于短信验证码的成功率，Google验证码的成功率，两步验证的成功率，远程连接的成功率，用户核心模块的使用成功率等等</li>\n</ol>\n<p>这些业务数据，一般服务端都会将使用记录写入数据库，后面再用相关平台来进行预警，比如 cacti，zabbix 等运维平台就是通过写 python 脚本去定时查下数据库对应的数据然后来建立预警值。比如之前常用的在 zabbix 写的预警脚本就是<br></p>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2024/02/22/prometheus-best-practices-4-cron-pushgateway/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2024/02/22/prometheus-best-practices-4-cron-pushgateway/","retrieved":1734673204707},{"title":"prometheus + grafana 实战篇(3) - 使用 mtail 采集程序日志 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2024/02/19/prometheus-best-practices-3-mtail/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2024/02/19/prometheus-best-practices-3-mtail/\" itemprop=\"url\">prometheus + grafana 实战篇(3) - 使用 mtail 采集程序日志</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2024-02-19T15:08:59+08:00\">\n                2024-02-19\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/prometheus-相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">prometheus 相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2024/02/19/prometheus-best-practices-3-mtail/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2024/02/19/prometheus-best-practices-3-mtail/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2024/02/19/prometheus-best-practices-3-mtail/\" class=\"leancloud_visitors\" data-flag-title=\"prometheus + grafana 实战篇(3) - 使用 mtail 采集程序日志\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>上一节我们已经可以通过采集 nginx 的 access log 来得到程序的流量情况，以及针对异常状态码来设置预警</p>\n<ul>\n<li><a href=\"/2022/12/30/prometheus-best-practices-2-nginx/\" title=\"prometheus + grafana 实战篇(2) - nginx\">prometheus + grafana 实战篇(2) - nginx</a>\n</li>\n</ul>\n<p>已经可以解决突发性的故障问题了，但是要达到更好的日志可观测性，还是不够，至少有以下两种场景没办法满足:</p>\n<ol>\n<li><p><strong>程序框架的异常状态码和 nginx 的状态码解耦。</strong> 有些程序框架为了保证返回值的友好和错误码的统一，是会在框架底层将抛出来的错误 catch 掉的，而不是直接扔到 nginx 上层返回。 举个例子，比如我们的 golang 框架就是这样子的，我们有自己定制了一整套的错误码标准，包含 数组越界，空指针异常 等异常都会在程序底层 catch，并在返回的 json 串填充错误码 code，并返回 200 状态码。 因此在 nginx 层，基本上只能看到 200 的正常码， 是看不到异常的 500 错误码的(nginx 本身的 499, 502, 504 还是有的)。要看程序错误，只能去查程序的输出 log。</p>\n<blockquote>\n<p>大部分的对外提供的 API 接口，也是会将程序的错误码和 http 的异常码解耦掉</p>\n</blockquote>\n</li>\n<li><p><strong>针对某些外接第三方的 webhook 的错误处理也没办法返回异常状态码。</strong> 比如以支付项目为例，我们会接 Google 和 Apple 的 webhook 通知来处理订单状态，这时候有些处理逻辑是本身程序有 bug，你是不能直接针对 webhook 的返回响应返回异常状态码的，比如 500 错误码，不然这些第三方的 webhook 可能就会再重发。因此哪怕是程序异常，也最好是返回 200 正常码。那么对于这种情况，如果要检测的话，也是只能通过采集程序日志来进行发现和预警。</p>\n</li>\n</ol>\n<p>综上所述，我们还是需要一种可以采集程序日志来生成 Prometheus 指标的服务。<br></p>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2024/02/19/prometheus-best-practices-3-mtail/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2024/02/19/prometheus-best-practices-3-mtail/","retrieved":1734673204708},{"title":"使用签名算法来作为微服务内部调用或者开放 API 的请求权限验证 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2023/11/30/sig-auth/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2023/11/30/sig-auth/\" itemprop=\"url\">使用签名算法来作为微服务内部调用或者开放 API 的请求权限验证</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2023-11-30T11:50:30+08:00\">\n                2023-11-30\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/web安全/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">web安全</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2023/11/30/sig-auth/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2023/11/30/sig-auth/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2023/11/30/sig-auth/\" class=\"leancloud_visitors\" data-flag-title=\"使用签名算法来作为微服务内部调用或者开放 API 的请求权限验证\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>随着内部应用的微服务的增多，一定会涉及到频繁的微服务之间的互相调用，这时候要有一种验证方式来保证两个微服务的调用是合法的(这边只是网关级别的请求校验，该有的业务校验一样要有), 如果你的微服务相互调用是通过 http(s) 的方式，那么采用签名算法来做请求的安全性校验是业务比较常用的方式。</p>\n<blockquote>\n<p>当然还有其他的方式，比如 ip 白名单，但是对于有负载均衡，横向扩展的服务来说，就没那么灵活</p>\n</blockquote>\n<p>签名算法大家其实不陌生，很多第三方的 sdk，权限校验走的就是签名算法的校验方式，原理都大同小异，其中我接触最多的就是 aws 的签名算法: <a href=\"https://docs.aws.amazon.com/zh_cn/AmazonS3/latest/API/sigv4-auth-using-authorization-header.html#sigv4-auth-header-overview\" target=\"_blank\" rel=\"noopener\">AWS Signature Version 4</a></p>\n<h2 id=\"最基础的原理\"><a href=\"#最基础的原理\" class=\"headerlink\" title=\"最基础的原理\"></a>最基础的原理</h2><p>最核心的原理就这几步，对于客户端来说:</p>\n<ol>\n<li>生成一对安全凭证，包括一个 <code>AccessKey</code> 和 <code>SecretKey</code>, 前者可以参与加密也可以不参与，主要是用来匹配对应的 <code>SecretKey</code>， 后者就是用来进行加密生成签名的</li>\n<li>将整个 http 请求对象进行聚合操作，生成一个待签名串 <code>StringToSign</code></li>\n<li>用 <code>SecretKey</code> 加密待签名串 <code>StringToSign</code>，生成最后的签名 <code>Signature</code></li>\n<li>将签名 <code>Signature</code> 和 <code>AccessKey</code> 放在 header 标头，连同整个 http 请求对象发送过去</li>\n</ol>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2023/11/30/sig-auth/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2023/11/30/sig-auth/","retrieved":1734673204708},{"title":"php 开启 opcache 来降低负载并提高抗并发能力 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2023/11/21/php-opcache/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2023/11/21/php-opcache/\" itemprop=\"url\">php 开启 opcache 来降低负载并提高抗并发能力</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2023-11-21T17:58:34+08:00\">\n                2023-11-21\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/php相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">php相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2023/11/21/php-opcache/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2023/11/21/php-opcache/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2023/11/21/php-opcache/\" class=\"leancloud_visitors\" data-flag-title=\"php 开启 opcache 来降低负载并提高抗并发能力\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>之前通过 <a href=\"/2023/11/21/php-fpm-opt/\" title=\"记一次 php-fpm 的配置调优\">记一次 php-fpm 的配置调优</a> 有针对 php-fpm 的配置进行了调优，有起了一些效果，比如随着处理的进程加大，响应时间会快一点。 但是对于一些并发比较高的场景，还是会有 499 的情况，尤其是负载比较高的情况下，CPU 很容易跑满，php 子进程的响应速度也会越来越慢</p>\n<p>当然最粗暴的就是加大服务器硬件配置，然后增大 <code>pm.max_children</code> 的值，硬抗，不过还有一种更合适的方式，就是开启 opcache 来降低服务器负载并提高抗并发能力。</p>\n<h2 id=\"OpCode\"><a href=\"#OpCode\" class=\"headerlink\" title=\"OpCode\"></a>OpCode</h2><p>opcache 其实就是 OpCode + cache，因此要先了解一下什么是 OpCode。</p>\n<p>php 是一种解释型语言，它的执行可分为以下几个流程:</p>\n<ol>\n<li>Scanning(Lexing) ,将PHP代码转换为语言片段(Tokens)</li>\n<li>Parsing, 将Tokens转换成简单而有意义的表达式</li>\n<li>Compilation, 将表达式编译成字节码 (OpCode)</li>\n<li>Execution, 顺次执行 OpCode，每次一条，从而实现PHP脚本的功能。</li></ol>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2023/11/21/php-opcache/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2023/11/21/php-opcache/","retrieved":1734673204713},{"title":"记一次 php-fpm 的配置调优 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2023/11/21/php-fpm-opt/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2023/11/21/php-fpm-opt/\" itemprop=\"url\">记一次 php-fpm 的配置调优</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2023-11-21T16:02:20+08:00\">\n                2023-11-21\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/php相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">php相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2023/11/21/php-fpm-opt/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2023/11/21/php-fpm-opt/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2023/11/21/php-fpm-opt/\" class=\"leancloud_visitors\" data-flag-title=\"记一次 php-fpm 的配置调优\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>前段时间有一个很老的 php 服务发生了一个并发情况，产生大量的 499 状态码，刚开始以为是高并发导致的服务器负载不行。结果去 grafana 后台一看，服务器负载是正常的，然后查了一下同台的 golang 服务，他的返回状态码是非常正常的。</p>\n<p>所以怀疑应该是 php 服务有问题，因为我们用的是 nginx + php-fpm 的部署方式， 所以应该是 php-fpm 的配置有问题。</p>\n<p>然后抓了一下这一台的 php-fpm 的配置，果然有问题:<br></p>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2023/11/21/php-fpm-opt/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2023/11/21/php-fpm-opt/","retrieved":1734673204715},{"title":"浅谈 - 邮件服务最佳实践 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2023/10/19/mail-best-practices/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2023/10/19/mail-best-practices/\" itemprop=\"url\">浅谈 - 邮件服务最佳实践</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2023-10-19T16:26:11+08:00\">\n                2023-10-19\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/服务浅谈系列/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">服务浅谈系列</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2023/10/19/mail-best-practices/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2023/10/19/mail-best-practices/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2023/10/19/mail-best-practices/\" class=\"leancloud_visitors\" data-flag-title=\"浅谈 - 邮件服务最佳实践\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>前前后后使用了 aws 的 ses 服务也用了好几年了，在很多使用上也踩了很多坑，打算从最佳实践角度去聊聊，怎么更好的使用邮件服务。</p>\n<p>主要分为几大块</p>\n<ol>\n<li>邮件质量相关</li>\n<li>邮件安全相关</li>\n<li>邮件统计相关</li>\n<li>减少退信和投诉</li>\n</ol>\n<blockquote>\n<p>以下很多内容虽然是从 aws 的 ses 服务来说明的，但是本质上邮件服务都是大同小异的，完全可以应用到其他的邮件服务上</p>\n</blockquote>\n<h2 id=\"邮件质量相关\"><a href=\"#邮件质量相关\" class=\"headerlink\" title=\"邮件质量相关\"></a>邮件质量相关</h2><h3 id=\"1-关注邮件质量\"><a href=\"#1-关注邮件质量\" class=\"headerlink\" title=\"1. 关注邮件质量\"></a>1. 关注邮件质量</h3><p>电子邮件接收方使用<code>内容筛选器</code>来检测邮件中的特定属性，以识别当前收到的邮件是否合法。这些内容筛选器会自动审核邮件的内容，以识别常见的不受欢迎的邮件特征乃至恶意邮件。</p>\n<p>同时很多邮件服务厂商，比如 Amazon SES 也会使用<code>内容筛选技术</code>，协助在邮件发送之前检测和拦截包含恶意软件的邮件。</p>\n<p>如果电子邮件接收方的内容筛选器认定我们的邮件包含垃圾邮件或恶意电子邮件的特性，邮件很可能被标记出来，并从收件人的收件箱中移出。<br></p>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2023/10/19/mail-best-practices/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2023/10/19/mail-best-practices/","retrieved":1734673204717},{"title":"npm 私有库开发和发布规范 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2023/09/21/npm-publish/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2023/09/21/npm-publish/\" itemprop=\"url\">npm 私有库开发和发布规范</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2023-09-21T14:04:34+08:00\">\n                2023-09-21\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/node相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">node相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2023/09/21/npm-publish/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2023/09/21/npm-publish/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2023/09/21/npm-publish/\" class=\"leancloud_visitors\" data-flag-title=\"npm 私有库开发和发布规范\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>通过 <a href=\"/2023/09/19/npm-verdaccio/\" title=\"使用 verdaccio 搭建前端内部私有 npm 仓库\">使用 verdaccio 搭建前端内部私有 npm 仓库</a> 已经建立了团队内部的私有 npm，并且也知道怎么去进行私有包的发布。</p>\n<p>那这一节讲一下怎么规范的进行包的开发，以及要发布的一些规范，当然不同的团队有自己的规范，仅供参考。</p>\n<h2 id=\"开发规范\"><a href=\"#开发规范\" class=\"headerlink\" title=\"开发规范\"></a>开发规范</h2><p>主要包含以下几个环节:</p>\n<ol>\n<li>编写 <code>README.md</code> 文件，描述包的使用方法和注意事项</li>\n<li>提供类型声明文件 (<code>.d.ts</code>)</li>\n<li>提供 demo，方便使用者快速上手</li>\n<li>提供单元测试，确保包的正确性</li>\n<li>在导出的模块的函数中添加JSDoc注释</li>\n</ol>\n<h3 id=\"1-编写-README-md-文件\"><a href=\"#1-编写-README-md-文件\" class=\"headerlink\" title=\"1. 编写 README.md 文件\"></a>1. 编写 <code>README.md</code> 文件</h3><p><code>README.md</code> 文件无疑是安装者了解这个包的第一途径，因此是非常重要的。 通常README文件应该至少包含以下内容：</p>\n<ol>\n<li><strong>项目名称和描述</strong>：在文件的开头，应该清楚地标明项目的名称和描述，让读者了解这个项目是做什么的；<strong>注意</strong>: 描述会显示在npm包页面的概览中，所以请确保它是有意义的。</li>\n<li><strong>安装指南</strong>：提供详细的步骤，说明如何安装和设置这个包。这可能包括需要的依赖、环境变量等。</li>\n<li><strong>使用示例</strong>：提供一些基本的代码示例，让用户知道如何在他们的项目中使用你的包。</li>\n<li><strong>API 文档</strong>：如果你的包提供了API，你应该在readme中详细说明每个公开的函数或方法，包括它们的参数、返回值和可能抛出的错误。</li>\n<li><strong>Changelog</strong>: 应该提供版本 change log 记录或者跳转到 CHANGE_LOG.md 文件的外链</li>\n</ol>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2023/09/21/npm-publish/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2023/09/21/npm-publish/","retrieved":1734673204719},{"title":"使用 verdaccio 搭建前端内部私有 npm 仓库 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2023/09/19/npm-verdaccio/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2023/09/19/npm-verdaccio/\" itemprop=\"url\">使用 verdaccio 搭建前端内部私有 npm 仓库</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2023-09-19T18:38:25+08:00\">\n                2023-09-19\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/node相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">node相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2023/09/19/npm-verdaccio/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2023/09/19/npm-verdaccio/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2023/09/19/npm-verdaccio/\" class=\"leancloud_visitors\" data-flag-title=\"使用 verdaccio 搭建前端内部私有 npm 仓库\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>随着前端项目越来越多，尤其是内部的 js lib 库越来越多，怎么有效的管理 lib 库的发布，就变成一个很重要的问题了。</p>\n<p>以之前做的 air-ui 来说，其实在进行版本发布的时候，为了保证不污染 gitlab 上的 master 分支，所以就专门写了脚本在版本发布的时候，进行分支切换来处理，具体步骤多又繁琐:<br></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 检查当前分支是否是远程的 master 分支，如果不是，返回错误</span><br><span class=\"line\">2. 执行 yarn dist， 生成 lib 目录</span><br><span class=\"line\">3. 将 lib 目录保存到一个 gitignore 的一个目录 lib_tmp</span><br><span class=\"line\">4. commit and push master 分支 （如果 status 有改变的话）</span><br><span class=\"line\">5. 切换到 master-release 分支，将 lib_tmp 的文件覆盖 lib 目录</span><br><span class=\"line\">6. commit and push master-release 分支</span><br><span class=\"line\">7. master-release 打 tag</span><br><span class=\"line\">8. 把临时文件 lib_tmp 删掉</span><br></pre></td></tr></tbody></table></figure><p></p>\n<blockquote>\n<p>具体细节查看 <a href=\"/2020/01/13/air-ui-16/\" title=\"自建vue组件 air-ui (16) -- 打包构建 pub 任务\">自建vue组件 air-ui (16) -- 打包构建 pub 任务</a></p>\n</blockquote>\n<p>这种流程是有一些缺点和问题的:</p>\n<ol>\n<li><strong>发布流程复杂化：</strong> 需要编写专门的脚本来确定哪些构建产物的代码需要发布，同时还需手动删除不必要的代码。</li>\n<li><strong>容易产生混淆：</strong> 使用 <code>git tag</code> 来发布代码可能会引起混淆，因为它通常用于标记版本，而不是发布代码。</li>\n<li><strong>无法利用语义化版本控制的范围（例如：^1.0.0 或 ~1.0.0）来精确指定依赖的版本</strong></li>\n</ol>\n<p>但是如果我们有自己的 npm 库的话，其实对于库的发布就变得非常简单，只需要简单的 3 步:</p>\n<ol>\n<li>更新<code>package.json</code>中的版本号</li>\n<li>代码构建</li>\n<li>最后执行<code>npm publish</code>命令，即发布成功</li>\n</ol>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2023/09/19/npm-verdaccio/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2023/09/19/npm-verdaccio/","retrieved":1734673204723},{"title":"记一次大陆地区 VerneMQ 出现部分证书校验失败的情况 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2023/08/25/vernemq-ssl-err/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2023/08/25/vernemq-ssl-err/\" itemprop=\"url\">记一次大陆地区 VerneMQ 出现部分证书校验失败的情况</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2023-08-25T13:45:05+08:00\">\n                2023-08-25\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/webrtc相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">webrtc相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2023/08/25/vernemq-ssl-err/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2023/08/25/vernemq-ssl-err/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2023/08/25/vernemq-ssl-err/\" class=\"leancloud_visitors\" data-flag-title=\"记一次大陆地区 VerneMQ 出现部分证书校验失败的情况\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"原因\"><a href=\"#原因\" class=\"headerlink\" title=\"原因\"></a>原因</h2><p>前段时间有发生过一个事情，就是 测试人员在他的 windows 或者 mac 中有出现连接 mqtt VerneMQ 失败的情况, 而且比较神奇的地方在于:</p>\n<ol>\n<li>如果搭梯子的话，是可以连接成功的</li>\n<li>不搭梯子，将 chrome 浏览器换成 Firefox， 也是可以连接的</li>\n<li>在一些机器上，通过修改 DNS 解析，比如改成 <code>8.8.8.8</code>, 也可以正常</li>\n</ol>\n<p>经过排查之后，发现确实在连接失败的时候，VerneMQ 服务器会出现部分证书相关的错误提示:<br></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[info] &lt;0.20467.939&gt; TLS server: In state certify received CLIENT ALERT: Fatal - Certificat Unknown</span><br></pre></td></tr></tbody></table></figure><p></p>\n<h2 id=\"排查\"><a href=\"#排查\" class=\"headerlink\" title=\"排查\"></a>排查</h2><p>首先排查证书问题，确定我们的证书是对的，nginx 都可以正常使用。而且我们的 crt 证书文件是有包含整个验证环节的 fullchain 的聚合证书(包含多个证书链内容的合成证书)。</p>\n<p>然后对比一下 chrome 和 Firefox 的证书校验机制，Firefox 带了自己的 CA 证书链， chrome 的 CA 走的是系统的， 因此怀疑是 VerneMQ 证书链对合成证书的验证环节有问题??</p>\n<p>分析浏览器该站点的证书链路发现，我们用的证书有属于二级证书签发，中间有一个 Go Daddy Secure CA 校验节点<br></p>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2023/08/25/vernemq-ssl-err/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2023/08/25/vernemq-ssl-err/","retrieved":1734673204723},{"title":"chatgpt 使用过程中常用的 prompt (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2023/05/31/gpt-use-prompt/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2023/05/31/gpt-use-prompt/\" itemprop=\"url\">chatgpt 使用过程中常用的 prompt</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2023-05-31T17:00:52+08:00\">\n                2023-05-31\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/ai-相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">ai 相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2023/05/31/gpt-use-prompt/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2023/05/31/gpt-use-prompt/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2023/05/31/gpt-use-prompt/\" class=\"leancloud_visitors\" data-flag-title=\"chatgpt 使用过程中常用的 prompt\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>随着 AI 浪潮的兴起，人工智能将席卷一切，基本上所有的行业都要发生变革。 而在使用 AI 提高工作效率的过程中，prompt 变得越来越重要。</p>\n<p>毫不夸张的说，一个好的 prompt 和一个普通的 prompt 对 chatgpt 的内容的准确性，可用性的输出将会产生巨大的差别。如果把 AI 比作 拉力赛的赛车手， 那么 prompt 就相当于坐在副驾驶坐的引导员。 没有 prompt 去指导方向，再牛逼的车，再牛逼的驾驶员都有可能迷失方向。</p>\n<p>所以我针对我日常在 chatgpt 的使用中，一些常用的 prompt 有记录下来，以作备忘</p>\n<blockquote>\n<p>这边的 prompt 并不是指 role 中的 system 的那个 prompt，而是指 role 为 user 提的问题的一部分内容</p>\n</blockquote>\n<h3 id=\"1-角色扮演\"><a href=\"#1-角色扮演\" class=\"headerlink\" title=\"1. 角色扮演\"></a>1. 角色扮演</h3><p>这个是 prompt 最常用的方式，就是让 chatgpt 来扮演一个角色，然后来问答</p>\n<p>比如可以这样子写:<br></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">你是一个呼吸内科的医生，你需要通过向我提出一些问题，并获得我的回答来判断我大概得的是什么类型的感冒，</span><br><span class=\"line\">如果我回答的信息不够，请继续向我询问，直到你得到充分的信息。你在最好还需要对我的病情给出专业的建议</span><br></pre></td></tr></tbody></table></figure><p></p>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2023/05/31/gpt-use-prompt/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2023/05/31/gpt-use-prompt/","retrieved":1734673204725},{"title":"web 安全之 - 使用 proxy 请求页面来绕过 X-Frame-Options 机制 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2023/02/03/web-bypass-x-frame-options/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2023/02/03/web-bypass-x-frame-options/\" itemprop=\"url\">web 安全之 - 使用 proxy 请求页面来绕过 X-Frame-Options 机制</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2023-02-03T16:43:08+08:00\">\n                2023-02-03\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/web安全/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">web安全</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2023/02/03/web-bypass-x-frame-options/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2023/02/03/web-bypass-x-frame-options/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2023/02/03/web-bypass-x-frame-options/\" class=\"leancloud_visitors\" data-flag-title=\"web 安全之 - 使用 proxy 请求页面来绕过 X-Frame-Options 机制\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>前段时间有个 researcher 回报说，他可以通过使用 <a href=\"https://github.com/niutech/x-frame-bypass\" target=\"_blank\" rel=\"noopener\">X-Frame-Bypass</a> 来绕过我们站点的 <code>X-Frame-Options</code> 机制，从而将我们的站点内嵌在他的网页上，从而造成 Clickjacking</p>\n<p>对于 Clickjacking 来说，我们一般是使用设置 <code>X-Frame-Options</code> header 来防止站点被第三方内嵌，具体可以看我之前的文章:</p>\n<ul>\n<li><a href=\"/2018/05/05/web-forbidden-iframe-embed/\" title=\"web 页面防iframe嵌入（防止点击劫持Clickjacking）\">web 页面防iframe嵌入（防止点击劫持Clickjacking）</a>\n</li>\n</ul>\n<p>通过 <code>X-Frame-Options</code> 我们可以很好的防止我们的站点被第三方内嵌。</p>\n<p>那么 <a href=\"https://github.com/niutech/x-frame-bypass\" target=\"_blank\" rel=\"noopener\">X-Frame-Bypass</a> 是怎么绕过 <code>X-Frame-Options</code> 这个限制的呢?</p>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><p>我后面看了一下他的代码，他的方式其实很简单，既然 <code>X-Frame-Options</code> 是在 response 的 header 返回的，那么我只要在请求的时候，先去通过第三方服务将我想要的站点的内容取出来，然后只转发这个 body 体，不转发 header，就可以绕过了。</p>\n<p>举个例子，比如我内嵌别人站点的代码是这样子的:<br></p><figure class=\"highlight javascript\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;iframe src=<span class=\"string\">\"https://api.codetabs.com/v1/proxy/?quest=https://test-example.com/my_test.html\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></span></span><br></pre></td></tr></tbody></table></figure><p></p>\n<p>这个逻辑很简单，就是这个 第三方 <code>api.codetabs.com</code>, 会去请求 <code>https://test-example.com/my_test.html</code>，并且将源代码返回，其实就是转发<br></p>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2023/02/03/web-bypass-x-frame-options/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2023/02/03/web-bypass-x-frame-options/","retrieved":1734673204727},{"title":"后端开发针对 aws 用户权限进行细分和设置 ip 白名单 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2023/01/18/aws-policy-deny-ip/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2023/01/18/aws-policy-deny-ip/\" itemprop=\"url\">后端开发针对 aws 用户权限进行细分和设置 ip 白名单</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2023-01-18T13:36:05+08:00\">\n                2023-01-18\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/aws-相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">aws 相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2023/01/18/aws-policy-deny-ip/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2023/01/18/aws-policy-deny-ip/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2023/01/18/aws-policy-deny-ip/\" class=\"leancloud_visitors\" data-flag-title=\"后端开发针对 aws 用户权限进行细分和设置 ip 白名单\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>前段时间在项目的安全审计中，有发现了一个关于后端开发中，使用 aws sdk 的一个安全隐患，就是后端的一些项目中，有用到了 aws 的一些功能，包含 s3，ses，dynamodb 等，而这些功能用的 key 都是同一个 key， 都是属于在 aws 后台创建的 develop 用户。</p>\n<p>这个 develop 用户在 aws 后台具有以下的策略权限(policy):</p>\n<ul>\n<li>dynamodb 功能的所有权限 –&gt; <code>AmazonDynamoDBFullAccess</code></li>\n<li>s3 功能的所有权限 –&gt; <code>AmazonS3FullAccess</code></li>\n<li>ses 功能的所有权限 – <code>AmazonSESFullAccess</code></li>\n</ul>\n<p>因为这个 develop 用户拥有的权限太大了， 一旦 key+secret 泄露了， 黑客就可以通过类似于 aws-cli 的命令行工具来做一些不好的事情，比如:</p>\n<ul>\n<li>往 s3 上的 bucket 随意上传某些木马文件</li>\n<li>修改 s3 bucket 的 acl 权限，将所有的 bucket 都改成公开桶，直接暴露在外网，或者给自己插入一个另一个账号的登录后门</li>\n<li>直接使用 ses 发送垃圾邮件，然后受到投诉过多之后，就会可能导致这个 aws 账号被封禁</li>\n<li>删除 dynamodb 的记录或者表</li>\n</ul>\n<p>因此我们必须在后端开发中，根据具体项目所使用到的 aws 的功能，尽可能做最小化的权限分配，并且要设置请求的 ip 白名单，这样子一来，哪怕不小心这个用户的 key+secret 泄露了，我们也不用担心会造成太大的影响。<br></p>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2023/01/18/aws-policy-deny-ip/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2023/01/18/aws-policy-deny-ip/","retrieved":1734673204729},{"title":"prometheus + grafana 实战篇(2) - nginx (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2022/12/30/prometheus-best-practices-2-nginx/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2022/12/30/prometheus-best-practices-2-nginx/\" itemprop=\"url\">prometheus + grafana 实战篇(2) - nginx</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2022-12-30T18:13:24+08:00\">\n                2022-12-30\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/prometheus-相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">prometheus 相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2022/12/30/prometheus-best-practices-2-nginx/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2022/12/30/prometheus-best-practices-2-nginx/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2022/12/30/prometheus-best-practices-2-nginx/\" class=\"leancloud_visitors\" data-flag-title=\"prometheus + grafana 实战篇(2) - nginx\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>经过上一节我们初步定义了一些标签的规范: <a href=\"/2022/12/30/prometheus-best-practices-1-labels/\" title=\"prometheus + grafana 实战篇(1) - 定义标签组和规范\">prometheus + grafana 实战篇(1) - 定义标签组和规范</a>, 本节我们来讲一下怎么监控 nginx</p>\n<h2 id=\"nginx\"><a href=\"#nginx\" class=\"headerlink\" title=\"nginx\"></a>nginx</h2><p>nginx 作为最受欢迎的 web server 之一，我的不少文章都有涉及到 nginx， 这边不再赘述。</p>\n<p>我们假设在使用 prometheus 采集 nginx 之前，我们线上环境已经有 nginx 服务来跑了。</p>\n<blockquote>\n<p>关于 nginx 的安装，可以看我的这一篇文章: <a href=\"/2020/09/15/centos7-install-nginx/\" title=\"CentOS 7 安装 Nginx\">CentOS 7 安装 Nginx</a></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@VM-16-223-centos sbin]# netstat -anlp | grep 80</span><br><span class=\"line\">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      29841/nginx: master</span><br><span class=\"line\">tcp        0      0 172.26.16.223:37134     169.254.0.4:80          TIME_WAIT   -                   </span><br><span class=\"line\">udp6       0      0 fe80::5054:ff:fe23::123 :::*                                656/ntpd</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"nginx-vts-export\"><a href=\"#nginx-vts-export\" class=\"headerlink\" title=\"nginx-vts-export\"></a>nginx-vts-export</h2><p>prometheus 常用的 nginx 的导出器，目前比较常用的是 <a href=\"https://github.com/hnlq715/nginx-vts-exporter\" target=\"_blank\" rel=\"noopener\">nginx-vts-exporter</a></p>\n<p><code>nginx_vts_exporter</code> 依赖 nginx 的这个 <code>nginx-module-vts</code> 模块, 因此我们要先在 nginx 上重新编译安装 <code>nginx-module-vts</code> 模块</p>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2022/12/30/prometheus-best-practices-2-nginx/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2022/12/30/prometheus-best-practices-2-nginx/","retrieved":1734673204730},{"title":"prometheus + grafana 实战篇(1) - 定义标签组和规范 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2022/12/30/prometheus-best-practices-1-labels/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2022/12/30/prometheus-best-practices-1-labels/\" itemprop=\"url\">prometheus + grafana 实战篇(1) - 定义标签组和规范</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2022-12-30T15:49:12+08:00\">\n                2022-12-30\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/prometheus-相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">prometheus 相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2022/12/30/prometheus-best-practices-1-labels/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2022/12/30/prometheus-best-practices-1-labels/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2022/12/30/prometheus-best-practices-1-labels/\" class=\"leancloud_visitors\" data-flag-title=\"prometheus + grafana 实战篇(1) - 定义标签组和规范\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>经过前面的学习，我们已经能够很好的掌握 prometheus 并建立监控后台了，但是那个毕竟是学习篇，用于循循渐进的学习和掌握。</p>\n<ul>\n<li><a href=\"https://kebingzao.com/categories/prometheus-%E7%9B%B8%E5%85%B3/\">基于 prometheus 打造监控报警后台</a></li>\n</ul>\n<p>但是真正涉及到线上的实战，其实复杂度还是跟学习的情况差很多的， 因此我这边结合在实际项目上的一些实战，也捋了个实战篇。</p>\n<h2 id=\"prometheus-推荐的最佳实践\"><a href=\"#prometheus-推荐的最佳实践\" class=\"headerlink\" title=\"prometheus 推荐的最佳实践\"></a>prometheus 推荐的最佳实践</h2><p>在仪表板(dashboard)上显示尽可能多的数据虽然很爽，尤其是当像 Prometheus 这样的系统提供了对应用程序进行如此丰富的检测的能力时。这可能会导致控制台由于包含太多信息而变得难以理解，即使是系统专家也难以从中获得意义。</p>\n<p>所以千万不要将所有的数据都往 dashboard 上面搬，请考虑你建这个 dashboard 的初衷是什么，想要解决什么问题，如果你想要解决的问题是一个很复杂的问题的话，请把他进行拆解，并且分成多个 dashboard 来分批解决。</p>\n<p>prometheus 官方推荐的 dashboard 指南:</p>\n<ol>\n<li>dashboard 上面的图表最好不要超过 5 个</li>\n<li>每张图的图(线) 也不超过 5</li>\n<li>如果使用的是 dashboard 的第三方模板，请避免右侧表格中的条目超过 20-30 个</li>\n</ol>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2022/12/30/prometheus-best-practices-1-labels/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2022/12/30/prometheus-best-practices-1-labels/","retrieved":1734673204732},{"title":"基于 prometheus 打造监控报警后台 (10) - 服务发现(基于文件和基于 http 端点) (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2022/12/14/prometheus-10-sd/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2022/12/14/prometheus-10-sd/\" itemprop=\"url\">基于 prometheus 打造监控报警后台 (10) - 服务发现(基于文件和基于 http 端点)</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2022-12-14T16:31:38+08:00\">\n                2022-12-14\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/prometheus-相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">prometheus 相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2022/12/14/prometheus-10-sd/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2022/12/14/prometheus-10-sd/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2022/12/14/prometheus-10-sd/\" class=\"leancloud_visitors\" data-flag-title=\"基于 prometheus 打造监控报警后台 (10) - 服务发现(基于文件和基于 http 端点)\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>经过前面的 prometheus 系列的学习，我们知道 prometheus 要监控和抓取的端点都要写在 prometheus.yml 这个配置文件，这种方式对于要监控实例较少的情况还行，但是不适合大规模的的集群。</p>\n<p>尤其不适合用于使用容器和基于云的实例的动态集群，这些实例经常会出现变化，有可能新创建，有可能是下架。</p>\n<p>而 prometheus 通过使用 <code>服务发现</code> 来通过自动化的机制来检测，分类新的变更实例情况。</p>\n<h2 id=\"服务发现的几种类别\"><a href=\"#服务发现的几种类别\" class=\"headerlink\" title=\"服务发现的几种类别\"></a>服务发现的几种类别</h2><p>prometheus 提供的服务发现其实种类很多，有很多是跟第三方集成，从配置文件所支持的 参数 来看，分别有:</p>\n<blockquote>\n<p>具体集成的服务列表，官方文档也有: <a href=\"https://github.com/prometheus/prometheus/tree/main/discovery\" target=\"_blank\" rel=\"noopener\">Service Discovery</a></p>\n</blockquote>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2022/12/14/prometheus-10-sd/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2022/12/14/prometheus-10-sd/","retrieved":1734673204734},{"title":"基于 prometheus 打造监控报警后台 (9) - 借助 pushgateway 主动 push 数据 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2022/12/14/prometheus-9-push/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2022/12/14/prometheus-9-push/\" itemprop=\"url\">基于 prometheus 打造监控报警后台 (9) - 借助 pushgateway 主动 push 数据</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2022-12-14T13:30:40+08:00\">\n                2022-12-14\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/prometheus-相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">prometheus 相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2022/12/14/prometheus-9-push/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2022/12/14/prometheus-9-push/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2022/12/14/prometheus-9-push/\" class=\"leancloud_visitors\" data-flag-title=\"基于 prometheus 打造监控报警后台 (9) - 借助 pushgateway 主动 push 数据\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>之前我们的所有的场景，都是通过 prometheus server 定期去实例(<code>instance</code>)拉取(<code>pull</code>)数据, 但是有以下两种情况会有问题:</p>\n<ol>\n<li>由于子网络或者防火墙的关系， prometheus server 不能直接拉取各个 instance 的指标数据</li>\n<li>监控程序不是在线服务系统，而是批处理作业，批处理作业的特点是它们不会连续运行，这使得抓取它们变得困难。所以 prometheus 如果是定期拉取的话，就会出现 instance 没有运行的情况</li>\n</ol>\n<p>基于以上的情况，所以 prometheus server 提供了另一种让实例(<code>instance</code>) 主动 push 指标数据的能力， 那就是借助另一个程序: Pushgateway 来进行代理， 让其他的程序先把数据抛送到 Pushgateway， 然后再让 prometheus server 定期去 Pushgateway 拉取数据</p>\n<h2 id=\"Pushgateway-使用场景\"><a href=\"#Pushgateway-使用场景\" class=\"headerlink\" title=\"Pushgateway 使用场景\"></a>Pushgateway 使用场景</h2><p>使用 Pushgateway 会有几个问题:</p>\n<ol>\n<li>当通过单个 Pushgateway 监控多个实例时，Pushgateway 会有单点故障的潜在问题</li>\n<li>没有实例的自动健康监控指标 <code>up</code></li>\n<li>只要是通过 Pushgateway 代理推送给 prometheus server 的实例的指标，会一直存在，哪怕这个实例后面不再抛送指标给 Pushgateway，但是 prometheus 依然会保留这个实例的指标 </li>\n</ol>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2022/12/14/prometheus-9-push/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2022/12/14/prometheus-9-push/","retrieved":1734673204735},{"title":"基于 prometheus 打造监控报警后台 (8) - 业务程序自定义添加指标 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2022/12/12/prometheus-8-customize/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2022/12/12/prometheus-8-customize/\" itemprop=\"url\">基于 prometheus 打造监控报警后台 (8) - 业务程序自定义添加指标</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2022-12-12T14:07:56+08:00\">\n                2022-12-12\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/prometheus-相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">prometheus 相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2022/12/12/prometheus-8-customize/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2022/12/12/prometheus-8-customize/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2022/12/12/prometheus-8-customize/\" class=\"leancloud_visitors\" data-flag-title=\"基于 prometheus 打造监控报警后台 (8) - 业务程序自定义添加指标\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>我们都知道 prometheus 是一个监控程序， 并且可以采集指标，但是之前我们的测试都是用的官方的 exporter ，比如 <code>node_exporter</code> 这种监控主机的。</p>\n<p>其实 prometheus 采集的指标一样可以用于我们的自己写的程序, 关于 prometheus 的 客户端的 sdk lib 可以看: <a href=\"https://prometheus.io/docs/instrumenting/clientlibs/\" target=\"_blank\" rel=\"noopener\">prometheus client libraries</a></p>\n<p>里面很多主流语言都有包含，比如 Golang, Python, Java, Node.js, PHP 等，有一些是 prometheus 官方自己维护的，有一些是第三方贡献者写的。</p>\n<p>当然如果你自己使用的语言不在上面，也可以按照 prometheus 标准实现一个该语言的 客户端 sdk 库: <a href=\"https://prometheus.io/docs/instrumenting/writing_clientlibs/\" target=\"_blank\" rel=\"noopener\">编写客户端库的指南</a></p>\n<p>所以本节我们就自己用一个程序来实现 prometheus 的 客户端功能，然后自定义一些抛送的指标。</p>\n<h2 id=\"指标和数据模型\"><a href=\"#指标和数据模型\" class=\"headerlink\" title=\"指标和数据模型\"></a>指标和数据模型</h2><p>在实现 prometheus 的 客户端功能，那么就要了解 prometheus 的指标和数据模型，这一块直接看 <a href=\"/2022/11/28/prometheus-2-metrics/\" title=\"基于 prometheus 打造监控报警后台 (2) - 指标类型和数据模型\">基于 prometheus 打造监控报警后台 (2) - 指标类型和数据模型</a>, 文章已经讲的很详细了。</p>\n<p>我们只需要在我们程序中通过实现这四种类型(<code>Counter</code>, <code>Gauge</code>, <code>Histogram</code>, <code>Summary</code>)之一的指标，那么就是符合 prometheus 客户端的抛送指标了。<br></p>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2022/12/12/prometheus-8-customize/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2022/12/12/prometheus-8-customize/","retrieved":1734673204737},{"title":"基于 prometheus 打造监控报警后台 (7) - grafana 后台创建警报 (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2022/12/07/prometheus-7-grafana-alert/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2022/12/07/prometheus-7-grafana-alert/\" itemprop=\"url\">基于 prometheus 打造监控报警后台 (7) - grafana 后台创建警报</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2022-12-07T14:01:09+08:00\">\n                2022-12-07\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/prometheus-相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">prometheus 相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2022/12/07/prometheus-7-grafana-alert/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2022/12/07/prometheus-7-grafana-alert/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2022/12/07/prometheus-7-grafana-alert/\" class=\"leancloud_visitors\" data-flag-title=\"基于 prometheus 打造监控报警后台 (7) - grafana 后台创建警报\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>之前我们已经尝试了在 prometheus 上创建警报，并且使用 alertmanager 来发送通知了: <a href=\"/2022/11/29/prometheus-4-alertmanager/\" title=\"基于 prometheus 打造监控报警后台 (4) - 使用 alertmanager 发送警报\">基于 prometheus 打造监控报警后台 (4) - 使用 alertmanager 发送警报</a></p>\n<p>但是正常情况下，我们都是在 grafana 后台查看我们所创建的 dashboard 仪表盘。 同时 grafana 后台也可以显示我们在 prometheus 上创建的规则 (包含警报规则和记录规则)</p>\n<blockquote>\n<p>不同版本的 grafana 可能界面会有差，甚至操作也会有区别，本节演示的 grafana 的版本是 <code>v9.2.5 (042e4d216b)</code></p>\n</blockquote>\n<h2 id=\"grafana-显示-prometheus-创建的规则\"><a href=\"#grafana-显示-prometheus-创建的规则\" class=\"headerlink\" title=\"grafana 显示 prometheus 创建的规则\"></a>grafana 显示 prometheus 创建的规则</h2><p>继续延伸上一节的规则配置 (配置了两个 rule 文件，一个是警报规则，一个是记录规则)，当我们查看 grafana 后台的 alerting 的时候，可以看到他也有把我们创建的规则一起显示出来<br></p>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2022/12/07/prometheus-7-grafana-alert/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2022/12/07/prometheus-7-grafana-alert/","retrieved":1734673204739},{"title":"基于 prometheus 打造监控报警后台 (6) - 记录规则(recording rule) (Zach Ke's Notes)","contents":"<link itemprop=\"mainEntityOfPage\" href=\"http://kebingzao.com/2022/12/07/prometheus-6-record-rule/\">\n\n    <span hidden=\"\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"Zach Ke\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.png\">\n    </span>\n\n    <span hidden=\"\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"Zach Ke's Notes\">\n    </span>\n\n    \n      <header class=\"post-header\">\n\n        \n        \n          <h1 class=\"post-title\" itemprop=\"name headline\">\n                \n                <a class=\"post-title-link\" href=\"/2022/12/07/prometheus-6-record-rule/\" itemprop=\"url\">基于 prometheus 打造监控报警后台 (6) - 记录规则(recording rule)</a></h1>\n        \n\n        <div class=\"post-meta\">\n          <span class=\"post-time\">\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">发表于</span>\n              \n              <time title=\"创建于\" itemprop=\"dateCreated datePublished\" datetime=\"2022-12-07T11:08:40+08:00\">\n                2022-12-07\n              </time>\n            \n\n            \n\n            \n          </span>\n\n          \n            <span class=\"post-category\">\n            \n              <span class=\"post-meta-divider\">|</span>\n            \n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n              \n                <span class=\"post-meta-item-text\">分类于</span>\n              \n              \n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/prometheus-相关/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">prometheus 相关</span>\n                  </a>\n                </span>\n\n                \n                \n              \n            </span>\n          \n\n          \n            \n              <span class=\"post-comments-count\">\n                <span class=\"post-meta-divider\">|</span>\n                <span class=\"post-meta-item-icon\">\n                  <i class=\"fa fa-comment-o\"></i>\n                </span>\n                <a href=\"/2022/12/07/prometheus-6-record-rule/#comments\" itemprop=\"discussionUrl\">\n                  <span class=\"post-comments-count disqus-comment-count\" data-disqus-identifier=\"2022/12/07/prometheus-6-record-rule/\" itemprop=\"commentCount\">0 Comments</span>\n                </a>\n              </span>\n            \n          \n\n          \n          \n             <span id=\"/2022/12/07/prometheus-6-record-rule/\" class=\"leancloud_visitors\" data-flag-title=\"基于 prometheus 打造监控报警后台 (6) - 记录规则(recording rule)\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               \n                 <span class=\"post-meta-item-text\">阅读次数:</span>\n               \n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n          \n\n          \n\n          \n\n          \n\n        </div>\n      </header>\n    \n\n    \n    \n    \n    <div class=\"post-body\" itemprop=\"articleBody\">\n\n      \n      \n\n      \n        \n          <h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>通过 <a href=\"/2022/11/29/prometheus-4-alertmanager/\" title=\"基于 prometheus 打造监控报警后台 (4) - 使用 alertmanager 发送警报\">基于 prometheus 打造监控报警后台 (4) - 使用 alertmanager 发送警报</a> 我们知道 prometheus 可以创建 警报规则 来触发警报，然后再把报警信息发送给 alertmanager ，然后 alertmanager 来发送报警通知。</p>\n<p>但是其实 prometheus 还有一种规则，就是 <a href=\"https://prometheus.io/docs/prometheus/latest/configuration/recording_rules/\" target=\"_blank\" rel=\"noopener\">记录规则</a></p>\n<h2 id=\"记录规则-recording-rule\"><a href=\"#记录规则-recording-rule\" class=\"headerlink\" title=\"记录规则(recording rule)\"></a>记录规则(recording rule)</h2><p>记录规则允许您预先计算经常需要或计算量大的表达式，并将其结果保存为一组新的时间序列。查询预先计算的结果通常比每次需要时都执行原始表达式要快得多。这对于每次刷新时都需要重复查询相同表达式的仪表板特别有用。</p>\n<p>也就是每一条记录规则，其实都会作为时间序列存入时序数据库，有点类似于 mysql 的 索引，这些都是有开销，所以也不能无止境的建记录规则，因为会有额外的开销。</p>\n<p>关于记录规则的语法，其实跟警报规则一样，他们的配置差别仅仅在于 <code>rules</code> 小节下的第一个配置的 key 是 record 还是 alert。 其他都一样</p>\n<p>所以语法这一块，之前在讲警报规则的时候，就讲解过了， 可以看之前讲警报规则的文章: <a href=\"/2022/11/29/prometheus-4-alertmanager/\" title=\"基于 prometheus 打造监控报警后台 (4) - 使用 alertmanager 发送警报\">基于 prometheus 打造监控报警后台 (4) - 使用 alertmanager 发送警报</a><br></p>\n          <!--noindex-->\n          <div class=\"post-button text-center\">\n            <a class=\"btn\" href=\"/2022/12/07/prometheus-6-record-rule/#more\" rel=\"contents\">\n              阅读全文 »\n            </a>\n          </div>\n          <!--/noindex-->\n        \n      \n    </div>\n    \n    \n    \n\n    \n\n    \n\n    \n\n    <footer class=\"post-footer\">\n      \n\n      \n\n      \n\n      \n      \n        <div class=\"post-eof\"></div>\n      \n    </footer>","link":"https://kebingzao.com/2022/12/07/prometheus-6-record-rule/","retrieved":1734673204741}]}