<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://akkuman.github.io/feed-me-up/all.xml</id>
    <title>Combined feed</title>
    <updated>2025-05-10T05:40:47.903Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <entry>
        <title type="html"><![CDATA[ColorOS 15（Android 15）及以上系统屏幕常亮的adb shell命令 (大侠阿木博客)]]></title>
        <id>https://www.daxiaamu.com/8585/</id>
        <link href="https://www.daxiaamu.com/8585/"/>
        <updated>2025-05-10T05:40:41.586Z</updated>
        <content type="html"><![CDATA[<div class="mdui-card-actions">
        <a href="https://www.daxiaamu.com/8585/" class="mdui-text-color-theme ainList"><h1>ColorOS 15（Android 15）及以上系统屏幕常亮的adb shell命令</h1></a>
        <p class="ct1-p mdui-text-color-black cont2">前几年经常会遇到需要屏幕保持常亮的情况，但是play市场下载了一大堆应用，都没用。我以为是ColorOS相较原生系统差距较大导致的，所以也就放弃了，但是没想到近期发现了一个方法可以真正实现屏幕常亮。 保持屏幕常亮不锁定方法 电脑上用adb执行 adb shell settings pu…</p>        <div class="mdui-divider underline"></div>
                <span class="info">&nbsp;&nbsp;
            <i class="mdui-icon material-icons info-icon"></i> 138&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i> 2025-05-09&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i>         </span>
        <a class="mdui-btn mdui-ripple mdui-ripple-white coun-read mdui-text-color-theme-accent" href="https://www.daxiaamu.com/8585/">阅读全文</a>
    </div>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[一加13T OnePlus PKX110一键ROOT教程|Magisk|Kitsune|Alpha面具|Apatch|KernelSU|KernelSU-Next (大侠阿木博客)]]></title>
        <id>https://www.daxiaamu.com/8573/</id>
        <link href="https://www.daxiaamu.com/8573/"/>
        <updated>2025-05-10T05:40:41.586Z</updated>
        <content type="html"><![CDATA[<div class="mdui-card-actions">
        <a href="https://www.daxiaamu.com/8573/" class="mdui-text-color-theme ainList"><h1>一加13T OnePlus PKX110一键ROOT教程|Magisk|Kitsune|Alpha面具|Apatch|KernelSU|KernelSU-Next</h1></a>
        <p class="ct1-p mdui-text-color-black cont2">大家好，我是一加全能工具箱的作者大侠阿木。每逢有新机出来，大家都会催促我更新工具箱来支持一键ROOT。 但实际上，基于优化的设计和CS架构，工具箱已经实现通刷，无需专门适配。 但是，架不住大家不知道，老有人问，所以还是弄个帖子在这里，方便大家搜索过来。 实际…</p>        <div class="mdui-divider underline"></div>
                <span class="info">&nbsp;&nbsp;
            <i class="mdui-icon material-icons info-icon"></i> 2,432&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i> 2025-04-28&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i>         </span>
        <a class="mdui-btn mdui-ripple mdui-ripple-white coun-read mdui-text-color-theme-accent" href="https://www.daxiaamu.com/8573/">阅读全文</a>
    </div>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[一加7 Pro 5G Sprint版（GM1925）刷原生ROM（YAAP）教程 (大侠阿木博客)]]></title>
        <id>https://www.daxiaamu.com/8554/</id>
        <link href="https://www.daxiaamu.com/8554/"/>
        <updated>2025-05-10T05:40:41.587Z</updated>
        <content type="html"><![CDATA[<div class="mdui-card-actions">
        <a href="https://www.daxiaamu.com/8554/" class="mdui-text-color-theme ainList"><h1>一加7 Pro 5G Sprint版（GM1925）刷原生ROM（YAAP）教程</h1></a>
        <p class="ct1-p mdui-text-color-black cont2">这台机子比较难搞，在我手头好几年了，第一次给它刷上原生系统，特此记录一下。 这台机子折腾过程 之前有文章研究过这台设备《一加7 Pro 5G GM1925 增量升级失败，手动安装全量包教程》。 这台机子本身到手时是网络锁已经解锁的。写上面文章时搞定了救砖、转国际版、解…</p>        <div class="mdui-divider underline"></div>
                <span class="info">&nbsp;&nbsp;
            <i class="mdui-icon material-icons info-icon"></i> 2,400&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i> 2025-04-14&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i>         </span>
        <a class="mdui-btn mdui-ripple mdui-ripple-white coun-read mdui-text-color-theme-accent" href="https://www.daxiaamu.com/8554/">阅读全文</a>
    </div>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[全球首发 | 一加12 ColorOS/氧OS互刷懒人包（TWRP卡刷方案） (大侠阿木博客)]]></title>
        <id>https://www.daxiaamu.com/8547/</id>
        <link href="https://www.daxiaamu.com/8547/"/>
        <updated>2025-05-10T05:40:41.588Z</updated>
        <content type="html"><![CDATA[<div class="mdui-card-actions">
        <a href="https://www.daxiaamu.com/8547/" class="mdui-text-color-theme ainList"><h1>全球首发 | 一加12 ColorOS/氧OS互刷懒人包（TWRP卡刷方案）</h1></a>
        <p class="ct1-p mdui-text-color-black cont2">之前做了一加11的ColorOS和氧OS的完美互刷懒人包，大家反馈都不错，希望做其他型号的。我手头恰有有一加12，但是一加12的原理有所不同，好在经过一段时间的开发和测试也终于完成了。 方案优势 人人都熟悉的TWRP卡刷操作，避免内心恐惧 安全可靠的TWRP卡刷方案，完全不…</p>        <div class="mdui-divider underline"></div>
                <span class="info">&nbsp;&nbsp;
            <i class="mdui-icon material-icons info-icon"></i> 3,605&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i> 2025-04-12&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i>         </span>
        <a class="mdui-btn mdui-ripple mdui-ripple-white coun-read mdui-text-color-theme-accent" href="https://www.daxiaamu.com/8547/">阅读全文</a>
    </div>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[一加8 / 8 Pro ColorOS 14（Android 14）移植版 (大侠阿木博客)]]></title>
        <id>https://www.daxiaamu.com/8531/</id>
        <link href="https://www.daxiaamu.com/8531/"/>
        <updated>2025-05-10T05:40:41.588Z</updated>
        <content type="html"><![CDATA[<div class="mdui-card-actions">
        <a href="https://www.daxiaamu.com/8531/" class="mdui-text-color-theme ainList"><h1>一加8 / 8 Pro ColorOS 14（Android 14）移植版</h1></a>
        <p class="ct1-p mdui-text-color-black cont2">说明 一加官方为一加8/8 Pro只提供到最高ColorOS 13.1，基于Android 13的升级。不过现在有人移植了ColorOS14，相比ColorOS 15更加稳定一些 安装教程 fastboot boot (orangefox V20).img In Orangefox recovery&gt;&gt;format data Then go to adb sideload and r…</p>        <div class="mdui-divider underline"></div>
                <span class="info">&nbsp;&nbsp;
            <i class="mdui-icon material-icons info-icon"></i> 1,563&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i> 2025-04-10&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i>         </span>
        <a class="mdui-btn mdui-ripple mdui-ripple-white coun-read mdui-text-color-theme-accent" href="https://www.daxiaamu.com/8531/">阅读全文</a>
    </div>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[一加8 / 8 Pro ColorOS 15.0.0.701（Android 15）移植版 (大侠阿木博客)]]></title>
        <id>https://www.daxiaamu.com/8512/</id>
        <link href="https://www.daxiaamu.com/8512/"/>
        <updated>2025-05-10T05:40:41.590Z</updated>
        <content type="html"><![CDATA[<div class="mdui-card-actions">
        <a href="https://www.daxiaamu.com/8512/" class="mdui-text-color-theme ainList"><h1>一加8 / 8 Pro ColorOS 15.0.0.701（Android 15）移植版</h1></a>
        <p class="ct1-p mdui-text-color-black cont2">说明 一加官方为一加8/8 Pro只提供到最高ColorOS 13.1，基于Android 13的升级。没有办法体会到ColorOS 15的丝滑感受和AI功能。不过现在有网友为一加8 Pro移植了ColorOS 15的系统。 安装教程 fastboot boot (orangefox V20).img In Orangefox recovery&gt;&gt;forma…</p>        <div class="mdui-divider underline"></div>
                <span class="info">&nbsp;&nbsp;
            <i class="mdui-icon material-icons info-icon"></i> 2,872&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i> 2025-04-06&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i>         </span>
        <a class="mdui-btn mdui-ripple mdui-ripple-white coun-read mdui-text-color-theme-accent" href="https://www.daxiaamu.com/8512/">阅读全文</a>
    </div>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[一加手机刷氧OS后，如何安装ColorOS的拨号程序 (大侠阿木博客)]]></title>
        <id>https://www.daxiaamu.com/8498/</id>
        <link href="https://www.daxiaamu.com/8498/"/>
        <updated>2025-05-10T05:40:41.592Z</updated>
        <content type="html"><![CDATA[<div class="mdui-card-actions">
        <a href="https://www.daxiaamu.com/8498/" class="mdui-text-color-theme ainList"><h1>一加手机刷氧OS后，如何安装ColorOS的拨号程序</h1></a>
        <p class="ct1-p mdui-text-color-black cont2">众所周知，氧OS自带的拨号是Google的原生拨号，并不好用，如何安装回大家熟悉的ColorOS拨号呢？ 氧OS安装ColorOS拨号教程 手机上安装apkmirror installer程序： 可以直接从play市场搜索【apkmirror installer】 可以点击跳转play市场下载：https://play.google.com/…</p>        <div class="mdui-divider underline"></div>
                <span class="info">&nbsp;&nbsp;
            <i class="mdui-icon material-icons info-icon"></i> 2,547&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i> 2025-03-25&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i>         </span>
        <a class="mdui-btn mdui-ripple mdui-ripple-white coun-read mdui-text-color-theme-accent" href="https://www.daxiaamu.com/8498/">阅读全文</a>
    </div>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[全球首发 | 一加11 ColorOS/氧OS互刷懒人包（TWRP卡刷方案） (大侠阿木博客)]]></title>
        <id>https://www.daxiaamu.com/8481/</id>
        <link href="https://www.daxiaamu.com/8481/"/>
        <updated>2025-05-10T05:40:41.593Z</updated>
        <content type="html"><![CDATA[<div class="mdui-card-actions">
        <a href="https://www.daxiaamu.com/8481/" class="mdui-text-color-theme ainList"><h1>全球首发 | 一加11 ColorOS/氧OS互刷懒人包（TWRP卡刷方案）</h1></a>
        <p class="ct1-p mdui-text-color-black cont2">从前 一加11从ColorOS刷到氧OS较为繁琐，需要通过fastboot线刷，并且存在诸多缺陷，比如容易变砖、容易丢失信号、容易导致升级到14、15后无法进入fastboot等。 而要刷原生系统的话，氧OS又几乎是必须先刷的，因此这成为了拦截很多人体验原生系统的门槛。 现在 最近又重…</p>        <div class="mdui-divider underline"></div>
                <span class="info">&nbsp;&nbsp;
            <i class="mdui-icon material-icons info-icon"></i> 4,809&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i> 2025-03-22&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i>         </span>
        <a class="mdui-btn mdui-ripple mdui-ripple-white coun-read mdui-text-color-theme-accent" href="https://www.daxiaamu.com/8481/">阅读全文</a>
    </div>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[使用4倍热缩管修复一加破损数据线 (大侠阿木博客)]]></title>
        <id>https://www.daxiaamu.com/8473/</id>
        <link href="https://www.daxiaamu.com/8473/"/>
        <updated>2025-05-10T05:40:41.595Z</updated>
        <content type="html"><![CDATA[<div class="mdui-card-media mdui-color-theme">
                <a href="https://www.daxiaamu.com/8473/">
                        <img src="data:image/gif;base64,R0lGODlhAgABAIAAALGxsQAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==" data-src="https://www.daxiaamu.com/wp-content/uploads/2025/03/IMG20250318001350-scaled.jpg" alt="https://www.daxiaamu.com/wp-content/uploads/2025/03/IMG20250318001350-scaled.jpg" title="使用4倍热缩管修复一加破损数据线" class="LazyLoadList mdui-color-theme mdui-text-color-theme lazyload">
                <div class="mdui-card-media-covered ct1">
            <div class="mdui-card-primary">
            <div class="mdui-card-primary-title">使用4倍热缩管修复一加破损数据线</div>                <div class="mdui-card-primary-subtitle">众所周知，一加的红皮数据线寿命不算特别耐久，经常在略微严苛的环境下使用的话，就极其容易老化破皮。屏蔽层容易裸露在外，可…</div>            </div>
        </div>
                </a>
            </div>
    <div class="mdui-card-actions">
                <span class="info">&nbsp;&nbsp;
            <i class="mdui-icon material-icons info-icon"></i> 2,011&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i> 2025-03-19&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i>         </span>
        <a class="mdui-btn mdui-ripple mdui-ripple-white coun-read mdui-text-color-theme-accent" href="https://www.daxiaamu.com/8473/">阅读全文</a>
    </div>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[FDM类型3D打印中，翘边的原因分析、翘边的预防与消除（迄今为止最全面的理论和实践资料） (大侠阿木博客)]]></title>
        <id>https://www.daxiaamu.com/8430/</id>
        <link href="https://www.daxiaamu.com/8430/"/>
        <updated>2025-05-10T05:40:41.596Z</updated>
        <content type="html"><![CDATA[<div class="mdui-card-actions">
        <a href="https://www.daxiaamu.com/8430/" class="mdui-text-color-theme ainList"><h1>FDM类型3D打印中，翘边的原因分析、翘边的预防与消除（迄今为止最全面的理论和实践资料）</h1></a>
        <p class="ct1-p mdui-text-color-black cont2">各位好，看到网络上关于翘边预防技巧的内容很多，但是不够深入，也不够全面，关键的是，根本解决不了我日常遇到的翘边问题，因此我对其进行了深入的研究。本篇文章是截至目前最为全面的翘边研究的文章。由于笔者闲暇时间不多，无暇制作视频，因此还是决定在我博客以图…</p>        <div class="mdui-divider underline"></div>
                <span class="info">&nbsp;&nbsp;
            <i class="mdui-icon material-icons info-icon"></i> 2,652&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i> 2025-02-28&nbsp;&nbsp;            <i class="mdui-icon material-icons info-icon"></i>         </span>
        <a class="mdui-btn mdui-ripple mdui-ripple-white coun-read mdui-text-color-theme-accent" href="https://www.daxiaamu.com/8430/">阅读全文</a>
    </div>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Write, debug and execute BOFs using bof-launcher (part 2) (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2025/01/15/write-debug-and-execute-bofs-part2.html</id>
        <link href="https://blog.z-labs.eu/2025/01/15/write-debug-and-execute-bofs-part2.html"/>
        <updated>2025-05-10T05:40:43.940Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Jan 15, 2025</span> <a class="post-link" href="/2025/01/15/write-debug-and-execute-bofs-part2.html">Write, debug and execute BOFs using bof-launcher (part 2)</a><p>In <a href="https://blog.z-labs.eu/2024/12/02/write-debug-and-execute-bofs-part1.html">part 1</a> we have showed how to build <a href="https://github.com/The-Z-Labs/bof-launcher">bof-launcher project</a> and how to write/debug very simple BOF.</p>
<span class="post-tags">Tags: <a href="/tags/toolbox.html">toolbox</a>,&nbsp;<a href="/tags/adversarial-attack-simulation.html">adversarial-attack-simulation</a>,&nbsp;<a href="/tags/bof-launcher.html">bof-launcher</a>,&nbsp;<a href="/tags/BOF.html">BOF</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[cli4bofs v0.9.0 Release Notes (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2024/12/27/cli4bofs-0-9-0-release-notes.html</id>
        <link href="https://blog.z-labs.eu/2024/12/27/cli4bofs-0-9-0-release-notes.html"/>
        <updated>2025-05-10T05:40:43.940Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Dec 27, 2024</span> <a class="post-link" href="/2024/12/27/cli4bofs-0-9-0-release-notes.html">cli4bofs v0.9.0 Release Notes</a><p><a href="https://github.com/The-Z-Labs/cli4bofs/releases/tag/v0.9.0">Download</a></p>
<span class="post-tags">Tags: <a href="/tags/toolbox.html">toolbox</a>,&nbsp;<a href="/tags/adversarial-attack-simulation.html">adversarial-attack-simulation</a>,&nbsp;<a href="/tags/bof-launcher.html">bof-launcher</a>,&nbsp;<a href="/tags/BOF.html">BOF</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Write, debug and execute BOFs using bof-launcher (part 1) (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2024/12/02/write-debug-and-execute-bofs-part1.html</id>
        <link href="https://blog.z-labs.eu/2024/12/02/write-debug-and-execute-bofs-part1.html"/>
        <updated>2025-05-10T05:40:43.941Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Dec 2, 2024</span> <a class="post-link" href="/2024/12/02/write-debug-and-execute-bofs-part1.html">Write, debug and execute BOFs using bof-launcher (part 1)</a><p>Our <a href="https://github.com/The-Z-Labs/bof-launcher">bof-launcher project</a> allows you to write, build, debug and execute BOFs using
Zig, C and/or assembly language on Windows (x86/x64) and Linux (x86/x64/ARM/AARCH64).</p>
<span class="post-tags">Tags: <a href="/tags/toolbox.html">toolbox</a>,&nbsp;<a href="/tags/adversarial-attack-simulation.html">adversarial-attack-simulation</a>,&nbsp;<a href="/tags/bof-launcher.html">bof-launcher</a>,&nbsp;<a href="/tags/BOF.html">BOF</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[[PL] TIBER-EU i DORA szansą na budowanie realnej cyberodporności w sektorze finansowym (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2024/05/13/tiber-eu-dora-cyberodpornosc.html</id>
        <link href="https://blog.z-labs.eu/2024/05/13/tiber-eu-dora-cyberodpornosc.html"/>
        <updated>2025-05-10T05:40:43.941Z</updated>
        <content type="html"><![CDATA[<span class="post-date">May 13, 2024</span> <a class="post-link" href="/2024/05/13/tiber-eu-dora-cyberodpornosc.html">[PL] TIBER-EU i DORA szansą na budowanie realnej cyberodporności w sektorze finansowym</a><p>Prawodawstwo unijne w ostatnich latach jest coraz bardziej aktywne w kwestiach związanych z szeroko pojętym cyberbezpieczeństwem. Komisja Europejska bez wątpienia dostrzega problematykę braku odpowiedniego ogólnego poziomu cyberbezpieczeństwa w państwach członkowskich i aktywnie działa na rzecz poprawy sytuacji. Wystarczy wspomnieć tu o <a href="https://digital-strategy.ec.europa.eu/en/policies/cybersecurity-act">The EU Cybersecurity Act</a>, czy od dawna już obowiązującą dyrektywę NIS (ang. Directive on Security of Network and Information Systems), która weszła w życie w 2016 roku, a na grunt krajowego porządku prawnego została wprowadzona jako <a href="https://www.gov.pl/web/cyfryzacja/krajowy-system-cyberbezpieczenstwa-">Krajowy System Cyberbezpieczeństwa (KSC)</a> w 2018 roku. W tym roku czeka nas również aktualizacja KSC o unijną dyrektywę NIS 2. Odpowiedni projekt ustawy <a href="https://www.gov.pl/web/cyfryzacja/walka-z-cyberzagrozeniami-wchodzi-w-nowy-wymiar">trafił ostatnio do konsultacji publicznych</a>.</p>
<span class="post-tags">Tags: <a href="/tags/TIBER-EU.html">TIBER-EU</a>,&nbsp;<a href="/tags/adversarial-attack-simulation.html">adversarial-attack-simulation</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Executing Cobalt Strike's BOFs on ARM-based Linux devices (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2024/05/10/bofs-on-arm-based-devices.html</id>
        <link href="https://blog.z-labs.eu/2024/05/10/bofs-on-arm-based-devices.html"/>
        <updated>2025-05-10T05:40:43.943Z</updated>
        <content type="html"><![CDATA[<span class="post-date">May 10, 2024</span> <a class="post-link" href="/2024/05/10/bofs-on-arm-based-devices.html">Executing Cobalt Strike's BOFs on ARM-based Linux devices</a><p>We designed and implemented <a href="https://github.com/The-Z-Labs/bof-launcher">bof-launcher</a> with a portability in mind so running BOFs on Linux ARM-based devices is a snap. Below, we’re running our <code class="language-plaintext highlighter-rouge">uname</code> BOF on Raspberry Pi device. For convenience we use our <a href="https://github.com/The-Z-Labs/cli4bofs">cli4bofs</a> tool to execute BOF directly from command line. So let’s jump to our device:</p>
<span class="post-tags">Tags: <a href="/tags/toolbox.html">toolbox</a>,&nbsp;<a href="/tags/adversarial-attack-simulation.html">adversarial-attack-simulation</a>,&nbsp;<a href="/tags/bof-launcher.html">bof-launcher</a>,&nbsp;<a href="/tags/BOF.html">BOF</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Running BOFs with our 'bof-launcher' library (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2024/02/08/bof-launcher.html</id>
        <link href="https://blog.z-labs.eu/2024/02/08/bof-launcher.html"/>
        <updated>2025-05-10T05:40:43.944Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Feb 8, 2024</span> <a class="post-link" href="/2024/02/08/bof-launcher.html">Running BOFs with our 'bof-launcher' library</a><p>During last months we were busy working on our <a href="https://github.com/The-Z-Labs/bof-launcher">bof-launcher project</a>. In essence it is an open-source library for loading, relocating and launching <a href="https://hstechdocs.helpsystems.com/manuals/cobaltstrike/current/userguide/content/topics/beacon-object-files_main.htm">Cobalt Strike’s BOFs</a> on Windows and UNIX/Linux systems. But it also contains other very interesting features and capabilities that are worth discussing.</p>
<span class="post-tags">Tags: <a href="/tags/toolbox.html">toolbox</a>,&nbsp;<a href="/tags/adversarial-attack-simulation.html">adversarial-attack-simulation</a>,&nbsp;<a href="/tags/bof-launcher.html">bof-launcher</a>,&nbsp;<a href="/tags/BOF.html">BOF</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Burp Suite Pro real-life tips & tricks: Other useful resources (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2023/09/08/burp-tipsTricks2023.html</id>
        <link href="https://blog.z-labs.eu/2023/09/08/burp-tipsTricks2023.html"/>
        <updated>2025-05-10T05:40:43.946Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Sep 8, 2023</span> <a class="post-link" href="/2023/09/08/burp-tipsTricks2023.html">Burp Suite Pro real-life tips &amp; tricks: Other useful resources</a><p>Additional references to materials about the Burp Suite Pro tool and its usage:</p>
<span class="post-tags">Tags: <a href="/tags/toolbox.html">toolbox</a>,&nbsp;<a href="/tags/web-security-testing.html">web-security-testing</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Endpoint defense evasion with custom built binaries (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2022/08/25/endpoint-security-evasion-with-custom-built-binaries.html</id>
        <link href="https://blog.z-labs.eu/2022/08/25/endpoint-security-evasion-with-custom-built-binaries.html"/>
        <updated>2025-05-10T05:40:43.947Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Aug 25, 2022</span> <a class="post-link" href="/2022/08/25/endpoint-security-evasion-with-custom-built-binaries.html">Endpoint defense evasion with custom built binaries</a><p>It’s already a <a href="https://www.ired.team/offensive-security/defense-evasion/av-bypass-with-metasploit-templates">common knowledge</a> that merely rebuilding binaries could be a good way to attempt to bypass many AV solutions. Here’s a good illustration of exactly that case from our recent penetration testing engagement. Here’s the scenario:</p>
<span class="post-tags">Tags: <a href="/tags/toolbox.html">toolbox</a>,&nbsp;<a href="/tags/adversarial-attack-simulation.html">adversarial-attack-simulation</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Burp Suite Pro real-life tips & tricks: Authentication engine for command-line tools (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2022/01/12/burp-suite-pro-authn-for-cli-tools.html</id>
        <link href="https://blog.z-labs.eu/2022/01/12/burp-suite-pro-authn-for-cli-tools.html"/>
        <updated>2025-05-10T05:40:43.952Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Jan 12, 2022</span> <a class="post-link" href="/2022/01/12/burp-suite-pro-authn-for-cli-tools.html">Burp Suite Pro real-life tips &amp; tricks: Authentication engine for command-line tools</a><p>Below is a nice Burp trickery I’ve learnt from <a href="https://www.ryanwendel.com/2019/09/27/application-enumeration-tips-using-aquatone-and-burp-suite/">Ryan</a> and extended it also for apps that are using token-based session handling.</p>
<span class="post-tags">Tags: <a href="/tags/toolbox.html">toolbox</a>,&nbsp;<a href="/tags/burp.html">burp</a>,&nbsp;<a href="/tags/web-security-testing.html">web-security-testing</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Broken UDP scanning in Nmap v7.91 (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2021/10/08/broken-udp-scanning-in-nmap-7-91.html</id>
        <link href="https://blog.z-labs.eu/2021/10/08/broken-udp-scanning-in-nmap-7-91.html"/>
        <updated>2025-05-10T05:40:43.953Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Oct 8, 2021</span> <a class="post-link" href="/2021/10/08/broken-udp-scanning-in-nmap-7-91.html">Broken UDP scanning in Nmap v7.91</a><p>As in most penetration testing/red teaming companies we at Z-Labs use Nmap security scanner tool quite extensively. During one of our network penetration testing engagements we have noticed that UDP scanning (<code class="language-plaintext highlighter-rouge">-sU</code>) functionality misbehaves and does not correctly detect opened UDP ports. Soon after that we identified in Nmap (versions: <code class="language-plaintext highlighter-rouge">7.91</code> and <code class="language-plaintext highlighter-rouge">7.90</code>) subtle implementation issue that resulted in corrupted UDP packets sent during a scan.</p>
<span class="post-tags">Tags: <a href="/tags/toolbox.html">toolbox</a>,&nbsp;<a href="/tags/network-security.html">network-security</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mobile apps penetration testing 2020 (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2020/03/29/mobile-security-testing-ref.html</id>
        <link href="https://blog.z-labs.eu/2020/03/29/mobile-security-testing-ref.html"/>
        <updated>2025-05-10T05:40:43.954Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Mar 29, 2020</span> <a class="post-link" href="/2020/03/29/mobile-security-testing-ref.html">Mobile apps penetration testing 2020</a><p>There are already great resources about mobile app security testing out there. So here I’m mostly just keep track of resources/approaches that worked for me (with additional comments), to have it in one place for the sake of future reference.</p>
<span class="post-tags">Tags: <a href="/tags/notes.html">notes</a>,&nbsp;<a href="/tags/mobile-security.html">mobile-security</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Burp Suite Pro real-life tips & tricks: Looking for hidden attack surface and leaked secrets (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2019/09/12/burp-suite-pro-API-endpoints-discovery.html</id>
        <link href="https://blog.z-labs.eu/2019/09/12/burp-suite-pro-API-endpoints-discovery.html"/>
        <updated>2025-05-10T05:40:43.955Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Sep 12, 2019</span> <a class="post-link" href="/2019/09/12/burp-suite-pro-API-endpoints-discovery.html">Burp Suite Pro real-life tips &amp; tricks: Looking for hidden attack surface and leaked secrets</a><p>Burp has some nice export features which (combined with some 3rd party tools) can greatly aid in the process of looking for additional/hidden endpoints and/or hardcoded secrets.</p>
<span class="post-tags">Tags: <a href="/tags/toolbox.html">toolbox</a>,&nbsp;<a href="/tags/web-security.html">web-security</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Burp Suite Pro real-life tips & tricks: Persistent Access to Collaborator (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2019/09/09/burp-suite-pro-rltandt-collaborator-presistence.html</id>
        <link href="https://blog.z-labs.eu/2019/09/09/burp-suite-pro-rltandt-collaborator-presistence.html"/>
        <updated>2025-05-10T05:40:43.957Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Sep 9, 2019</span> <a class="post-link" href="/2019/09/09/burp-suite-pro-rltandt-collaborator-presistence.html">Burp Suite Pro real-life tips &amp; tricks: Persistent Access to Collaborator</a><p>It was already discussed <a href="https://0x00sec.org/t/achieving-persistent-access-to-burp-collaborator-sessions/14311">here</a>. Putting here for quick reference.</p>
<span class="post-tags">Tags: <a href="/tags/toolbox.html">toolbox</a>,&nbsp;<a href="/tags/web-security.html">web-security</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Burp Suite Pro real-life tips & tricks: Authorization testing (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2019/07/21/burp-suite-pro-rltandt-authorization-testing.html</id>
        <link href="https://blog.z-labs.eu/2019/07/21/burp-suite-pro-rltandt-authorization-testing.html"/>
        <updated>2025-05-10T05:40:43.958Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Jul 21, 2019</span> <a class="post-link" href="/2019/07/21/burp-suite-pro-rltandt-authorization-testing.html">Burp Suite Pro real-life tips &amp; tricks: Authorization testing</a><p>In the past, I found (already quite old - presented in 2013) slide deck <a href="https://www.agarri.fr/docs/HiP2k13-Burp_Pro_Tips_and_Tricks.pdf">Burp Suite Pro real-life tips &amp; tricks</a> authored by <a href="https://www.agarri.fr/en/index.html">Nicolas Grégoire</a> very useful which gave me motivation to constantly look for effciencies in my day to day Burp Suite Pro usage. Since that time Burp has significantly evolved (major milestone - version 2.x was released) and lots of interesting 3rd party extensions were developed.</p>
<span class="post-tags">Tags: <a href="/tags/toolbox.html">toolbox</a>,&nbsp;<a href="/tags/web-security.html">web-security</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[LES: Linux privilege escalation auditing tool (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2019/05/10/les-paper.html</id>
        <link href="https://blog.z-labs.eu/2019/05/10/les-paper.html"/>
        <updated>2025-05-10T05:40:43.959Z</updated>
        <content type="html"><![CDATA[<span class="post-date">May 10, 2019</span> <a class="post-link" href="/2019/05/10/les-paper.html">LES: Linux privilege escalation auditing tool</a><p><a href="https://github.com/mzet-/linux-exploit-suggester">LES</a> security tool, developed and maintained by <a href="https://z-labs.eu">Z-Labs</a> is the next generation version of the tool designed to <em>assist</em> the security tester/analyst in looking for critically vulnerable (i.e. locally exploitable) Linux machines during manual red tem/pentest engagement. In this post I will describe how the tool works and how to use it effectively.</p>
<span class="post-tags">Tags: <a href="/tags/privilege-escalation.html">privilege-escalation</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Autumn hiking in Owl Mountains (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2013/11/18/owl-mountains-hiking.html</id>
        <link href="https://blog.z-labs.eu/2013/11/18/owl-mountains-hiking.html"/>
        <updated>2025-05-10T05:40:43.961Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Nov 18, 2013</span> <a class="post-link" href="/2013/11/18/owl-mountains-hiking.html">Autumn hiking in Owl Mountains</a><p>We climbed three additional peaks from <a href="https://en.wikipedia.org/wiki/Crown_of_Polish_Mountains">Crown of Polish Mountains</a> during recent hiking in <a href="https://en.wikipedia.org/wiki/Owl_Mountains">Owl Mountains</a> and near areas.</p>
<span class="post-tags">Tags: <a href="/tags/off-topic.html">off-topic</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hiking in Dolomites (Z - Labs Blog)]]></title>
        <id>https://blog.z-labs.eu/2013/09/12/hiking-in-dolomites.html</id>
        <link href="https://blog.z-labs.eu/2013/09/12/hiking-in-dolomites.html"/>
        <updated>2025-05-10T05:40:43.962Z</updated>
        <content type="html"><![CDATA[<span class="post-date">Sep 12, 2013</span> <a class="post-link" href="/2013/09/12/hiking-in-dolomites.html">Hiking in Dolomites</a><p>Some photos from this year’s hiking in <a href="https://en.wikipedia.org/wiki/Dolomites">Dolomites</a>:</p>
<span class="post-tags">Tags: <a href="/tags/off-topic.html">off-topic</a></span>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[浅谈 - 数据库开发规范 & 最佳实践 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2024/04/30/db-best-practices/</id>
        <link href="https://kebingzao.com/2024/04/30/db-best-practices/"/>
        <updated>2025-05-10T05:40:46.680Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2024/04/30/db-best-practices/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/04/30/db-best-practices/" itemprop="url">浅谈 - 数据库开发规范 &amp; 最佳实践</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-04-30T14:53:46+08:00">
                2024-04-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/服务浅谈系列/" itemprop="url" rel="index">
                    <span itemprop="name">服务浅谈系列</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2024/04/30/db-best-practices/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2024/04/30/db-best-practices/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2024/04/30/db-best-practices/" class="leancloud_visitors" data-flag-title="浅谈 - 数据库开发规范 &amp; 最佳实践">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>说是最佳实践，其实这只是数据库开发的基础规范，事实上在很多团队的实践上，还是会根据具体的团队开发而有些调整或者优化。</p>
<p>但是因为大部分都是比较基础的数据库开发规范，所以要先知其然，再知其所以然。因此这一份用来打基础还算可以。</p>
<blockquote>
<p>因为我们的项目实践大部分都是 Mysql， 因此里面有很多是 Mysql 相关的，不过都是大同小异</p>
</blockquote>
<h2 id="1-命名规范"><a href="#1-命名规范" class="headerlink" title="1. 命名规范"></a>1. 命名规范</h2><h3 id="1-1-命名总规则"><a href="#1-1-命名总规则" class="headerlink" title="1.1. 命名总规则"></a>1.1. 命名总规则</h3><ol>
<li>所有名称的字符范围为：<code>A-Z,a-z,0-9和_(下划线)</code>。不允许使用其他字符作为名称。</li>
<li>采用英文单词或英文短语（包括缩写）作为名称，不能使用无意义的字符或汉语拼音。</li>
<li>名称应该清晰明了，能够准确表达事物的含义，最好可读，遵循“见名知义”的原则。</li>
<li>命名不得超过30个字符的系统限制。</li>
<li>所有数据库设计要写成文档</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2024/04/30/db-best-practices/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[prometheus + grafana 实战篇(4) - 使用计划任务主动抛送到 pushgateway (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2024/02/22/prometheus-best-practices-4-cron-pushgateway/</id>
        <link href="https://kebingzao.com/2024/02/22/prometheus-best-practices-4-cron-pushgateway/"/>
        <updated>2025-05-10T05:40:46.681Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2024/02/22/prometheus-best-practices-4-cron-pushgateway/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/02/22/prometheus-best-practices-4-cron-pushgateway/" itemprop="url">prometheus + grafana 实战篇(4) - 使用计划任务主动抛送到 pushgateway</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-22T17:31:08+08:00">
                2024-02-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/prometheus-相关/" itemprop="url" rel="index">
                    <span itemprop="name">prometheus 相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2024/02/22/prometheus-best-practices-4-cron-pushgateway/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2024/02/22/prometheus-best-practices-4-cron-pushgateway/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2024/02/22/prometheus-best-practices-4-cron-pushgateway/" class="leancloud_visitors" data-flag-title="prometheus + grafana 实战篇(4) - 使用计划任务主动抛送到 pushgateway">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前讲过的两种方式:</p>
<ul>
<li><a href="/2022/12/30/prometheus-best-practices-2-nginx/" title="prometheus + grafana 实战篇(2) - nginx">prometheus + grafana 实战篇(2) - nginx</a></li>
<li><a href="/2024/02/19/prometheus-best-practices-3-mtail/" title="prometheus + grafana 实战篇(3) - 使用 mtail 采集程序日志">prometheus + grafana 实战篇(3) - 使用 mtail 采集程序日志</a>
</li>
</ul>
<p>其实已经可以很好的覆盖了生产环境中产生的临时故障情况，并有助于分析流量和错误情况。 但是仅仅这样子还不够。要做到更全面的预警可观测。除了要第一时间处理生产环境中当前产生的错误信息之外。</p>
<p>还需要对业务数据的表现情况也要造成可观测，比如常见的:</p>
<ol>
<li>登录情况，10 分钟成功率预警， 一小时成功率预警，每天成功率预警</li>
<li>支付情况，10 分钟支付成功率和数量，每天支付总数</li>
<li>核心功能的使用情况监控，比如用于短信验证码的成功率，Google验证码的成功率，两步验证的成功率，远程连接的成功率，用户核心模块的使用成功率等等</li>
</ol>
<p>这些业务数据，一般服务端都会将使用记录写入数据库，后面再用相关平台来进行预警，比如 cacti，zabbix 等运维平台就是通过写 python 脚本去定时查下数据库对应的数据然后来建立预警值。比如之前常用的在 zabbix 写的预警脚本就是<br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2024/02/22/prometheus-best-practices-4-cron-pushgateway/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[prometheus + grafana 实战篇(3) - 使用 mtail 采集程序日志 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2024/02/19/prometheus-best-practices-3-mtail/</id>
        <link href="https://kebingzao.com/2024/02/19/prometheus-best-practices-3-mtail/"/>
        <updated>2025-05-10T05:40:46.686Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2024/02/19/prometheus-best-practices-3-mtail/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/02/19/prometheus-best-practices-3-mtail/" itemprop="url">prometheus + grafana 实战篇(3) - 使用 mtail 采集程序日志</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-19T15:08:59+08:00">
                2024-02-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/prometheus-相关/" itemprop="url" rel="index">
                    <span itemprop="name">prometheus 相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2024/02/19/prometheus-best-practices-3-mtail/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2024/02/19/prometheus-best-practices-3-mtail/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2024/02/19/prometheus-best-practices-3-mtail/" class="leancloud_visitors" data-flag-title="prometheus + grafana 实战篇(3) - 使用 mtail 采集程序日志">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>上一节我们已经可以通过采集 nginx 的 access log 来得到程序的流量情况，以及针对异常状态码来设置预警</p>
<ul>
<li><a href="/2022/12/30/prometheus-best-practices-2-nginx/" title="prometheus + grafana 实战篇(2) - nginx">prometheus + grafana 实战篇(2) - nginx</a>
</li>
</ul>
<p>已经可以解决突发性的故障问题了，但是要达到更好的日志可观测性，还是不够，至少有以下两种场景没办法满足:</p>
<ol>
<li><p><strong>程序框架的异常状态码和 nginx 的状态码解耦。</strong> 有些程序框架为了保证返回值的友好和错误码的统一，是会在框架底层将抛出来的错误 catch 掉的，而不是直接扔到 nginx 上层返回。 举个例子，比如我们的 golang 框架就是这样子的，我们有自己定制了一整套的错误码标准，包含 数组越界，空指针异常 等异常都会在程序底层 catch，并在返回的 json 串填充错误码 code，并返回 200 状态码。 因此在 nginx 层，基本上只能看到 200 的正常码， 是看不到异常的 500 错误码的(nginx 本身的 499, 502, 504 还是有的)。要看程序错误，只能去查程序的输出 log。</p>
<blockquote>
<p>大部分的对外提供的 API 接口，也是会将程序的错误码和 http 的异常码解耦掉</p>
</blockquote>
</li>
<li><p><strong>针对某些外接第三方的 webhook 的错误处理也没办法返回异常状态码。</strong> 比如以支付项目为例，我们会接 Google 和 Apple 的 webhook 通知来处理订单状态，这时候有些处理逻辑是本身程序有 bug，你是不能直接针对 webhook 的返回响应返回异常状态码的，比如 500 错误码，不然这些第三方的 webhook 可能就会再重发。因此哪怕是程序异常，也最好是返回 200 正常码。那么对于这种情况，如果要检测的话，也是只能通过采集程序日志来进行发现和预警。</p>
</li>
</ol>
<p>综上所述，我们还是需要一种可以采集程序日志来生成 Prometheus 指标的服务。<br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2024/02/19/prometheus-best-practices-3-mtail/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[使用签名算法来作为微服务内部调用或者开放 API 的请求权限验证 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2023/11/30/sig-auth/</id>
        <link href="https://kebingzao.com/2023/11/30/sig-auth/"/>
        <updated>2025-05-10T05:40:46.687Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2023/11/30/sig-auth/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/11/30/sig-auth/" itemprop="url">使用签名算法来作为微服务内部调用或者开放 API 的请求权限验证</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-11-30T11:50:30+08:00">
                2023-11-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/web安全/" itemprop="url" rel="index">
                    <span itemprop="name">web安全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/11/30/sig-auth/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/11/30/sig-auth/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/11/30/sig-auth/" class="leancloud_visitors" data-flag-title="使用签名算法来作为微服务内部调用或者开放 API 的请求权限验证">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>随着内部应用的微服务的增多，一定会涉及到频繁的微服务之间的互相调用，这时候要有一种验证方式来保证两个微服务的调用是合法的(这边只是网关级别的请求校验，该有的业务校验一样要有), 如果你的微服务相互调用是通过 http(s) 的方式，那么采用签名算法来做请求的安全性校验是业务比较常用的方式。</p>
<blockquote>
<p>当然还有其他的方式，比如 ip 白名单，但是对于有负载均衡，横向扩展的服务来说，就没那么灵活</p>
</blockquote>
<p>签名算法大家其实不陌生，很多第三方的 sdk，权限校验走的就是签名算法的校验方式，原理都大同小异，其中我接触最多的就是 aws 的签名算法: <a href="https://docs.aws.amazon.com/zh_cn/AmazonS3/latest/API/sigv4-auth-using-authorization-header.html#sigv4-auth-header-overview" target="_blank" rel="noopener">AWS Signature Version 4</a></p>
<h2 id="最基础的原理"><a href="#最基础的原理" class="headerlink" title="最基础的原理"></a>最基础的原理</h2><p>最核心的原理就这几步，对于客户端来说:</p>
<ol>
<li>生成一对安全凭证，包括一个 <code>AccessKey</code> 和 <code>SecretKey</code>, 前者可以参与加密也可以不参与，主要是用来匹配对应的 <code>SecretKey</code>， 后者就是用来进行加密生成签名的</li>
<li>将整个 http 请求对象进行聚合操作，生成一个待签名串 <code>StringToSign</code></li>
<li>用 <code>SecretKey</code> 加密待签名串 <code>StringToSign</code>，生成最后的签名 <code>Signature</code></li>
<li>将签名 <code>Signature</code> 和 <code>AccessKey</code> 放在 header 标头，连同整个 http 请求对象发送过去</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2023/11/30/sig-auth/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[php 开启 opcache 来降低负载并提高抗并发能力 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2023/11/21/php-opcache/</id>
        <link href="https://kebingzao.com/2023/11/21/php-opcache/"/>
        <updated>2025-05-10T05:40:46.689Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2023/11/21/php-opcache/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/11/21/php-opcache/" itemprop="url">php 开启 opcache 来降低负载并提高抗并发能力</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-11-21T17:58:34+08:00">
                2023-11-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/php相关/" itemprop="url" rel="index">
                    <span itemprop="name">php相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/11/21/php-opcache/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/11/21/php-opcache/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/11/21/php-opcache/" class="leancloud_visitors" data-flag-title="php 开启 opcache 来降低负载并提高抗并发能力">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前通过 <a href="/2023/11/21/php-fpm-opt/" title="记一次 php-fpm 的配置调优">记一次 php-fpm 的配置调优</a> 有针对 php-fpm 的配置进行了调优，有起了一些效果，比如随着处理的进程加大，响应时间会快一点。 但是对于一些并发比较高的场景，还是会有 499 的情况，尤其是负载比较高的情况下，CPU 很容易跑满，php 子进程的响应速度也会越来越慢</p>
<p>当然最粗暴的就是加大服务器硬件配置，然后增大 <code>pm.max_children</code> 的值，硬抗，不过还有一种更合适的方式，就是开启 opcache 来降低服务器负载并提高抗并发能力。</p>
<h2 id="OpCode"><a href="#OpCode" class="headerlink" title="OpCode"></a>OpCode</h2><p>opcache 其实就是 OpCode + cache，因此要先了解一下什么是 OpCode。</p>
<p>php 是一种解释型语言，它的执行可分为以下几个流程:</p>
<ol>
<li>Scanning(Lexing) ,将PHP代码转换为语言片段(Tokens)</li>
<li>Parsing, 将Tokens转换成简单而有意义的表达式</li>
<li>Compilation, 将表达式编译成字节码 (OpCode)</li>
<li>Execution, 顺次执行 OpCode，每次一条，从而实现PHP脚本的功能。</li></ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2023/11/21/php-opcache/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[记一次 php-fpm 的配置调优 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2023/11/21/php-fpm-opt/</id>
        <link href="https://kebingzao.com/2023/11/21/php-fpm-opt/"/>
        <updated>2025-05-10T05:40:46.690Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2023/11/21/php-fpm-opt/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/11/21/php-fpm-opt/" itemprop="url">记一次 php-fpm 的配置调优</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-11-21T16:02:20+08:00">
                2023-11-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/php相关/" itemprop="url" rel="index">
                    <span itemprop="name">php相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/11/21/php-fpm-opt/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/11/21/php-fpm-opt/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/11/21/php-fpm-opt/" class="leancloud_visitors" data-flag-title="记一次 php-fpm 的配置调优">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>前段时间有一个很老的 php 服务发生了一个并发情况，产生大量的 499 状态码，刚开始以为是高并发导致的服务器负载不行。结果去 grafana 后台一看，服务器负载是正常的，然后查了一下同台的 golang 服务，他的返回状态码是非常正常的。</p>
<p>所以怀疑应该是 php 服务有问题，因为我们用的是 nginx + php-fpm 的部署方式， 所以应该是 php-fpm 的配置有问题。</p>
<p>然后抓了一下这一台的 php-fpm 的配置，果然有问题:<br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2023/11/21/php-fpm-opt/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[浅谈 - 邮件服务最佳实践 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2023/10/19/mail-best-practices/</id>
        <link href="https://kebingzao.com/2023/10/19/mail-best-practices/"/>
        <updated>2025-05-10T05:40:46.692Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2023/10/19/mail-best-practices/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/10/19/mail-best-practices/" itemprop="url">浅谈 - 邮件服务最佳实践</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-10-19T16:26:11+08:00">
                2023-10-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/服务浅谈系列/" itemprop="url" rel="index">
                    <span itemprop="name">服务浅谈系列</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/10/19/mail-best-practices/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/10/19/mail-best-practices/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/10/19/mail-best-practices/" class="leancloud_visitors" data-flag-title="浅谈 - 邮件服务最佳实践">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>前前后后使用了 aws 的 ses 服务也用了好几年了，在很多使用上也踩了很多坑，打算从最佳实践角度去聊聊，怎么更好的使用邮件服务。</p>
<p>主要分为几大块</p>
<ol>
<li>邮件质量相关</li>
<li>邮件安全相关</li>
<li>邮件统计相关</li>
<li>减少退信和投诉</li>
</ol>
<blockquote>
<p>以下很多内容虽然是从 aws 的 ses 服务来说明的，但是本质上邮件服务都是大同小异的，完全可以应用到其他的邮件服务上</p>
</blockquote>
<h2 id="邮件质量相关"><a href="#邮件质量相关" class="headerlink" title="邮件质量相关"></a>邮件质量相关</h2><h3 id="1-关注邮件质量"><a href="#1-关注邮件质量" class="headerlink" title="1. 关注邮件质量"></a>1. 关注邮件质量</h3><p>电子邮件接收方使用<code>内容筛选器</code>来检测邮件中的特定属性，以识别当前收到的邮件是否合法。这些内容筛选器会自动审核邮件的内容，以识别常见的不受欢迎的邮件特征乃至恶意邮件。</p>
<p>同时很多邮件服务厂商，比如 Amazon SES 也会使用<code>内容筛选技术</code>，协助在邮件发送之前检测和拦截包含恶意软件的邮件。</p>
<p>如果电子邮件接收方的内容筛选器认定我们的邮件包含垃圾邮件或恶意电子邮件的特性，邮件很可能被标记出来，并从收件人的收件箱中移出。<br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2023/10/19/mail-best-practices/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[npm 私有库开发和发布规范 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2023/09/21/npm-publish/</id>
        <link href="https://kebingzao.com/2023/09/21/npm-publish/"/>
        <updated>2025-05-10T05:40:46.693Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2023/09/21/npm-publish/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/09/21/npm-publish/" itemprop="url">npm 私有库开发和发布规范</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-09-21T14:04:34+08:00">
                2023-09-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/node相关/" itemprop="url" rel="index">
                    <span itemprop="name">node相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/09/21/npm-publish/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/09/21/npm-publish/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/09/21/npm-publish/" class="leancloud_visitors" data-flag-title="npm 私有库开发和发布规范">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>通过 <a href="/2023/09/19/npm-verdaccio/" title="使用 verdaccio 搭建前端内部私有 npm 仓库">使用 verdaccio 搭建前端内部私有 npm 仓库</a> 已经建立了团队内部的私有 npm，并且也知道怎么去进行私有包的发布。</p>
<p>那这一节讲一下怎么规范的进行包的开发，以及要发布的一些规范，当然不同的团队有自己的规范，仅供参考。</p>
<h2 id="开发规范"><a href="#开发规范" class="headerlink" title="开发规范"></a>开发规范</h2><p>主要包含以下几个环节:</p>
<ol>
<li>编写 <code>README.md</code> 文件，描述包的使用方法和注意事项</li>
<li>提供类型声明文件 (<code>.d.ts</code>)</li>
<li>提供 demo，方便使用者快速上手</li>
<li>提供单元测试，确保包的正确性</li>
<li>在导出的模块的函数中添加JSDoc注释</li>
</ol>
<h3 id="1-编写-README-md-文件"><a href="#1-编写-README-md-文件" class="headerlink" title="1. 编写 README.md 文件"></a>1. 编写 <code>README.md</code> 文件</h3><p><code>README.md</code> 文件无疑是安装者了解这个包的第一途径，因此是非常重要的。 通常README文件应该至少包含以下内容：</p>
<ol>
<li><strong>项目名称和描述</strong>：在文件的开头，应该清楚地标明项目的名称和描述，让读者了解这个项目是做什么的；<strong>注意</strong>: 描述会显示在npm包页面的概览中，所以请确保它是有意义的。</li>
<li><strong>安装指南</strong>：提供详细的步骤，说明如何安装和设置这个包。这可能包括需要的依赖、环境变量等。</li>
<li><strong>使用示例</strong>：提供一些基本的代码示例，让用户知道如何在他们的项目中使用你的包。</li>
<li><strong>API 文档</strong>：如果你的包提供了API，你应该在readme中详细说明每个公开的函数或方法，包括它们的参数、返回值和可能抛出的错误。</li>
<li><strong>Changelog</strong>: 应该提供版本 change log 记录或者跳转到 CHANGE_LOG.md 文件的外链</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2023/09/21/npm-publish/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[使用 verdaccio 搭建前端内部私有 npm 仓库 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2023/09/19/npm-verdaccio/</id>
        <link href="https://kebingzao.com/2023/09/19/npm-verdaccio/"/>
        <updated>2025-05-10T05:40:46.695Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2023/09/19/npm-verdaccio/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/09/19/npm-verdaccio/" itemprop="url">使用 verdaccio 搭建前端内部私有 npm 仓库</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-09-19T18:38:25+08:00">
                2023-09-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/node相关/" itemprop="url" rel="index">
                    <span itemprop="name">node相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/09/19/npm-verdaccio/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/09/19/npm-verdaccio/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/09/19/npm-verdaccio/" class="leancloud_visitors" data-flag-title="使用 verdaccio 搭建前端内部私有 npm 仓库">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>随着前端项目越来越多，尤其是内部的 js lib 库越来越多，怎么有效的管理 lib 库的发布，就变成一个很重要的问题了。</p>
<p>以之前做的 air-ui 来说，其实在进行版本发布的时候，为了保证不污染 gitlab 上的 master 分支，所以就专门写了脚本在版本发布的时候，进行分支切换来处理，具体步骤多又繁琐:<br></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. 检查当前分支是否是远程的 master 分支，如果不是，返回错误</span><br><span class="line">2. 执行 yarn dist， 生成 lib 目录</span><br><span class="line">3. 将 lib 目录保存到一个 gitignore 的一个目录 lib_tmp</span><br><span class="line">4. commit and push master 分支 （如果 status 有改变的话）</span><br><span class="line">5. 切换到 master-release 分支，将 lib_tmp 的文件覆盖 lib 目录</span><br><span class="line">6. commit and push master-release 分支</span><br><span class="line">7. master-release 打 tag</span><br><span class="line">8. 把临时文件 lib_tmp 删掉</span><br></pre></td></tr></tbody></table></figure><p></p>
<blockquote>
<p>具体细节查看 <a href="/2020/01/13/air-ui-16/" title="自建vue组件 air-ui (16) -- 打包构建 pub 任务">自建vue组件 air-ui (16) -- 打包构建 pub 任务</a></p>
</blockquote>
<p>这种流程是有一些缺点和问题的:</p>
<ol>
<li><strong>发布流程复杂化：</strong> 需要编写专门的脚本来确定哪些构建产物的代码需要发布，同时还需手动删除不必要的代码。</li>
<li><strong>容易产生混淆：</strong> 使用 <code>git tag</code> 来发布代码可能会引起混淆，因为它通常用于标记版本，而不是发布代码。</li>
<li><strong>无法利用语义化版本控制的范围（例如：^1.0.0 或 ~1.0.0）来精确指定依赖的版本</strong></li>
</ol>
<p>但是如果我们有自己的 npm 库的话，其实对于库的发布就变得非常简单，只需要简单的 3 步:</p>
<ol>
<li>更新<code>package.json</code>中的版本号</li>
<li>代码构建</li>
<li>最后执行<code>npm publish</code>命令，即发布成功</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2023/09/19/npm-verdaccio/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[记一次大陆地区 VerneMQ 出现部分证书校验失败的情况 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2023/08/25/vernemq-ssl-err/</id>
        <link href="https://kebingzao.com/2023/08/25/vernemq-ssl-err/"/>
        <updated>2025-05-10T05:40:46.697Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2023/08/25/vernemq-ssl-err/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/08/25/vernemq-ssl-err/" itemprop="url">记一次大陆地区 VerneMQ 出现部分证书校验失败的情况</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-08-25T13:45:05+08:00">
                2023-08-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/webrtc相关/" itemprop="url" rel="index">
                    <span itemprop="name">webrtc相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/08/25/vernemq-ssl-err/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/08/25/vernemq-ssl-err/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/08/25/vernemq-ssl-err/" class="leancloud_visitors" data-flag-title="记一次大陆地区 VerneMQ 出现部分证书校验失败的情况">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>前段时间有发生过一个事情，就是 测试人员在他的 windows 或者 mac 中有出现连接 mqtt VerneMQ 失败的情况, 而且比较神奇的地方在于:</p>
<ol>
<li>如果搭梯子的话，是可以连接成功的</li>
<li>不搭梯子，将 chrome 浏览器换成 Firefox， 也是可以连接的</li>
<li>在一些机器上，通过修改 DNS 解析，比如改成 <code>8.8.8.8</code>, 也可以正常</li>
</ol>
<p>经过排查之后，发现确实在连接失败的时候，VerneMQ 服务器会出现部分证书相关的错误提示:<br></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[info] &lt;0.20467.939&gt; TLS server: In state certify received CLIENT ALERT: Fatal - Certificat Unknown</span><br></pre></td></tr></tbody></table></figure><p></p>
<h2 id="排查"><a href="#排查" class="headerlink" title="排查"></a>排查</h2><p>首先排查证书问题，确定我们的证书是对的，nginx 都可以正常使用。而且我们的 crt 证书文件是有包含整个验证环节的 fullchain 的聚合证书(包含多个证书链内容的合成证书)。</p>
<p>然后对比一下 chrome 和 Firefox 的证书校验机制，Firefox 带了自己的 CA 证书链， chrome 的 CA 走的是系统的， 因此怀疑是 VerneMQ 证书链对合成证书的验证环节有问题??</p>
<p>分析浏览器该站点的证书链路发现，我们用的证书有属于二级证书签发，中间有一个 Go Daddy Secure CA 校验节点<br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2023/08/25/vernemq-ssl-err/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[chatgpt 使用过程中常用的 prompt (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2023/05/31/gpt-use-prompt/</id>
        <link href="https://kebingzao.com/2023/05/31/gpt-use-prompt/"/>
        <updated>2025-05-10T05:40:46.699Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2023/05/31/gpt-use-prompt/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/05/31/gpt-use-prompt/" itemprop="url">chatgpt 使用过程中常用的 prompt</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-05-31T17:00:52+08:00">
                2023-05-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/ai-相关/" itemprop="url" rel="index">
                    <span itemprop="name">ai 相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/05/31/gpt-use-prompt/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/05/31/gpt-use-prompt/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/05/31/gpt-use-prompt/" class="leancloud_visitors" data-flag-title="chatgpt 使用过程中常用的 prompt">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>随着 AI 浪潮的兴起，人工智能将席卷一切，基本上所有的行业都要发生变革。 而在使用 AI 提高工作效率的过程中，prompt 变得越来越重要。</p>
<p>毫不夸张的说，一个好的 prompt 和一个普通的 prompt 对 chatgpt 的内容的准确性，可用性的输出将会产生巨大的差别。如果把 AI 比作 拉力赛的赛车手， 那么 prompt 就相当于坐在副驾驶坐的引导员。 没有 prompt 去指导方向，再牛逼的车，再牛逼的驾驶员都有可能迷失方向。</p>
<p>所以我针对我日常在 chatgpt 的使用中，一些常用的 prompt 有记录下来，以作备忘</p>
<blockquote>
<p>这边的 prompt 并不是指 role 中的 system 的那个 prompt，而是指 role 为 user 提的问题的一部分内容</p>
</blockquote>
<h3 id="1-角色扮演"><a href="#1-角色扮演" class="headerlink" title="1. 角色扮演"></a>1. 角色扮演</h3><p>这个是 prompt 最常用的方式，就是让 chatgpt 来扮演一个角色，然后来问答</p>
<p>比如可以这样子写:<br></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">你是一个呼吸内科的医生，你需要通过向我提出一些问题，并获得我的回答来判断我大概得的是什么类型的感冒，</span><br><span class="line">如果我回答的信息不够，请继续向我询问，直到你得到充分的信息。你在最好还需要对我的病情给出专业的建议</span><br></pre></td></tr></tbody></table></figure><p></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2023/05/31/gpt-use-prompt/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[web 安全之 - 使用 proxy 请求页面来绕过 X-Frame-Options 机制 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2023/02/03/web-bypass-x-frame-options/</id>
        <link href="https://kebingzao.com/2023/02/03/web-bypass-x-frame-options/"/>
        <updated>2025-05-10T05:40:46.701Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2023/02/03/web-bypass-x-frame-options/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/02/03/web-bypass-x-frame-options/" itemprop="url">web 安全之 - 使用 proxy 请求页面来绕过 X-Frame-Options 机制</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-02-03T16:43:08+08:00">
                2023-02-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/web安全/" itemprop="url" rel="index">
                    <span itemprop="name">web安全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/02/03/web-bypass-x-frame-options/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/02/03/web-bypass-x-frame-options/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/02/03/web-bypass-x-frame-options/" class="leancloud_visitors" data-flag-title="web 安全之 - 使用 proxy 请求页面来绕过 X-Frame-Options 机制">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>前段时间有个 researcher 回报说，他可以通过使用 <a href="https://github.com/niutech/x-frame-bypass" target="_blank" rel="noopener">X-Frame-Bypass</a> 来绕过我们站点的 <code>X-Frame-Options</code> 机制，从而将我们的站点内嵌在他的网页上，从而造成 Clickjacking</p>
<p>对于 Clickjacking 来说，我们一般是使用设置 <code>X-Frame-Options</code> header 来防止站点被第三方内嵌，具体可以看我之前的文章:</p>
<ul>
<li><a href="/2018/05/05/web-forbidden-iframe-embed/" title="web 页面防iframe嵌入（防止点击劫持Clickjacking）">web 页面防iframe嵌入（防止点击劫持Clickjacking）</a>
</li>
</ul>
<p>通过 <code>X-Frame-Options</code> 我们可以很好的防止我们的站点被第三方内嵌。</p>
<p>那么 <a href="https://github.com/niutech/x-frame-bypass" target="_blank" rel="noopener">X-Frame-Bypass</a> 是怎么绕过 <code>X-Frame-Options</code> 这个限制的呢?</p>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>我后面看了一下他的代码，他的方式其实很简单，既然 <code>X-Frame-Options</code> 是在 response 的 header 返回的，那么我只要在请求的时候，先去通过第三方服务将我想要的站点的内容取出来，然后只转发这个 body 体，不转发 header，就可以绕过了。</p>
<p>举个例子，比如我内嵌别人站点的代码是这样子的:<br></p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe src=<span class="string">"https://api.codetabs.com/v1/proxy/?quest=https://test-example.com/my_test.html"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span></span><br></pre></td></tr></tbody></table></figure><p></p>
<p>这个逻辑很简单，就是这个 第三方 <code>api.codetabs.com</code>, 会去请求 <code>https://test-example.com/my_test.html</code>，并且将源代码返回，其实就是转发<br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2023/02/03/web-bypass-x-frame-options/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[后端开发针对 aws 用户权限进行细分和设置 ip 白名单 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2023/01/18/aws-policy-deny-ip/</id>
        <link href="https://kebingzao.com/2023/01/18/aws-policy-deny-ip/"/>
        <updated>2025-05-10T05:40:46.702Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2023/01/18/aws-policy-deny-ip/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/01/18/aws-policy-deny-ip/" itemprop="url">后端开发针对 aws 用户权限进行细分和设置 ip 白名单</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-01-18T13:36:05+08:00">
                2023-01-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/aws-相关/" itemprop="url" rel="index">
                    <span itemprop="name">aws 相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/01/18/aws-policy-deny-ip/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/01/18/aws-policy-deny-ip/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/01/18/aws-policy-deny-ip/" class="leancloud_visitors" data-flag-title="后端开发针对 aws 用户权限进行细分和设置 ip 白名单">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>前段时间在项目的安全审计中，有发现了一个关于后端开发中，使用 aws sdk 的一个安全隐患，就是后端的一些项目中，有用到了 aws 的一些功能，包含 s3，ses，dynamodb 等，而这些功能用的 key 都是同一个 key， 都是属于在 aws 后台创建的 develop 用户。</p>
<p>这个 develop 用户在 aws 后台具有以下的策略权限(policy):</p>
<ul>
<li>dynamodb 功能的所有权限 –&gt; <code>AmazonDynamoDBFullAccess</code></li>
<li>s3 功能的所有权限 –&gt; <code>AmazonS3FullAccess</code></li>
<li>ses 功能的所有权限 – <code>AmazonSESFullAccess</code></li>
</ul>
<p>因为这个 develop 用户拥有的权限太大了， 一旦 key+secret 泄露了， 黑客就可以通过类似于 aws-cli 的命令行工具来做一些不好的事情，比如:</p>
<ul>
<li>往 s3 上的 bucket 随意上传某些木马文件</li>
<li>修改 s3 bucket 的 acl 权限，将所有的 bucket 都改成公开桶，直接暴露在外网，或者给自己插入一个另一个账号的登录后门</li>
<li>直接使用 ses 发送垃圾邮件，然后受到投诉过多之后，就会可能导致这个 aws 账号被封禁</li>
<li>删除 dynamodb 的记录或者表</li>
</ul>
<p>因此我们必须在后端开发中，根据具体项目所使用到的 aws 的功能，尽可能做最小化的权限分配，并且要设置请求的 ip 白名单，这样子一来，哪怕不小心这个用户的 key+secret 泄露了，我们也不用担心会造成太大的影响。<br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2023/01/18/aws-policy-deny-ip/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[prometheus + grafana 实战篇(2) - nginx (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2022/12/30/prometheus-best-practices-2-nginx/</id>
        <link href="https://kebingzao.com/2022/12/30/prometheus-best-practices-2-nginx/"/>
        <updated>2025-05-10T05:40:46.704Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2022/12/30/prometheus-best-practices-2-nginx/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/12/30/prometheus-best-practices-2-nginx/" itemprop="url">prometheus + grafana 实战篇(2) - nginx</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-12-30T18:13:24+08:00">
                2022-12-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/prometheus-相关/" itemprop="url" rel="index">
                    <span itemprop="name">prometheus 相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/12/30/prometheus-best-practices-2-nginx/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/12/30/prometheus-best-practices-2-nginx/" itemprop="commentCount">1 Comment</span>
                </a>
              </span>
            
          

          
          
             <span id="/2022/12/30/prometheus-best-practices-2-nginx/" class="leancloud_visitors" data-flag-title="prometheus + grafana 实战篇(2) - nginx">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>经过上一节我们初步定义了一些标签的规范: <a href="/2022/12/30/prometheus-best-practices-1-labels/" title="prometheus + grafana 实战篇(1) - 定义标签组和规范">prometheus + grafana 实战篇(1) - 定义标签组和规范</a>, 本节我们来讲一下怎么监控 nginx</p>
<h2 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h2><p>nginx 作为最受欢迎的 web server 之一，我的不少文章都有涉及到 nginx， 这边不再赘述。</p>
<p>我们假设在使用 prometheus 采集 nginx 之前，我们线上环境已经有 nginx 服务来跑了。</p>
<blockquote>
<p>关于 nginx 的安装，可以看我的这一篇文章: <a href="/2020/09/15/centos7-install-nginx/" title="CentOS 7 安装 Nginx">CentOS 7 安装 Nginx</a></p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-16-223-centos sbin]# netstat -anlp | grep 80</span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      29841/nginx: master</span><br><span class="line">tcp        0      0 172.26.16.223:37134     169.254.0.4:80          TIME_WAIT   -                   </span><br><span class="line">udp6       0      0 fe80::5054:ff:fe23::123 :::*                                656/ntpd</span><br></pre></td></tr></tbody></table></figure>
<h2 id="nginx-vts-export"><a href="#nginx-vts-export" class="headerlink" title="nginx-vts-export"></a>nginx-vts-export</h2><p>prometheus 常用的 nginx 的导出器，目前比较常用的是 <a href="https://github.com/hnlq715/nginx-vts-exporter" target="_blank" rel="noopener">nginx-vts-exporter</a></p>
<p><code>nginx_vts_exporter</code> 依赖 nginx 的这个 <code>nginx-module-vts</code> 模块, 因此我们要先在 nginx 上重新编译安装 <code>nginx-module-vts</code> 模块</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/12/30/prometheus-best-practices-2-nginx/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[prometheus + grafana 实战篇(1) - 定义标签组和规范 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2022/12/30/prometheus-best-practices-1-labels/</id>
        <link href="https://kebingzao.com/2022/12/30/prometheus-best-practices-1-labels/"/>
        <updated>2025-05-10T05:40:46.706Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2022/12/30/prometheus-best-practices-1-labels/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/12/30/prometheus-best-practices-1-labels/" itemprop="url">prometheus + grafana 实战篇(1) - 定义标签组和规范</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-12-30T15:49:12+08:00">
                2022-12-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/prometheus-相关/" itemprop="url" rel="index">
                    <span itemprop="name">prometheus 相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/12/30/prometheus-best-practices-1-labels/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/12/30/prometheus-best-practices-1-labels/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2022/12/30/prometheus-best-practices-1-labels/" class="leancloud_visitors" data-flag-title="prometheus + grafana 实战篇(1) - 定义标签组和规范">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>经过前面的学习，我们已经能够很好的掌握 prometheus 并建立监控后台了，但是那个毕竟是学习篇，用于循循渐进的学习和掌握。</p>
<ul>
<li><a href="https://kebingzao.com/categories/prometheus-%E7%9B%B8%E5%85%B3/">基于 prometheus 打造监控报警后台</a></li>
</ul>
<p>但是真正涉及到线上的实战，其实复杂度还是跟学习的情况差很多的， 因此我这边结合在实际项目上的一些实战，也捋了个实战篇。</p>
<h2 id="prometheus-推荐的最佳实践"><a href="#prometheus-推荐的最佳实践" class="headerlink" title="prometheus 推荐的最佳实践"></a>prometheus 推荐的最佳实践</h2><p>在仪表板(dashboard)上显示尽可能多的数据虽然很爽，尤其是当像 Prometheus 这样的系统提供了对应用程序进行如此丰富的检测的能力时。这可能会导致控制台由于包含太多信息而变得难以理解，即使是系统专家也难以从中获得意义。</p>
<p>所以千万不要将所有的数据都往 dashboard 上面搬，请考虑你建这个 dashboard 的初衷是什么，想要解决什么问题，如果你想要解决的问题是一个很复杂的问题的话，请把他进行拆解，并且分成多个 dashboard 来分批解决。</p>
<p>prometheus 官方推荐的 dashboard 指南:</p>
<ol>
<li>dashboard 上面的图表最好不要超过 5 个</li>
<li>每张图的图(线) 也不超过 5</li>
<li>如果使用的是 dashboard 的第三方模板，请避免右侧表格中的条目超过 20-30 个</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/12/30/prometheus-best-practices-1-labels/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[基于 prometheus 打造监控报警后台 (10) - 服务发现(基于文件和基于 http 端点) (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2022/12/14/prometheus-10-sd/</id>
        <link href="https://kebingzao.com/2022/12/14/prometheus-10-sd/"/>
        <updated>2025-05-10T05:40:46.707Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2022/12/14/prometheus-10-sd/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/12/14/prometheus-10-sd/" itemprop="url">基于 prometheus 打造监控报警后台 (10) - 服务发现(基于文件和基于 http 端点)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-12-14T16:31:38+08:00">
                2022-12-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/prometheus-相关/" itemprop="url" rel="index">
                    <span itemprop="name">prometheus 相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/12/14/prometheus-10-sd/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/12/14/prometheus-10-sd/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2022/12/14/prometheus-10-sd/" class="leancloud_visitors" data-flag-title="基于 prometheus 打造监控报警后台 (10) - 服务发现(基于文件和基于 http 端点)">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>经过前面的 prometheus 系列的学习，我们知道 prometheus 要监控和抓取的端点都要写在 prometheus.yml 这个配置文件，这种方式对于要监控实例较少的情况还行，但是不适合大规模的的集群。</p>
<p>尤其不适合用于使用容器和基于云的实例的动态集群，这些实例经常会出现变化，有可能新创建，有可能是下架。</p>
<p>而 prometheus 通过使用 <code>服务发现</code> 来通过自动化的机制来检测，分类新的变更实例情况。</p>
<h2 id="服务发现的几种类别"><a href="#服务发现的几种类别" class="headerlink" title="服务发现的几种类别"></a>服务发现的几种类别</h2><p>prometheus 提供的服务发现其实种类很多，有很多是跟第三方集成，从配置文件所支持的 参数 来看，分别有:</p>
<blockquote>
<p>具体集成的服务列表，官方文档也有: <a href="https://github.com/prometheus/prometheus/tree/main/discovery" target="_blank" rel="noopener">Service Discovery</a></p>
</blockquote>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/12/14/prometheus-10-sd/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[基于 prometheus 打造监控报警后台 (9) - 借助 pushgateway 主动 push 数据 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2022/12/14/prometheus-9-push/</id>
        <link href="https://kebingzao.com/2022/12/14/prometheus-9-push/"/>
        <updated>2025-05-10T05:40:46.713Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2022/12/14/prometheus-9-push/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/12/14/prometheus-9-push/" itemprop="url">基于 prometheus 打造监控报警后台 (9) - 借助 pushgateway 主动 push 数据</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-12-14T13:30:40+08:00">
                2022-12-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/prometheus-相关/" itemprop="url" rel="index">
                    <span itemprop="name">prometheus 相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/12/14/prometheus-9-push/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/12/14/prometheus-9-push/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2022/12/14/prometheus-9-push/" class="leancloud_visitors" data-flag-title="基于 prometheus 打造监控报警后台 (9) - 借助 pushgateway 主动 push 数据">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前我们的所有的场景，都是通过 prometheus server 定期去实例(<code>instance</code>)拉取(<code>pull</code>)数据, 但是有以下两种情况会有问题:</p>
<ol>
<li>由于子网络或者防火墙的关系， prometheus server 不能直接拉取各个 instance 的指标数据</li>
<li>监控程序不是在线服务系统，而是批处理作业，批处理作业的特点是它们不会连续运行，这使得抓取它们变得困难。所以 prometheus 如果是定期拉取的话，就会出现 instance 没有运行的情况</li>
</ol>
<p>基于以上的情况，所以 prometheus server 提供了另一种让实例(<code>instance</code>) 主动 push 指标数据的能力， 那就是借助另一个程序: Pushgateway 来进行代理， 让其他的程序先把数据抛送到 Pushgateway， 然后再让 prometheus server 定期去 Pushgateway 拉取数据</p>
<h2 id="Pushgateway-使用场景"><a href="#Pushgateway-使用场景" class="headerlink" title="Pushgateway 使用场景"></a>Pushgateway 使用场景</h2><p>使用 Pushgateway 会有几个问题:</p>
<ol>
<li>当通过单个 Pushgateway 监控多个实例时，Pushgateway 会有单点故障的潜在问题</li>
<li>没有实例的自动健康监控指标 <code>up</code></li>
<li>只要是通过 Pushgateway 代理推送给 prometheus server 的实例的指标，会一直存在，哪怕这个实例后面不再抛送指标给 Pushgateway，但是 prometheus 依然会保留这个实例的指标 </li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/12/14/prometheus-9-push/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[基于 prometheus 打造监控报警后台 (8) - 业务程序自定义添加指标 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2022/12/12/prometheus-8-customize/</id>
        <link href="https://kebingzao.com/2022/12/12/prometheus-8-customize/"/>
        <updated>2025-05-10T05:40:46.714Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2022/12/12/prometheus-8-customize/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/12/12/prometheus-8-customize/" itemprop="url">基于 prometheus 打造监控报警后台 (8) - 业务程序自定义添加指标</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-12-12T14:07:56+08:00">
                2022-12-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/prometheus-相关/" itemprop="url" rel="index">
                    <span itemprop="name">prometheus 相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/12/12/prometheus-8-customize/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/12/12/prometheus-8-customize/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2022/12/12/prometheus-8-customize/" class="leancloud_visitors" data-flag-title="基于 prometheus 打造监控报警后台 (8) - 业务程序自定义添加指标">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我们都知道 prometheus 是一个监控程序， 并且可以采集指标，但是之前我们的测试都是用的官方的 exporter ，比如 <code>node_exporter</code> 这种监控主机的。</p>
<p>其实 prometheus 采集的指标一样可以用于我们的自己写的程序, 关于 prometheus 的 客户端的 sdk lib 可以看: <a href="https://prometheus.io/docs/instrumenting/clientlibs/" target="_blank" rel="noopener">prometheus client libraries</a></p>
<p>里面很多主流语言都有包含，比如 Golang, Python, Java, Node.js, PHP 等，有一些是 prometheus 官方自己维护的，有一些是第三方贡献者写的。</p>
<p>当然如果你自己使用的语言不在上面，也可以按照 prometheus 标准实现一个该语言的 客户端 sdk 库: <a href="https://prometheus.io/docs/instrumenting/writing_clientlibs/" target="_blank" rel="noopener">编写客户端库的指南</a></p>
<p>所以本节我们就自己用一个程序来实现 prometheus 的 客户端功能，然后自定义一些抛送的指标。</p>
<h2 id="指标和数据模型"><a href="#指标和数据模型" class="headerlink" title="指标和数据模型"></a>指标和数据模型</h2><p>在实现 prometheus 的 客户端功能，那么就要了解 prometheus 的指标和数据模型，这一块直接看 <a href="/2022/11/28/prometheus-2-metrics/" title="基于 prometheus 打造监控报警后台 (2) - 指标类型和数据模型">基于 prometheus 打造监控报警后台 (2) - 指标类型和数据模型</a>, 文章已经讲的很详细了。</p>
<p>我们只需要在我们程序中通过实现这四种类型(<code>Counter</code>, <code>Gauge</code>, <code>Histogram</code>, <code>Summary</code>)之一的指标，那么就是符合 prometheus 客户端的抛送指标了。<br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/12/12/prometheus-8-customize/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[基于 prometheus 打造监控报警后台 (7) - grafana 后台创建警报 (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2022/12/07/prometheus-7-grafana-alert/</id>
        <link href="https://kebingzao.com/2022/12/07/prometheus-7-grafana-alert/"/>
        <updated>2025-05-10T05:40:46.716Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2022/12/07/prometheus-7-grafana-alert/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/12/07/prometheus-7-grafana-alert/" itemprop="url">基于 prometheus 打造监控报警后台 (7) - grafana 后台创建警报</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-12-07T14:01:09+08:00">
                2022-12-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/prometheus-相关/" itemprop="url" rel="index">
                    <span itemprop="name">prometheus 相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/12/07/prometheus-7-grafana-alert/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/12/07/prometheus-7-grafana-alert/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2022/12/07/prometheus-7-grafana-alert/" class="leancloud_visitors" data-flag-title="基于 prometheus 打造监控报警后台 (7) - grafana 后台创建警报">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前我们已经尝试了在 prometheus 上创建警报，并且使用 alertmanager 来发送通知了: <a href="/2022/11/29/prometheus-4-alertmanager/" title="基于 prometheus 打造监控报警后台 (4) - 使用 alertmanager 发送警报">基于 prometheus 打造监控报警后台 (4) - 使用 alertmanager 发送警报</a></p>
<p>但是正常情况下，我们都是在 grafana 后台查看我们所创建的 dashboard 仪表盘。 同时 grafana 后台也可以显示我们在 prometheus 上创建的规则 (包含警报规则和记录规则)</p>
<blockquote>
<p>不同版本的 grafana 可能界面会有差，甚至操作也会有区别，本节演示的 grafana 的版本是 <code>v9.2.5 (042e4d216b)</code></p>
</blockquote>
<h2 id="grafana-显示-prometheus-创建的规则"><a href="#grafana-显示-prometheus-创建的规则" class="headerlink" title="grafana 显示 prometheus 创建的规则"></a>grafana 显示 prometheus 创建的规则</h2><p>继续延伸上一节的规则配置 (配置了两个 rule 文件，一个是警报规则，一个是记录规则)，当我们查看 grafana 后台的 alerting 的时候，可以看到他也有把我们创建的规则一起显示出来<br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/12/07/prometheus-7-grafana-alert/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[基于 prometheus 打造监控报警后台 (6) - 记录规则(recording rule) (Zach Ke's Notes)]]></title>
        <id>https://kebingzao.com/2022/12/07/prometheus-6-record-rule/</id>
        <link href="https://kebingzao.com/2022/12/07/prometheus-6-record-rule/"/>
        <updated>2025-05-10T05:40:46.717Z</updated>
        <content type="html"><![CDATA[<link itemprop="mainEntityOfPage" href="http://kebingzao.com/2022/12/07/prometheus-6-record-rule/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zach Ke">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zach Ke's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/12/07/prometheus-6-record-rule/" itemprop="url">基于 prometheus 打造监控报警后台 (6) - 记录规则(recording rule)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-12-07T11:08:40+08:00">
                2022-12-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/prometheus-相关/" itemprop="url" rel="index">
                    <span itemprop="name">prometheus 相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/12/07/prometheus-6-record-rule/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/12/07/prometheus-6-record-rule/" itemprop="commentCount">0 Comments</span>
                </a>
              </span>
            
          

          
          
             <span id="/2022/12/07/prometheus-6-record-rule/" class="leancloud_visitors" data-flag-title="基于 prometheus 打造监控报警后台 (6) - 记录规则(recording rule)">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数:</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>通过 <a href="/2022/11/29/prometheus-4-alertmanager/" title="基于 prometheus 打造监控报警后台 (4) - 使用 alertmanager 发送警报">基于 prometheus 打造监控报警后台 (4) - 使用 alertmanager 发送警报</a> 我们知道 prometheus 可以创建 警报规则 来触发警报，然后再把报警信息发送给 alertmanager ，然后 alertmanager 来发送报警通知。</p>
<p>但是其实 prometheus 还有一种规则，就是 <a href="https://prometheus.io/docs/prometheus/latest/configuration/recording_rules/" target="_blank" rel="noopener">记录规则</a></p>
<h2 id="记录规则-recording-rule"><a href="#记录规则-recording-rule" class="headerlink" title="记录规则(recording rule)"></a>记录规则(recording rule)</h2><p>记录规则允许您预先计算经常需要或计算量大的表达式，并将其结果保存为一组新的时间序列。查询预先计算的结果通常比每次需要时都执行原始表达式要快得多。这对于每次刷新时都需要重复查询相同表达式的仪表板特别有用。</p>
<p>也就是每一条记录规则，其实都会作为时间序列存入时序数据库，有点类似于 mysql 的 索引，这些都是有开销，所以也不能无止境的建记录规则，因为会有额外的开销。</p>
<p>关于记录规则的语法，其实跟警报规则一样，他们的配置差别仅仅在于 <code>rules</code> 小节下的第一个配置的 key 是 record 还是 alert。 其他都一样</p>
<p>所以语法这一块，之前在讲警报规则的时候，就讲解过了， 可以看之前讲警报规则的文章: <a href="/2022/11/29/prometheus-4-alertmanager/" title="基于 prometheus 打造监控报警后台 (4) - 使用 alertmanager 发送警报">基于 prometheus 打造监控报警后台 (4) - 使用 alertmanager 发送警报</a><br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/12/07/prometheus-6-record-rule/#more" rel="contents">
              阅读全文 »
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>]]></content>
    </entry>
</feed>